<div class="alert alert-success"><div class="icon"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"></path></svg></div><div class="message"><div class="title"> 说明</div><p>本文作为洛谷P8773 [蓝桥杯 2022 省 A] 选数异或的题解<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>的题解，已经在洛谷发布。</p>
<p><a href="https://www.luogu.com.cn/problem/solution/P8773">https://www.luogu.com.cn/problem/solution/P8773</a></p>
</div></div>
<p>竟然没有题解，那么本蒟蒻就随手写一个......</p>
<p>首先有一个很常见的结论： 如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊗</mo><mi>b</mi><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">a \otimes b=x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>⊗</mo><mi>x</mi><mo>=</mo><mi>b</mi></mrow><annotation encoding="application/x-tex">a \otimes x=b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> 。</p>
<p>根据这个结论，我们可以对 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span></span></span></span> 数列中每一项异或上一个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span> 得到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span> 数列。即： <code>b[i]=a[i]^x;</code> 。</p>
<p>然后题意就转化为：给定一个区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span> ，问数组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">a</span></span></span></span> 和数组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> 在这个区间内是否有相同的数。</p>
<p>这个问题看起来很简单，应该有非常简单又巧妙的解法。但是本蒟蒻一眼就想拿莫队来做，是目前的最<strong>劣</strong>解。</p>
<p>先离散化，再开两个桶，每次移动指针的时候判断是否影响答案。</p>
<p>时间复杂度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo>+</mo><mi>n</mi><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log n+n\sqrt{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span> （不知道对不对）。</p>
<p>代码：</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2FsZ29yaXRobSUzRSUwQSUyM2luY2x1ZGUlM0NjbWF0aCUzRSUwQSUyM2RlZmluZSUyMGludCUyMGxvbmclMjBsb25nJTBBJTIzZGVmaW5lJTIwXyUyMDEwMDAwNSUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBaW50JTIwYmxvJTJDYmwlNUJfJTVEJTJDYSU1Ql8lNUQlMkNiJTVCXyU1RCUyQ3VuaSU1Ql8lM0MlM0MxJTVEJTJDdG90JTJDbiUyQ20lMkN4JTNCJTBBc3RydWN0JTIwUXVlcnklN0JpbnQlMjBsJTJDciUyQ2lkJTJDYW5zJTNCJTdEJTIwcSU1Ql8lNUQlM0IlMEElMEElMkYlMkYlRTYlQjMlQTglRTYlODQlOEYlRTUlQkMlODAlRTQlQjglQTQlRTUlODAlOEQlRTYlOTUlQjAlRTclQkIlODQlMEFpbnQlMjBsJTNEMSUyQ3IlMkNhbnMlMkNidTElNUJfJTNDJTNDMSU1RCUyQ2J1MiU1Ql8lM0MlM0MxJTVEJTNCJTBBaW5saW5lJTIwdm9pZCUyMGFkZChpbnQlMjB4KSU3QiUwQSUwOWJvb2wlMjBzdCUzRCgoYnUxJTVCYSU1QnglNUQlNUQlM0UwJTI2JTI2YnUyJTVCYSU1QnglNUQlNUQlM0UwKSU3QyU3QyhidTElNUJiJTVCeCU1RCU1RCUzRTAlMjYlMjZidTIlNUJiJTVCeCU1RCU1RCkpJTNCJTBBJTA5YnUxJTVCYSU1QnglNUQlNUQlMkIlMkIlM0IlMEElMDlidTIlNUJiJTVCeCU1RCU1RCUyQiUyQiUzQiUwQSUwOWJvb2wlMjBlZCUzRCgoYnUxJTVCYSU1QnglNUQlNUQlM0UwJTI2JTI2YnUyJTVCYSU1QnglNUQlNUQlM0UwKSU3QyU3QyhidTElNUJiJTVCeCU1RCU1RCUzRTAlMjYlMjZidTIlNUJiJTVCeCU1RCU1RCkpJTNCJTBBJTA5aWYoIXN0JTI2JTI2ZWQpJTIwYW5zJTJCJTJCJTNCJTJGJTJGJUU1JTg4JUE0JUU2JTk2JUFEJUU2JTk4JUFGJUU1JTkwJUE2JUU1JUFGJUI5JUU3JUFEJTk0JUU2JUExJTg4JUU0JUJBJUE3JUU3JTk0JTlGJUU1JUJEJUIxJUU1JTkzJThEJTBBJTdEJTBBaW5saW5lJTIwdm9pZCUyMGRlbChpbnQlMjB4KSU3QiUwQSUwOWJvb2wlMjBzdCUzRCgoYnUxJTVCYSU1QnglNUQlNUQlM0UwJTI2JTI2YnUyJTVCYSU1QnglNUQlNUQlM0UwKSU3QyU3QyhidTElNUJiJTVCeCU1RCU1RCUzRTAlMjYlMjZidTIlNUJiJTVCeCU1RCU1RCkpJTNCJTBBJTA5YnUxJTVCYSU1QnglNUQlNUQtLSUzQiUwQSUwOWJ1MiU1QmIlNUJ4JTVEJTVELS0lM0IlMEElMDlib29sJTIwZWQlM0QoKGJ1MSU1QmElNUJ4JTVEJTVEJTNFMCUyNiUyNmJ1MiU1QmElNUJ4JTVEJTVEJTNFMCklN0MlN0MoYnUxJTVCYiU1QnglNUQlNUQlM0UwJTI2JTI2YnUyJTVCYiU1QnglNUQlNUQpKSUzQiUwQSUwOWlmKHN0JTI2JTI2IWVkKSUyMGFucy0tJTNCJTBBJTdEJTBBJTBBc2lnbmVkJTIwbWFpbigpJTdCJTBBJTA5aW9zJTNBJTNBc3luY193aXRoX3N0ZGlvKGZhbHNlKSUzQiUwQSUwOSUyRiUyRiVFOCVBRiVCQiVFNSU4NSVBNSVFNiU5NSVCMCVFNiU4RCVBRSUwQSUwOWNpbiUzRSUzRW4lM0UlM0VtJTNFJTNFeCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjBjaW4lM0UlM0VhJTVCaSU1RCUyQ2IlNUJpJTVEJTNEYSU1QmklNUQlNUV4JTJDdW5pJTVCJTJCJTJCdG90JTVEJTNEYSU1QmklNUQlMkN1bmklNUIlMkIlMkJ0b3QlNUQlM0RiJTVCaSU1RCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RtJTNCaSUyQiUyQiklMjBjaW4lM0UlM0VxJTVCaSU1RC5sJTNFJTNFcSU1QmklNUQuciUyQ3ElNUJpJTVELmlkJTNEaSUzQiUwQSUwOSUyRiUyRiVFNyVBNiVCQiVFNiU5NSVBMyVFNSU4QyU5NiUwQSUwOXNvcnQodW5pJTJCMSUyQ3VuaSUyQnRvdCUyQjEpJTNCJTBBJTA5dG90JTNEdW5pcXVlKHVuaSUyQjElMkN1bmklMkJ0b3QlMkIxKS11bmktMSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjBhJTVCaSU1RCUzRGxvd2VyX2JvdW5kKHVuaSUyQjElMkN1bmklMkJ0b3QlMkIxJTJDYSU1QmklNUQpLXVuaSUyQ2IlNUJpJTVEJTNEbG93ZXJfYm91bmQodW5pJTJCMSUyQ3VuaSUyQnRvdCUyQjElMkNiJTVCaSU1RCktdW5pJTNCJTBBJTA5JTJGJTJGJUU1JTg4JTg2JUU1JTlEJTk3JTBBJTA5YmxvJTNEc3FydChuKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjBibCU1QmklNUQlM0QoaS0xKSUyRmJsbyUyQjElM0IlMEElMDlzb3J0KHElMkIxJTJDcSUyQm0lMkIxJTJDJTVCJTVEKFF1ZXJ5JTIwcWElMkNRdWVyeSUyMHFiKSU3QnJldHVybiUyMGJsJTVCcWEubCU1RCUzRCUzRGJsJTVCcWIubCU1RCUzRiUyMHFhLnIlM0NxYi5yJTNBcWEubCUzQ3FiLmwlM0IlN0QpJTNCJTBBJTA5JTJGJTJGJUU1JUE0JTg0JUU3JTkwJTg2JUU4JUFGJUEyJUU5JTk3JUFFJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG0lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOXdoaWxlKGwlM0NxJTVCaSU1RC5sKSUyMGRlbChsJTJCJTJCKSUzQiUwQSUwOSUwOXdoaWxlKGwlM0VxJTVCaSU1RC5sKSUyMGFkZCgtLWwpJTNCJTBBJTA5JTA5d2hpbGUociUzQ3ElNUJpJTVELnIpJTIwYWRkKCUyQiUyQnIpJTNCJTBBJTA5JTA5d2hpbGUociUzRXElNUJpJTVELnIpJTIwZGVsKHItLSklM0IlMEElMDklMDlxJTVCaSU1RC5hbnMlM0RhbnMlM0IlMEElMDklN0QlMEElMDklMkYlMkYlRTglQkUlOTMlRTUlODclQkElRTclQUQlOTQlRTYlQTElODglMEElMDlzb3J0KHElMkIxJTJDcSUyQm0lMkIxJTJDJTVCJTVEKFF1ZXJ5JTIwcWElMkNRdWVyeSUyMHFiKSU3QnJldHVybiUyMHFhLmlkJTNDcWIuaWQlM0IlN0QpJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG0lM0JpJTJCJTJCKSUyMGNvdXQlM0MlM0MocSU1QmklNUQuYW5zJTNGJTIwJTIyeWVzJTIyJTNBJTIybm8lMjIpJTNDJTNDZW5kbCUzQiUwQSUwOXJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cmath&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 100005</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> blo,bl[_],a[_],b[_],uni[_&lt;&lt;<span class="hljs-number">1</span>],tot,n,m,x;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Query</span>{<span class="hljs-type">int</span> l,r,id,ans;} q[_];

<span class="hljs-comment">//注意开两倍数组</span>
<span class="hljs-type">int</span> l=<span class="hljs-number">1</span>,r,ans,bu1[_&lt;&lt;<span class="hljs-number">1</span>],bu2[_&lt;&lt;<span class="hljs-number">1</span>];
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>{
	<span class="hljs-type">bool</span> st=((bu1[a[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[a[x]]&gt;<span class="hljs-number">0</span>)||(bu1[b[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[b[x]]));
	bu1[a[x]]++;
	bu2[b[x]]++;
	<span class="hljs-type">bool</span> ed=((bu1[a[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[a[x]]&gt;<span class="hljs-number">0</span>)||(bu1[b[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[b[x]]));
	<span class="hljs-keyword">if</span>(!st&amp;&amp;ed) ans++;<span class="hljs-comment">//判断是否对答案产生影响</span>
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">del</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>{
	<span class="hljs-type">bool</span> st=((bu1[a[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[a[x]]&gt;<span class="hljs-number">0</span>)||(bu1[b[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[b[x]]));
	bu1[a[x]]--;
	bu2[b[x]]--;
	<span class="hljs-type">bool</span> ed=((bu1[a[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[a[x]]&gt;<span class="hljs-number">0</span>)||(bu1[b[x]]&gt;<span class="hljs-number">0</span>&amp;&amp;bu2[b[x]]));
	<span class="hljs-keyword">if</span>(st&amp;&amp;!ed) ans--;
}

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);
	<span class="hljs-comment">//读入数据</span>
	cin&gt;&gt;n&gt;&gt;m&gt;&gt;x;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;a[i],b[i]=a[i]^x,uni[++tot]=a[i],uni[++tot]=b[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++) cin&gt;&gt;q[i].l&gt;&gt;q[i].r,q[i].id=i;
	<span class="hljs-comment">//离散化</span>
	<span class="hljs-built_in">sort</span>(uni<span class="hljs-number">+1</span>,uni+tot<span class="hljs-number">+1</span>);
	tot=<span class="hljs-built_in">unique</span>(uni<span class="hljs-number">+1</span>,uni+tot<span class="hljs-number">+1</span>)-uni<span class="hljs-number">-1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">lower_bound</span>(uni<span class="hljs-number">+1</span>,uni+tot<span class="hljs-number">+1</span>,a[i])-uni,b[i]=<span class="hljs-built_in">lower_bound</span>(uni<span class="hljs-number">+1</span>,uni+tot<span class="hljs-number">+1</span>,b[i])-uni;
	<span class="hljs-comment">//分块</span>
	blo=<span class="hljs-built_in">sqrt</span>(n);
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) bl[i]=(i<span class="hljs-number">-1</span>)/blo<span class="hljs-number">+1</span>;
	<span class="hljs-built_in">sort</span>(q<span class="hljs-number">+1</span>,q+m<span class="hljs-number">+1</span>,[](Query qa,Query qb){<span class="hljs-keyword">return</span> bl[qa.l]==bl[qb.l]? qa.r&lt;qb.r:qa.l&lt;qb.l;});
	<span class="hljs-comment">//处理询问</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++){
		<span class="hljs-keyword">while</span>(l&lt;q[i].l) <span class="hljs-built_in">del</span>(l++);
		<span class="hljs-keyword">while</span>(l&gt;q[i].l) <span class="hljs-built_in">add</span>(--l);
		<span class="hljs-keyword">while</span>(r&lt;q[i].r) <span class="hljs-built_in">add</span>(++r);
		<span class="hljs-keyword">while</span>(r&gt;q[i].r) <span class="hljs-built_in">del</span>(r--);
		q[i].ans=ans;
	}
	<span class="hljs-comment">//输出答案</span>
	<span class="hljs-built_in">sort</span>(q<span class="hljs-number">+1</span>,q+m<span class="hljs-number">+1</span>,[](Query qa,Query qb){<span class="hljs-keyword">return</span> qa.id&lt;qb.id;});
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++) cout&lt;&lt;(q[i].ans? <span class="hljs-string">&quot;yes&quot;</span>:<span class="hljs-string">&quot;no&quot;</span>)&lt;&lt;endl;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>P8773 [蓝桥杯 2022 省 A] 选数异或 <a href="https://www.luogu.com.cn/problem/P8773">https://www.luogu.com.cn/problem/P8773</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
