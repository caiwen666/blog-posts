<div class="alert alert-success"><div class="icon"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"></path></svg></div><div class="message"><div class="title"> 说明</div><p>本篇文章是举行在2023年1月17日的 CZOI2023 的题解</p>
<p>比赛页：<a href="https://www.luogu.com.cn/contest/73174">https://www.luogu.com.cn/contest/73174</a></p>
<p>T1哈希：<a href="https://www.luogu.com.cn/problem/T254770">https://www.luogu.com.cn/problem/T254770</a></p>
<p>T2拆分：<a href="https://www.luogu.com.cn/problem/T280587">https://www.luogu.com.cn/problem/T280587</a></p>
<p>T3到达：<a href="https://www.luogu.com.cn/problem/T304485">https://www.luogu.com.cn/problem/T304485</a></p>
<p>T4纯爱：<a href="https://www.luogu.com.cn/problem/T255743">https://www.luogu.com.cn/problem/T255743</a></p>
</div></div>
<h2 id="t1-ha-xi" tabindex="-1">T1 哈希</h2>
<p>看起来可能要用到一些高深的知识。实际上，观察到 mod 比较小，我们暴力枚举字符串，最多枚举（一般情况） mod 个不同的字符串，就一定可以找到产生哈希冲突的字符串了。</p>
<p>比较关键的是枚举字符串的长度。题目中mod最大为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><msup><mn>10</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">3\times 10^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>26</mn><mn>6</mn></msup></mrow><annotation encoding="application/x-tex">26^6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">2</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span></span></span></span>差不多也是这个数，所以至少要枚举6位，否则可能把所有字符串都枚举完也不能找到产生碰撞的。</p>
<h3 id="biao-zhun-suan-fa" tabindex="-1">标准算法</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2NzdGRpbyUzRSUwQSUyM2luY2x1ZGUlM0NjdGltZSUzRSUwQSUyM2luY2x1ZGUlM0Njc3RkbGliJTNFJTBBJTIzaW5jbHVkZSUzQ3NzdHJlYW0lM0UlMEElMjNkZWZpbmUlMjBpbnQlMjBsb25nJTIwbG9uZyUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBaW50JTIwdCUyQ2Jhc2UlMkNtb2QlMkN0YXIlM0IlMEElMEFpbmxpbmUlMjBpbnQlMjBIYXNoKHN0cmluZyUyMHN0ciUyQ2ludCUyMGJhc2UlMkNpbnQlMjBtb2QpJTdCJTBBJTA5aW50JTIwcmVzJTNEMCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMCUzQmklM0NzdHIuc2l6ZSgpJTNCaSUyQiUyQiklN0IlMEElMDklMDlyZXMlM0QocmVzKmJhc2UlMjVtb2QlMkIoaW50KXN0ciU1QmklNUQpJTI1bW9kJTNCJTBBJTA5JTdEJTBBJTA5cmV0dXJuJTIwcmVzJTNCJTBBJTdEJTBBJTBBaW5saW5lJTIwdm9pZCUyMHB1c2goc3RyaW5nJTIweCklN0IlMEElMDlpZihIYXNoKHglMkNiYXNlJTJDbW9kKSUzRCUzRHRhciklN0IlMEElMDklMDljb3V0JTNDJTNDeCUzQiUwQSUwOSUwOWV4aXQoMCklM0IlMEElMDklN0QlMEElN0QlMEElMEF2b2lkJTIwZGZzKHN0cmluZyUyMHgpJTdCJTBBJTA5aWYoeC5zaXplKCklM0UlM0Q4KSUyMHJldHVybiUzQiUwQSUwOXB1c2goeCklM0IlMEElMDlmb3IoaW50JTIwaSUzRDAlM0JpJTNDMjYlM0JpJTJCJTJCKSU3QiUwQSUwOSUwOXN0cmluZyUyMHklM0R4JTJCKGNoYXIpKCdhJyUyQmkpJTNCJTBBJTA5JTA5ZGZzKHkpJTNCJTBBJTA5JTdEJTBBJTdEJTBBJTBBc2lnbmVkJTIwbWFpbigpJTdCJTBBJTA5Y2luJTNFJTNFYmFzZSUzQmNpbiUzRSUzRW1vZCUzQiUwQSUwOXN0cmluZyUyMHN0ciUzQmNpbiUzRSUzRXN0ciUzQiUwQSUwOXRhciUzREhhc2goc3RyJTJDYmFzZSUyQ21vZCklM0IlMEElMDlkZnMoJTIyYSUyMiklM0IlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;ctime&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdlib&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;sstream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> t,base,mod,tar;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">Hash</span><span class="hljs-params">(string str,<span class="hljs-type">int</span> base,<span class="hljs-type">int</span> mod)</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		res=(res*base%mod+(<span class="hljs-type">int</span>)str[i])%mod;
	}
	<span class="hljs-keyword">return</span> res;
}

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">push</span><span class="hljs-params">(string x)</span></span>{
	<span class="hljs-keyword">if</span>(<span class="hljs-built_in">Hash</span>(x,base,mod)==tar){
		cout&lt;&lt;x;
		<span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
	}
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(string x)</span></span>{
	<span class="hljs-keyword">if</span>(x.<span class="hljs-built_in">size</span>()&gt;=<span class="hljs-number">8</span>) <span class="hljs-keyword">return</span>;
	<span class="hljs-built_in">push</span>(x);
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">26</span>;i++){
		string y=x+(<span class="hljs-type">char</span>)(<span class="hljs-string">&#x27;a&#x27;</span>+i);
		<span class="hljs-built_in">dfs</span>(y);
	}
}

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;base;cin&gt;&gt;mod;
	string str;cin&gt;&gt;str;
	tar=<span class="hljs-built_in">Hash</span>(str,base,mod);
	<span class="hljs-built_in">dfs</span>(<span class="hljs-string">&quot;a&quot;</span>);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>标程中枚举了8位字符串。由于一开始dfs时，第一位字符是固定的，所以实际上是枚举了7位。</p>
<p>如果改为枚举7位（实际上是枚举6位），可能会将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><msup><mn>10</mn><mn>8</mn></msup></mrow><annotation encoding="application/x-tex">3\times 10^8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span> 的复杂度跑满，所以需要枚举的位数多一些，但也不能太多。</p>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mtext>玄学</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(玄学)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord cjk_fallback">玄学</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>90</mn><mo>−</mo><mn>100</mn><mi>p</mi><mi>t</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">90-100pts</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">90</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">100</span><span class="mord mathnormal">pt</span><span class="mord mathnormal">s</span></span></span></span></p>
<h2 id="t2-chai-fen" tabindex="-1">T2 拆分</h2>
<p>题面非常简洁，但是确实这几道题里面最难的</p>
<p>结合样例给的解释，我们可以很快写出一个暴力算法</p>
<h3 id="suan-fa-yi" tabindex="-1">算法一</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbnQlMjBhJTVCMTAwMDAlNUQlM0IlMEFpbnQlMjBhbnMlM0QwJTNCJTBBaW50JTIwbiUzQiUwQSUwQXZvaWQlMjBkZnMoaW50JTIwczElMkNpbnQlMjBzMiklN0IlMEElMDlpZihzMSUzRCUzRG4pJTdCJTBBJTA5JTA5YW5zJTNEbWF4KHMyJTJDYW5zKSUzQiUwQSUwOSUwOXJldHVybiUzQiUwQSUwOSU3RCUwQSUwQSUwOWZvcihpbnQlMjBpJTNEMiUzQmklM0MlM0RuLXMxJTNCaSUyQiUyQiklN0IlMEElMDklMDlkZnMoczElMkJpJTJDczIqaSklM0IlMEElMDklN0QlMEElN0QlMEElMEFpbnQlMjBtYWluKCklN0IlMEElMDljaW4lM0UlM0VuJTNCJTBBJTA5ZGZzKDAlMkMxKSUzQiUwQSUwOWNvdXQlM0MlM0NhbnMlM0IlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> a[<span class="hljs-number">10000</span>];
<span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;
<span class="hljs-type">int</span> n;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> s1,<span class="hljs-type">int</span> s2)</span></span>{
	<span class="hljs-keyword">if</span>(s1==n){
		ans=<span class="hljs-built_in">max</span>(s2,ans);
		<span class="hljs-keyword">return</span>;
	}

	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n-s1;i++){
		<span class="hljs-built_in">dfs</span>(s1+i,s2*i);
	}
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n;
	<span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
	cout&lt;&lt;ans;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>我们观察到，题目最后的答案只和n有关，而对于测试点1-5，n最大只有50，因此我们可以打表</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbnQlMjBhbnMlNUI1MSU1RCUzQiUwQSUwQWludCUyMG1haW4oKSU3QiUwQSUwOWFucyU1QjElNUQlM0QxJTNCJTBBJTA5YW5zJTVCMiU1RCUzRDIlM0IlMEElMDlhbnMlNUIzJTVEJTNEMyUzQiUwQSUwOWFucyU1QjQlNUQlM0Q0JTNCJTBBJTA5YW5zJTVCNSU1RCUzRDYlM0IlMEElMDlhbnMlNUI2JTVEJTNEOSUzQiUwQSUwOWFucyU1QjclNUQlM0QxMiUzQiUwQSUwOWFucyU1QjglNUQlM0QxOCUzQiUwQSUwOWFucyU1QjklNUQlM0QyNyUzQiUwQSUwOWFucyU1QjEwJTVEJTNEMzYlM0IlMEElMDlhbnMlNUIxMSU1RCUzRDU0JTNCJTBBJTA5YW5zJTVCMTIlNUQlM0Q4MSUzQiUwQSUwOWFucyU1QjEzJTVEJTNEMTA4JTNCJTBBJTA5YW5zJTVCMTQlNUQlM0QxNjIlM0IlMEElMDlhbnMlNUIxNSU1RCUzRDI0MyUzQiUwQSUwOWFucyU1QjE2JTVEJTNEMzI0JTNCJTBBJTA5YW5zJTVCMTclNUQlM0Q0ODYlM0IlMEElMDlhbnMlNUIxOCU1RCUzRDcyOSUzQiUwQSUwOWFucyU1QjE5JTVEJTNEOTcyJTNCJTBBJTA5YW5zJTVCMjAlNUQlM0QxNDU4JTNCJTBBJTA5YW5zJTVCMjElNUQlM0QyMTg3JTNCJTBBJTA5YW5zJTVCMjIlNUQlM0QyOTE2JTNCJTBBJTA5YW5zJTVCMjMlNUQlM0Q0Mzc0JTNCJTBBJTA5YW5zJTVCMjQlNUQlM0Q2NTYxJTNCJTBBJTA5YW5zJTVCMjUlNUQlM0Q4NzQ4JTNCJTBBJTA5YW5zJTVCMjYlNUQlM0QxMzEyMiUzQiUwQSUwOWFucyU1QjI3JTVEJTNEMTk2ODMlM0IlMEElMDlhbnMlNUIyOCU1RCUzRDI2MjQ0JTNCJTBBJTA5YW5zJTVCMjklNUQlM0QzOTM2NiUzQiUwQSUwOWFucyU1QjMwJTVEJTNENTkwNDklM0IlMEElMDlhbnMlNUIzMSU1RCUzRDc4NzMyJTNCJTBBJTA5YW5zJTVCMzIlNUQlM0QxMTgwOTglM0IlMEElMDlhbnMlNUIzMyU1RCUzRDE3NzE0NyUzQiUwQSUwOWFucyU1QjM0JTVEJTNEMjM2MTk2JTNCJTBBJTA5YW5zJTVCMzUlNUQlM0QzNTQyOTQlM0IlMEElMDlhbnMlNUIzNiU1RCUzRDUzMTQ0MSUzQiUwQSUwOWFucyU1QjM3JTVEJTNENzA4NTg4JTNCJTBBJTA5YW5zJTVCMzglNUQlM0QxMDYyODgyJTNCJTBBJTA5YW5zJTVCMzklNUQlM0QxNTk0MzIzJTNCJTBBJTA5YW5zJTVCNDAlNUQlM0QyMTI1NzY0JTNCJTBBJTA5YW5zJTVCNDElNUQlM0QzMTg4NjQ2JTNCJTBBJTA5YW5zJTVCNDIlNUQlM0Q0NzgyOTY5JTNCJTBBJTA5YW5zJTVCNDMlNUQlM0Q2Mzc3MjkyJTNCJTBBJTA5YW5zJTVCNDQlNUQlM0Q5NTY1OTM4JTNCJTBBJTA5YW5zJTVCNDUlNUQlM0QxNDM0ODkwNyUzQiUwQSUwOWFucyU1QjQ2JTVEJTNEMTkxMzE4NzYlM0IlMEElMDlhbnMlNUI0NyU1RCUzRDI4Njk3ODE0JTNCJTBBJTA5YW5zJTVCNDglNUQlM0Q0MzA0NjcyMSUzQiUwQSUwOWFucyU1QjQ5JTVEJTNENTczOTU2MjglM0IlMEElMDlhbnMlNUI1MCU1RCUzRDg2MDkzNDQyJTNCJTBBJTA5aW50JTIwbiUzQmNpbiUzRSUzRW4lM0IlMEElMDljb3V0JTNDJTNDYW5zJTVCbiU1RCUzQiUwQSUwOXJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> ans[<span class="hljs-number">51</span>];

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	ans[<span class="hljs-number">1</span>]=<span class="hljs-number">1</span>;
	ans[<span class="hljs-number">2</span>]=<span class="hljs-number">2</span>;
	ans[<span class="hljs-number">3</span>]=<span class="hljs-number">3</span>;
	ans[<span class="hljs-number">4</span>]=<span class="hljs-number">4</span>;
	ans[<span class="hljs-number">5</span>]=<span class="hljs-number">6</span>;
	ans[<span class="hljs-number">6</span>]=<span class="hljs-number">9</span>;
	ans[<span class="hljs-number">7</span>]=<span class="hljs-number">12</span>;
	ans[<span class="hljs-number">8</span>]=<span class="hljs-number">18</span>;
	ans[<span class="hljs-number">9</span>]=<span class="hljs-number">27</span>;
	ans[<span class="hljs-number">10</span>]=<span class="hljs-number">36</span>;
	ans[<span class="hljs-number">11</span>]=<span class="hljs-number">54</span>;
	ans[<span class="hljs-number">12</span>]=<span class="hljs-number">81</span>;
	ans[<span class="hljs-number">13</span>]=<span class="hljs-number">108</span>;
	ans[<span class="hljs-number">14</span>]=<span class="hljs-number">162</span>;
	ans[<span class="hljs-number">15</span>]=<span class="hljs-number">243</span>;
	ans[<span class="hljs-number">16</span>]=<span class="hljs-number">324</span>;
	ans[<span class="hljs-number">17</span>]=<span class="hljs-number">486</span>;
	ans[<span class="hljs-number">18</span>]=<span class="hljs-number">729</span>;
	ans[<span class="hljs-number">19</span>]=<span class="hljs-number">972</span>;
	ans[<span class="hljs-number">20</span>]=<span class="hljs-number">1458</span>;
	ans[<span class="hljs-number">21</span>]=<span class="hljs-number">2187</span>;
	ans[<span class="hljs-number">22</span>]=<span class="hljs-number">2916</span>;
	ans[<span class="hljs-number">23</span>]=<span class="hljs-number">4374</span>;
	ans[<span class="hljs-number">24</span>]=<span class="hljs-number">6561</span>;
	ans[<span class="hljs-number">25</span>]=<span class="hljs-number">8748</span>;
	ans[<span class="hljs-number">26</span>]=<span class="hljs-number">13122</span>;
	ans[<span class="hljs-number">27</span>]=<span class="hljs-number">19683</span>;
	ans[<span class="hljs-number">28</span>]=<span class="hljs-number">26244</span>;
	ans[<span class="hljs-number">29</span>]=<span class="hljs-number">39366</span>;
	ans[<span class="hljs-number">30</span>]=<span class="hljs-number">59049</span>;
	ans[<span class="hljs-number">31</span>]=<span class="hljs-number">78732</span>;
	ans[<span class="hljs-number">32</span>]=<span class="hljs-number">118098</span>;
	ans[<span class="hljs-number">33</span>]=<span class="hljs-number">177147</span>;
	ans[<span class="hljs-number">34</span>]=<span class="hljs-number">236196</span>;
	ans[<span class="hljs-number">35</span>]=<span class="hljs-number">354294</span>;
	ans[<span class="hljs-number">36</span>]=<span class="hljs-number">531441</span>;
	ans[<span class="hljs-number">37</span>]=<span class="hljs-number">708588</span>;
	ans[<span class="hljs-number">38</span>]=<span class="hljs-number">1062882</span>;
	ans[<span class="hljs-number">39</span>]=<span class="hljs-number">1594323</span>;
	ans[<span class="hljs-number">40</span>]=<span class="hljs-number">2125764</span>;
	ans[<span class="hljs-number">41</span>]=<span class="hljs-number">3188646</span>;
	ans[<span class="hljs-number">42</span>]=<span class="hljs-number">4782969</span>;
	ans[<span class="hljs-number">43</span>]=<span class="hljs-number">6377292</span>;
	ans[<span class="hljs-number">44</span>]=<span class="hljs-number">9565938</span>;
	ans[<span class="hljs-number">45</span>]=<span class="hljs-number">14348907</span>;
	ans[<span class="hljs-number">46</span>]=<span class="hljs-number">19131876</span>;
	ans[<span class="hljs-number">47</span>]=<span class="hljs-number">28697814</span>;
	ans[<span class="hljs-number">48</span>]=<span class="hljs-number">43046721</span>;
	ans[<span class="hljs-number">49</span>]=<span class="hljs-number">57395628</span>;
	ans[<span class="hljs-number">50</span>]=<span class="hljs-number">86093442</span>;
	<span class="hljs-type">int</span> n;cin&gt;&gt;n;
	cout&lt;&lt;ans[n];
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 O(1)</p>
<p>期望得分 10pts</p>
<p>对于测试点6-10，虽然n依然很小，但是暴力算法已经无法胜任。可以通过各种奇怪的剪枝、优化来获得更高的分数</p>
<h3 id="suan-fa-er" tabindex="-1">算法二</h3>
<p>我们考虑对于一个已经拆分出来的数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，将其继续拆分会不会更优，将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 继续拆分为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">a_i-k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>，有：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>×</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><mi>k</mi><mo stretchy="false">)</mo><mo>≥</mo><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">k\times (a_i-k)\ge a_i
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>≥</mo><mfrac><msup><mi>k</mi><mn>2</mn></msup><mrow><mi>k</mi><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">a_i\ge \frac{k^2}{k-1} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2604em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>对于不等式右边，上下同时除以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>k</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">k^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>，再令 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mfrac><mn>1</mn><mi>k</mi></mfrac></mrow><annotation encoding="application/x-tex">t=\frac{1}{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> 分母可化为二次函数形式，开口朝下，有最大值，即原式有最小值4，此时 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">k=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span><br>
这样一来，我们得到了一个结论：对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub><mo>≥</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">a_i\ge 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>×</mo><mo stretchy="false">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo><mo>≥</mo><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">2\times (a_i-2)\ge a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p>
<p>也就是说，一个大于等于4的数，一定可以继续被拆分。换句话说，最后拆分出来的数中，一定只会含有 1，2，3。显然，如果拆分出来了1，那么这个方案肯定不是最优的。所以最后拆分出来的数只有2和3</p>
<p>那么对于特殊性质的测试点，我们将n全部拆成3。</p>
<p>最后答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>3</mn><mfrac><mi>n</mi><mn>3</mn></mfrac></msup></mrow><annotation encoding="application/x-tex">3^{\frac{n}{3}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8471em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8471em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span>，使用快速幂</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzZGVmaW5lJTIwaW50JTIwbG9uZyUyMGxvbmclMEF1c2luZyUyMG5hbWVzcGFjZSUyMHN0ZCUzQiUwQSUwQWNvbnN0JTIwaW50JTIwbW9kJTNEMTAwMDAwMDAwNyUzQiUwQWlubGluZSUyMGludCUyMHBvdzEoaW50JTIwYSUyQ2ludCUyMHApJTdCJTBBJTA5aW50JTIwcmVzJTNEMSUzQiUwQSUwOWRvJTdCJTBBJTA5JTA5aWYocCUyNjEpJTIwcmVzJTNEcmVzKmElMjVtb2QlM0IlMEElMDklMDlhJTNEYSphJTI1bW9kJTNCcCUzRSUzRSUzRDElM0IlMEElMDklN0R3aGlsZShwKSUzQiUwQSUwOXJldHVybiUyMHJlcyUzQiUwQSU3RCUwQWlubGluZSUyMGludCUyMHBvdzIoaW50JTIwYSUyQ2ludCUyMHApJTdCJTBBJTA5aW50JTIwcmVzJTNEMSUzQiUwQSUwOWRvJTdCJTBBJTA5JTA5aWYocCUyNjEpJTIwcmVzJTNEcmVzKmElM0IlMEElMDklMDlhJTNEYSphJTNCcCUzRSUzRSUzRDElM0IlMEElMDklN0R3aGlsZShwKSUzQiUwQSUwOXJldHVybiUyMHJlcyUzQiUwQSU3RCUwQSUwQXNpZ25lZCUyMG1haW4oKSU3QiUwQSUwOWludCUyMG4lMkN0eXBlJTNCJTBBJTA5Y2luJTNFJTNFbiUzRSUzRXR5cGUlM0IlMEElMDlpZihuJTI1MyUzRCUzRDApJTdCJTBBJTA5JTA5aWYodHlwZSUzRCUzRDApJTdCJTBBJTA5JTA5JTA5Y291dCUzQyUzQ3BvdzIoMyUyQ24lMkYzKSUzQiUwQSUwOSUwOSU3RGVsc2UlN0IlMEElMDklMDklMDljb3V0JTNDJTNDcG93MSgzJTJDbiUyRjMpJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">const</span> <span class="hljs-type">int</span> mod=<span class="hljs-number">1000000007</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">pow1</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> p)</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">do</span>{
		<span class="hljs-keyword">if</span>(p&amp;<span class="hljs-number">1</span>) res=res*a%mod;
		a=a*a%mod;p&gt;&gt;=<span class="hljs-number">1</span>;
	}<span class="hljs-keyword">while</span>(p);
	<span class="hljs-keyword">return</span> res;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">pow2</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> p)</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">do</span>{
		<span class="hljs-keyword">if</span>(p&amp;<span class="hljs-number">1</span>) res=res*a;
		a=a*a;p&gt;&gt;=<span class="hljs-number">1</span>;
	}<span class="hljs-keyword">while</span>(p);
	<span class="hljs-keyword">return</span> res;
}

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> n,type;
	cin&gt;&gt;n&gt;&gt;type;
	<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">0</span>){
		<span class="hljs-keyword">if</span>(type==<span class="hljs-number">0</span>){
			cout&lt;&lt;<span class="hljs-built_in">pow2</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span>);
		}<span class="hljs-keyword">else</span>{
			cout&lt;&lt;<span class="hljs-built_in">pow1</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span>);
		}
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>结合算法一期望得分38pts</p>
<h3 id="suan-fa-san" tabindex="-1">算法三</h3>
<p>我们可以有一种直观的感觉：拆成的3越多越好，下面我们来证明一下<br>
设一个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 拆分成 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个2和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> 个3，即有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>n</mi><mo>+</mo><mn>3</mn><mi>m</mi><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">2n+3m=k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></p>
<p>我们将2的数量增加 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mi>d</mi></mrow><annotation encoding="application/x-tex">3d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">3</span><span class="mord mathnormal">d</span></span></span></span>，3的数量减少<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>d</mi></mrow><annotation encoding="application/x-tex">2d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">2</span><span class="mord mathnormal">d</span></span></span></span>。之所以这样增加和减少，是因为这样做依然可以满足 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>3</mn><mi>d</mi><mo stretchy="false">)</mo><mo>+</mo><mn>3</mn><mo stretchy="false">(</mo><mi>m</mi><mo>−</mo><mn>2</mn><mi>d</mi><mo stretchy="false">)</mo><mo>=</mo><mn>2</mn><mi>n</mi><mo>+</mo><mn>3</mn><mi>m</mi><mo>=</mo><mi>k</mi></mrow><annotation encoding="application/x-tex">2(n+3d)+3(m-2d)=2n+3m=k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal">d</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">3</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>。我们只需要证明</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>×</mo><msup><mn>3</mn><mi>m</mi></msup><mo>≥</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>+</mo><mn>3</mn><mi>d</mi></mrow></msup><mo>×</mo><msup><mn>3</mn><mrow><mi>m</mi><mo>−</mo><mn>2</mn><mi>d</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^n\times 3^m\ge 2^{n+3d}\times 3^{m-2d} 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7977em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8504em;vertical-align:-0.136em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9824em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">3</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8991em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup><mo>×</mo><msup><mn>3</mn><mi>m</mi></msup><mo>≥</mo><msup><mn>2</mn><mi>n</mi></msup><mo>×</mo><msup><mn>2</mn><mrow><mn>3</mn><mi>d</mi></mrow></msup><mo>×</mo><mfrac><msup><mn>3</mn><mi>m</mi></msup><msup><mn>3</mn><mrow><mn>2</mn><mi>d</mi></mrow></msup></mfrac></mrow><annotation encoding="application/x-tex">2^n\times 3^m\ge 2^n\times 2^{3d}\times \frac{3^m}{3^{2d}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7977em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8504em;vertical-align:-0.136em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7977em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9824em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0274em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7751em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>1</mn><mo>≥</mo><mfrac><msup><mn>2</mn><mrow><mn>3</mn><mi>d</mi></mrow></msup><msup><mn>3</mn><mrow><mn>2</mn><mi>d</mi></mrow></msup></mfrac><mo>=</mo><mo stretchy="false">(</mo><mfrac><mn>8</mn><mn>9</mn></mfrac><msup><mo stretchy="false">)</mo><mi>d</mi></msup></mrow><annotation encoding="application/x-tex">1\ge \frac{2^{3d}}{3^{2d}}=(\frac{8}{9})^d
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2121em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5261em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7751em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">9</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>即得证</p>
<p>这样一来，我们进行分类讨论</p>
<p>当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi mathvariant="normal">%</mi><mn>3</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">n\%3=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord mathnormal">n</span><span class="mord">%3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 时，答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>3</mn><mfrac><mi>n</mi><mn>3</mn></mfrac></msup></mrow><annotation encoding="application/x-tex">3^{\frac{n}{3}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8471em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8471em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi mathvariant="normal">%</mi><mn>3</mn><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n\%3=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord mathnormal">n</span><span class="mord">%3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 时，答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>3</mn><mrow><mfrac><mi>n</mi><mn>3</mn></mfrac><mo>−</mo><mn>1</mn></mrow></msup><mo>×</mo><mn>2</mn><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">3^{\frac{n}{3}-1}\times 2\times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9304em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8471em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></p>
<p>当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi mathvariant="normal">%</mi><mn>3</mn><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">n\%3=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord mathnormal">n</span><span class="mord">%3</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 时，答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>3</mn><mfrac><mi>n</mi><mn>3</mn></mfrac></msup><mo>×</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">3^{\frac{n}{3}}\times 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9304em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8471em;"><span style="top:-3.363em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">3</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span></p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2NzdHJpbmclM0UlMEElMjNkZWZpbmUlMjBpbnQlMjBsb25nJTIwbG9uZyUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBc3RydWN0JTIwTGludCU3QiUwQSUwOWludCUyMG51bSU1QjIwMDAlNUQlMkNsZW4lM0IlMEElMDljaGFyJTIwb3AlM0IlMEElMDlMaW50KCklN0JtZW1zZXQobnVtJTJDMCUyQ3NpemVvZihudW0pKSUzQmxlbiUzRDElM0JvcCUzRCclMkInJTNCJTdEJTBBJTA5TGludChpbnQlMjBhKSU3QiUwQSUwOSUwOW1lbXNldChudW0lMkMwJTJDc2l6ZW9mKG51bSkpJTNCbGVuJTNEMSUzQm9wJTNEJyUyQiclM0IlMEElMDklMDlpbnQlMjB0JTNEMCUzQiUwQSUwOSUwOXdoaWxlKGEpJTdCJTBBJTA5JTA5JTA5dCUyQiUyQiUzQiUwQSUwOSUwOSUwOW51bSU1QnQlNUQlM0RhJTI1MTAlM0IlMEElMDklMDklMDlhJTJGJTNEMTAlM0IlMEElMDklMDklN0QlMEElMDklMDlsZW4lM0R0JTNCJTBBJTA5JTdEJTBBJTdEJTNCJTBBTGludCUyMG9wZXJhdG9yKihMaW50JTIwYSUyQ0xpbnQlMjBiKSU3QiUwQSUwOUxpbnQlMjBjJTNCJTBBJTA5Yy5sZW4lM0RhLmxlbiUyQmIubGVuJTJCMSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RhLmxlbiUzQmklMkIlMkIpJTdCJTBBJTA5JTA5Zm9yKGludCUyMGolM0QxJTNCaiUzQyUzRGIubGVuJTNCaiUyQiUyQiklN0IlMEElMDklMDklMDljLm51bSU1QmklMkJqLTElNUQlMkIlM0RhLm51bSU1QmklNUQqYi5udW0lNUJqJTVEJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRGMubGVuJTNCaSUyQiUyQiklN0IlMEElMDklMDlpZihjLm51bSU1QmklNUQlM0UlM0QxMCklN0IlMEElMDklMDklMDljLm51bSU1QmklMkIxJTVEJTJCJTNEYy5udW0lNUJpJTVEJTJGMTAlM0IlMEElMDklMDklMDljLm51bSU1QmklNUQlMjUlM0QxMCUzQiUwQSUwOSUwOSUwOWMubGVuJTNEbWF4KGMubGVuJTJDaSUyQjEpJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTA5d2hpbGUoYy5sZW4lM0UwJTI2JTI2IWMubnVtJTVCYy5sZW4lNUQpJTIwYy5sZW4tLSUzQiUwQSUwOXJldHVybiUyMGMlM0IlMEElN0QlMEFMaW50JTIwb3BlcmF0b3IlMkYoTGludCUyMGElMkNpbnQlMjBiKSU3QiUwQSUwOUxpbnQlMjBjJTNCJTBBJTA5Yy5sZW4lM0RhLmxlbiUzQiUwQSUwOWludCUyMGQlM0QwJTNCJTBBJTA5Zm9yKGludCUyMGklM0RhLmxlbiUzQmklM0UlM0QxJTNCaS0tKSU3QiUwQSUwOSUwOWQlM0RkKjEwJTJCYS5udW0lNUJpJTVEJTNCJTNCJTBBJTA5JTA5Yy5udW0lNUJpJTVEJTNEZCUyRmIlM0IlMEElMDklMDlkJTI1JTNEYiUzQiUwQSUwOSU3RCUwQSUwOXdoaWxlKGMubGVuJTNFMCUyNiUyNiFjLm51bSU1QmMubGVuJTVEKSUyMGMubGVuLS0lM0IlMEElMDlyZXR1cm4lMjBjJTNCJTBBJTdEJTBBdm9pZCUyMHByaW50KExpbnQlMjBhKSU3QiUwQSUwOWlmKGEub3AlM0QlM0QnLScpJTIwY291dCUzQyUzQyUyMi0lMjIlM0IlMEElMDlpZihhLmxlbiUzRCUzRDApJTIwY291dCUzQyUzQzAlM0IlMEElMDllbHNlJTdCJTBBJTA5JTA5Zm9yKGludCUyMGklM0RhLmxlbiUzQmklM0UlM0QxJTNCaS0tKSU3QiUwQSUwOSUwOSUwOWNvdXQlM0MlM0NhLm51bSU1QmklNUQlM0IlMEElMDklMDklN0QlMEElMDklN0QlMEElMDljb3V0JTNDJTNDZW5kbCUzQiUwQSU3RCUwQSUwQWNvbnN0JTIwaW50JTIwbW9kJTNEMTAwMDAwMDAwNyUzQiUwQWlubGluZSUyMGludCUyMHBvdzEoaW50JTIwYSUyQ2ludCUyMHApJTdCJTBBJTA5aW50JTIwcmVzJTNEMSUzQiUwQSUwOWRvJTdCJTBBJTA5JTA5aWYocCUyNjEpJTIwcmVzJTNEcmVzKmElMjVtb2QlM0IlMEElMDklMDlhJTNEYSphJTI1bW9kJTNCcCUzRSUzRSUzRDElM0IlMEElMDklN0R3aGlsZShwKSUzQiUwQSUwOXJldHVybiUyMHJlcyUzQiUwQSU3RCUwQWlubGluZSUyMGludCUyMHBvdzIoaW50JTIwYSUyQ2ludCUyMHApJTdCJTBBJTA5aW50JTIwcmVzJTNEMSUzQiUwQSUwOWRvJTdCJTBBJTA5JTA5aWYocCUyNjEpJTIwcmVzJTNEcmVzKmElM0IlMEElMDklMDlhJTNEYSphJTNCcCUzRSUzRSUzRDElM0IlMEElMDklN0R3aGlsZShwKSUzQiUwQSUwOXJldHVybiUyMHJlcyUzQiUwQSU3RCUwQWlubGluZSUyMExpbnQlMjBwb3czKExpbnQlMjBhJTJDTGludCUyMHApJTdCJTBBJTA5TGludCUyMHJlcygxKSUzQiUwQSUwOWRvJTdCJTBBJTA5JTA5aWYocC5udW0lNUIxJTVEJTI2MSklMjByZXMlM0RyZXMqYSUzQiUwQSUwOSUwOWElM0RhKmElM0JwJTNEcCUyRjIlM0IlMEElMDklN0R3aGlsZShwLmxlbiklM0IlMEElMDlyZXR1cm4lMjByZXMlM0IlMEElN0QlMEElMEFzaWduZWQlMjBtYWluKCklN0IlMEElMDlpbnQlMjBuJTJDdHlwZSUzQiUwQSUwOWNpbiUzRSUzRW4lM0UlM0V0eXBlJTNCJTBBJTA5aWYodHlwZSUzRCUzRDEpJTdCJTBBJTA5JTA5aWYobiUyNTMlM0QlM0QwKSU3QiUwQSUwOSUwOSUwOWNvdXQlM0MlM0Nwb3cxKDMlMkNuJTJGMyklM0IlMEElMDklMDklN0QlMEElMDklMDlpZihuJTI1MyUzRCUzRDEpJTdCJTBBJTA5JTA5JTA5Y291dCUzQyUzQ3BvdzEoMyUyQ24lMkYzLTEpKjQlMjVtb2QlM0IlMEElMDklMDklN0QlMEElMDklMDlpZihuJTI1MyUzRCUzRDIpJTdCJTBBJTA5JTA5JTA5Y291dCUzQyUzQ3BvdzEoMyUyQ24lMkYzKSoyJTI1bW9kJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEZWxzZSU3QiUwQSUwOSUwOWlmKG4lM0MlM0Q1MCklN0IlMEElMDklMDklMDlpZihuJTI1MyUzRCUzRDApJTdCJTBBJTA5JTA5JTA5JTA5Y291dCUzQyUzQ3BvdzIoMyUyQ24lMkYzKSUzQiUwQSUwOSUwOSUwOSU3RCUwQSUwOSUwOSUwOWlmKG4lMjUzJTNEJTNEMSklN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDcG93MigzJTJDbiUyRjMtMSkqNCUyNW1vZCUzQiUwQSUwOSUwOSUwOSU3RCUwQSUwOSUwOSUwOWlmKG4lMjUzJTNEJTNEMiklN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDcG93MigzJTJDbiUyRjMpKjIlMjVtb2QlM0IlMEElMDklMDklMDklN0QlMEElMDklMDklN0RlbHNlJTdCJTBBJTA5JTA5JTA5aWYobiUyNTMlM0QlM0QwKSU3QiUwQSUwOSUwOSUwOSUwOXByaW50KHBvdzMoTGludCgzKSUyQ24lMkYzKSklM0IlMEElMDklMDklMDklN0QlMEElMDklMDklMDlpZihuJTI1MyUzRCUzRDEpJTdCJTBBJTA5JTA5JTA5JTA5cHJpbnQocG93MyhMaW50KDMpJTJDbiUyRjMtMSkqTGludCg0KSklM0IlMEElMDklMDklMDklN0QlMEElMDklMDklMDlpZihuJTI1MyUzRCUzRDIpJTdCJTBBJTA5JTA5JTA5JTA5cHJpbnQocG93MyhMaW50KDMpJTJDbiUyRjMpKkxpbnQoMikpJTNCJTBBJTA5JTA5JTA5JTdEJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div><div>70</div><div>71</div><div>72</div><div>73</div><div>74</div><div>75</div><div>76</div><div>77</div><div>78</div><div>79</div><div>80</div><div>81</div><div>82</div><div>83</div><div>84</div><div>85</div><div>86</div><div>87</div><div>88</div><div>89</div><div>90</div><div>91</div><div>92</div><div>93</div><div>94</div><div>95</div><div>96</div><div>97</div><div>98</div><div>99</div><div>100</div><div>101</div><div>102</div><div>103</div><div>104</div><div>105</div><div>106</div><div>107</div><div>108</div><div>109</div><div>110</div><div>111</div><div>112</div><div>113</div><div>114</div><div>115</div><div>116</div><div>117</div><div>118</div><div>119</div><div>120</div><div>121</div><div>122</div><div>123</div><div>124</div><div>125</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstring&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Lint</span>{
	<span class="hljs-type">int</span> num[<span class="hljs-number">2000</span>],len;
	<span class="hljs-type">char</span> op;
	<span class="hljs-built_in">Lint</span>(){<span class="hljs-built_in">memset</span>(num,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(num));len=<span class="hljs-number">1</span>;op=<span class="hljs-string">&#x27;+&#x27;</span>;}
	<span class="hljs-built_in">Lint</span>(<span class="hljs-type">int</span> a){
		<span class="hljs-built_in">memset</span>(num,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(num));len=<span class="hljs-number">1</span>;op=<span class="hljs-string">&#x27;+&#x27;</span>;
		<span class="hljs-type">int</span> t=<span class="hljs-number">0</span>;
		<span class="hljs-keyword">while</span>(a){
			t++;
			num[t]=a%<span class="hljs-number">10</span>;
			a/=<span class="hljs-number">10</span>;
		}
		len=t;
	}
};
Lint <span class="hljs-keyword">operator</span>*(Lint a,Lint b){
	Lint c;
	c.len=a.len+b.len<span class="hljs-number">+1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=a.len;i++){
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=b.len;j++){
			c.num[i+j<span class="hljs-number">-1</span>]+=a.num[i]*b.num[j];
		}
	}
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=c.len;i++){
		<span class="hljs-keyword">if</span>(c.num[i]&gt;=<span class="hljs-number">10</span>){
			c.num[i<span class="hljs-number">+1</span>]+=c.num[i]/<span class="hljs-number">10</span>;
			c.num[i]%=<span class="hljs-number">10</span>;
			c.len=<span class="hljs-built_in">max</span>(c.len,i<span class="hljs-number">+1</span>);
		}
	}
	<span class="hljs-keyword">while</span>(c.len&gt;<span class="hljs-number">0</span>&amp;&amp;!c.num[c.len]) c.len--;
	<span class="hljs-keyword">return</span> c;
}
Lint <span class="hljs-keyword">operator</span>/(Lint a,<span class="hljs-type">int</span> b){
	Lint c;
	c.len=a.len;
	<span class="hljs-type">int</span> d=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a.len;i&gt;=<span class="hljs-number">1</span>;i--){
		d=d*<span class="hljs-number">10</span>+a.num[i];;
		c.num[i]=d/b;
		d%=b;
	}
	<span class="hljs-keyword">while</span>(c.len&gt;<span class="hljs-number">0</span>&amp;&amp;!c.num[c.len]) c.len--;
	<span class="hljs-keyword">return</span> c;
}
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">(Lint a)</span></span>{
	<span class="hljs-keyword">if</span>(a.op==<span class="hljs-string">&#x27;-&#x27;</span>) cout&lt;&lt;<span class="hljs-string">&quot;-&quot;</span>;
	<span class="hljs-keyword">if</span>(a.len==<span class="hljs-number">0</span>) cout&lt;&lt;<span class="hljs-number">0</span>;
	<span class="hljs-keyword">else</span>{
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a.len;i&gt;=<span class="hljs-number">1</span>;i--){
			cout&lt;&lt;a.num[i];
		}
	}
	cout&lt;&lt;endl;
}

<span class="hljs-type">const</span> <span class="hljs-type">int</span> mod=<span class="hljs-number">1000000007</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">pow1</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> p)</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">do</span>{
		<span class="hljs-keyword">if</span>(p&amp;<span class="hljs-number">1</span>) res=res*a%mod;
		a=a*a%mod;p&gt;&gt;=<span class="hljs-number">1</span>;
	}<span class="hljs-keyword">while</span>(p);
	<span class="hljs-keyword">return</span> res;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">pow2</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> p)</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">do</span>{
		<span class="hljs-keyword">if</span>(p&amp;<span class="hljs-number">1</span>) res=res*a;
		a=a*a;p&gt;&gt;=<span class="hljs-number">1</span>;
	}<span class="hljs-keyword">while</span>(p);
	<span class="hljs-keyword">return</span> res;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> Lint <span class="hljs-title">pow3</span><span class="hljs-params">(Lint a,Lint p)</span></span>{
	<span class="hljs-function">Lint <span class="hljs-title">res</span><span class="hljs-params">(<span class="hljs-number">1</span>)</span></span>;
	<span class="hljs-keyword">do</span>{
		<span class="hljs-keyword">if</span>(p.num[<span class="hljs-number">1</span>]&amp;<span class="hljs-number">1</span>) res=res*a;
		a=a*a;p=p/<span class="hljs-number">2</span>;
	}<span class="hljs-keyword">while</span>(p.len);
	<span class="hljs-keyword">return</span> res;
}

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> n,type;
	cin&gt;&gt;n&gt;&gt;type;
	<span class="hljs-keyword">if</span>(type==<span class="hljs-number">1</span>){
		<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">0</span>){
			cout&lt;&lt;<span class="hljs-built_in">pow1</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span>);
		}
		<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">1</span>){
			cout&lt;&lt;<span class="hljs-built_in">pow1</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">4</span>%mod;
		}
		<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">2</span>){
			cout&lt;&lt;<span class="hljs-built_in">pow1</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span>)*<span class="hljs-number">2</span>%mod;
		}
	}<span class="hljs-keyword">else</span>{
		<span class="hljs-keyword">if</span>(n&lt;=<span class="hljs-number">50</span>){
			<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">0</span>){
				cout&lt;&lt;<span class="hljs-built_in">pow2</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span>);
			}
			<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">1</span>){
				cout&lt;&lt;<span class="hljs-built_in">pow2</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-number">4</span>%mod;
			}
			<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">2</span>){
				cout&lt;&lt;<span class="hljs-built_in">pow2</span>(<span class="hljs-number">3</span>,n/<span class="hljs-number">3</span>)*<span class="hljs-number">2</span>%mod;
			}
		}<span class="hljs-keyword">else</span>{
			<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">0</span>){
				<span class="hljs-built_in">print</span>(<span class="hljs-built_in">pow3</span>(<span class="hljs-built_in">Lint</span>(<span class="hljs-number">3</span>),n/<span class="hljs-number">3</span>));
			}
			<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">1</span>){
				<span class="hljs-built_in">print</span>(<span class="hljs-built_in">pow3</span>(<span class="hljs-built_in">Lint</span>(<span class="hljs-number">3</span>),n/<span class="hljs-number">3</span><span class="hljs-number">-1</span>)*<span class="hljs-built_in">Lint</span>(<span class="hljs-number">4</span>));
			}
			<span class="hljs-keyword">if</span>(n%<span class="hljs-number">3</span>==<span class="hljs-number">2</span>){
				<span class="hljs-built_in">print</span>(<span class="hljs-built_in">pow3</span>(<span class="hljs-built_in">Lint</span>(<span class="hljs-number">3</span>),n/<span class="hljs-number">3</span>)*<span class="hljs-built_in">Lint</span>(<span class="hljs-number">2</span>));
			}
		}
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分100pts</p>
<p>值得一提的是，高精度+快速幂，而不是一个一个乘起来可以降低时间复杂度。不过本题并没有特意去卡，放开了时限</p>
<p>快速幂时使用高精除以低精而不是高精除以高精</p>
<h3 id="ling-yi-zhong-jie-fa" tabindex="-1">另一种解法</h3>
<p>我们可以在打表的时候顺便输出最优拆分方案的方案内容，就可以发现规律</p>
<p>这样一来这道题就成了大水题了</p>
<h2 id="t3-dao-da" tabindex="-1">T3 到达</h2>
<div class="alert alert-info"><div class="icon"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"></path></svg></div><div class="message"><div class="title"> 说明</div><p>本题实际上直接搬自 CSP-J 2019 纪念品，原题链接：<a href="https://www.luogu.com.cn/problem/P5662">https://www.luogu.com.cn/problem/P5662</a></p>
</div></div>
<h2 id="t4-chun-ai" tabindex="-1">T4 纯爱</h2>
<p>题目很长，需要理解清楚题意才能着手这道题。为了防止各位看不懂题意，出题人还在题目中加了个比较全面的例子。</p>
<p>首先，对于一个询问天数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，想要让Umy 完全攻略 Merry 所用的时间大于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，由于增加的速度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>，所以好感度总共至少要增加 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub><mo>×</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">v_i\times v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>。没有产生矛盾的话，好感度增加 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 就攻略掉了。现在多出来了至少 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub><mo>×</mo><mi>v</mi><mo>−</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">v_i\times v-L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span>，显然是因为产生了矛盾。因为我们要产生最少的矛盾，我们优先触发使好感度下降最多的矛盾。特判 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub><mo>×</mo><mi>v</mi><mo>−</mo><mi>L</mi><mtext>＜</mtext><mn>0</mn></mrow><annotation encoding="application/x-tex">v_i\times v-L＜0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mord cjk_fallback">＜</span><span class="mord">0</span></span></span></span> 的情况。</p>
<h3 id="suan-fa-yi-1" tabindex="-1">算法一</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2FsZ29yaXRobSUzRSUwQSUyM2luY2x1ZGUlM0Njc3RkaW8lM0UlMEElMjNkZWZpbmUlMjBpbnQlMjBsb25nJTIwbG9uZyUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBaW5saW5lJTIwaW50JTIwcmVhZCgpJTdCJTBBJTA5aW50JTIwcmVzJTNEMCUyQ2NoJTNEZ2V0Y2hhcigpJTJDZiUzRDElM0IlMEElMDl3aGlsZSghaXNkaWdpdChjaCklMjBhbmQlMjBjaCElM0RFT0YpJTdCJTBBJTA5JTA5aWYoY2glM0QlM0QnLScpJTIwZiUzRC0xJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDl3aGlsZShpc2RpZ2l0KGNoKSklN0IlMEElMDklMDlyZXMlM0QocmVzJTNDJTNDMyklMkIocmVzJTNDJTNDMSklMkIoY2gtJzAnKSUzQiUwQSUwOSUwOWNoJTNEZ2V0Y2hhcigpJTNCJTBBJTA5JTdEJTBBJTA5cmV0dXJuJTIwcmVzKmYlM0IlMEElN0QlMEElMEFpbnQlMjBuJTJDTCUyQ3YlM0IlMEFpbnQlMjBhJTVCMjAwMDAxMCU1RCUzQiUwQSUwQXNpZ25lZCUyMG1haW4oKSU3QiUwQSUwOW4lM0RyZWFkKCklMkNMJTNEcmVhZCgpJTJDdiUzRHJlYWQoKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklN0IlMEElMDklMDlpbnQlMjB4JTNEcmVhZCgpJTJDeSUzRHJlYWQoKSUzQiUwQSUwOSUwOWElNUJpJTVEJTNEeC15JTNCJTBBJTA5JTdEJTBBJTA5c29ydChhJTJCMSUyQ2ElMkJuJTJCMSUyQyU1QiU1RChpbnQlMjB4JTJDaW50JTIweSklN0IlMEElMDklMDlyZXR1cm4lMjB4JTNFeSUzQiUwQSUwOSU3RCklM0IlMEElMDlpbnQlMjBxJTNEcmVhZCgpJTNCJTBBJTA5d2hpbGUocS0tKSU3QiUwQSUwOSUwOWludCUyMHQlM0RyZWFkKCklM0IlMEElMDklMDl0JTNEdCp2LUwlM0IlMEElMDklMDlpZiUyMCh0JTNDMCklN0IlMEElMDklMDklMDlwcmludGYoJTIyMCU1Q24lMjIpJTNCJTBBJTA5JTA5JTdEZWxzZSU3QiUwQSUwOSUwOSUwOWludCUyMGFucyUzRDAlM0IlMEElMDklMDklMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTdCJTBBJTA5JTA5JTA5JTA5dC0lM0RhJTVCaSU1RCUzQiUwQSUwOSUwOSUwOSUwOWFucyUyQiUyQiUzQiUwQSUwOSUwOSUwOSUwOWlmKHQlM0MwKSUyMGJyZWFrJTNCJTBBJTA5JTA5JTA5JTdEJTBBJTA5JTA5JTA5aWYodCUzRSUzRDApJTIwcHJpbnRmKCUyMmtkbCU1Q24lMjIpJTNCJTBBJTA5JTA5JTA5ZWxzZSUyMHByaW50ZiglMjIlMjVsbGQlNUNuJTIyJTJDYW5zKSUzQiUwQSUwOSUwOSU3RCUwQSUwOSU3RCUwQSUwOXJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

<span class="hljs-type">int</span> n,L,v;
<span class="hljs-type">int</span> a[<span class="hljs-number">2000010</span>];

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	n=<span class="hljs-built_in">read</span>(),L=<span class="hljs-built_in">read</span>(),v=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		<span class="hljs-type">int</span> x=<span class="hljs-built_in">read</span>(),y=<span class="hljs-built_in">read</span>();
		a[i]=x-y;
	}
	<span class="hljs-built_in">sort</span>(a<span class="hljs-number">+1</span>,a+n<span class="hljs-number">+1</span>,[](<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y){
		<span class="hljs-keyword">return</span> x&gt;y;
	});
	<span class="hljs-type">int</span> q=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">while</span>(q--){
		<span class="hljs-type">int</span> t=<span class="hljs-built_in">read</span>();
		t=t*v-L;
		<span class="hljs-keyword">if</span> (t&lt;<span class="hljs-number">0</span>){
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;0\n&quot;</span>);
		}<span class="hljs-keyword">else</span>{
			<span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;
			<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
				t-=a[i];
				ans++;
				<span class="hljs-keyword">if</span>(t&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;
			}
			<span class="hljs-keyword">if</span>(t&gt;=<span class="hljs-number">0</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;kdl\n&quot;</span>);
			<span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,ans);
		}
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo>+</mo><mi>q</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlogn+qn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分50pts</p>
<h3 id="suan-fa-er-1" tabindex="-1">算法二</h3>
<p>考虑进一步优化。</p>
<p>我们发现，对于每个询问，我们都是从前往后去一个一个减处理出来的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span></span></span></span> ，中间做了许多重复操作。</p>
<p>我们使用前缀和优化，令 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>+</mo><mi>s</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[i]=a[i]+s[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> 。这样，我们只需要找到第一个大于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub><mo>×</mo><mi>v</mi><mo>−</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">v_i\times v-L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mclose">]</span></span></span></span> 即可</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2FsZ29yaXRobSUzRSUwQSUyM2luY2x1ZGUlM0Njc3RkaW8lM0UlMEElMjNkZWZpbmUlMjBpbnQlMjBsb25nJTIwbG9uZyUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBaW5saW5lJTIwaW50JTIwcmVhZCgpJTdCJTBBJTA5aW50JTIwcmVzJTNEMCUyQ2NoJTNEZ2V0Y2hhcigpJTJDZiUzRDElM0IlMEElMDl3aGlsZSghaXNkaWdpdChjaCklMjBhbmQlMjBjaCElM0RFT0YpJTdCJTBBJTA5JTA5aWYoY2glM0QlM0QnLScpJTIwZiUzRC0xJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDl3aGlsZShpc2RpZ2l0KGNoKSklN0IlMEElMDklMDlyZXMlM0QocmVzJTNDJTNDMyklMkIocmVzJTNDJTNDMSklMkIoY2gtJzAnKSUzQiUwQSUwOSUwOWNoJTNEZ2V0Y2hhcigpJTNCJTBBJTA5JTdEJTBBJTA5cmV0dXJuJTIwcmVzKmYlM0IlMEElN0QlMEElMEFpbnQlMjBuJTJDTCUyQ3YlM0IlMEFpbnQlMjBhJTVCMjAwMDAxMCU1RCUyQ3MlNUIyMDAwMDEwJTVEJTNCJTBBJTBBc2lnbmVkJTIwbWFpbigpJTdCJTBBJTA5biUzRHJlYWQoKSUyQ0wlM0RyZWFkKCklMkN2JTNEcmVhZCgpJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWludCUyMHglM0RyZWFkKCklMkN5JTNEcmVhZCgpJTNCJTBBJTA5JTA5YSU1QmklNUQlM0R4LXklM0IlMEElMDklN0QlMEElMDlzb3J0KGElMkIxJTJDYSUyQm4lMkIxJTJDJTVCJTVEKGludCUyMHglMkNpbnQlMjB5KSU3QiUwQSUwOSUwOXJldHVybiUyMHglM0V5JTNCJTBBJTA5JTdEKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklN0IlMEElMDklMDlzJTVCaSU1RCUzRGElNUJpJTVEJTJCcyU1QmktMSU1RCUzQiUwQSUwOSU3RCUwQSUwOWludCUyMHElM0RyZWFkKCklM0IlMEElMDl3aGlsZShxLS0pJTdCJTBBJTA5JTA5aW50JTIwdCUzRHJlYWQoKSUzQiUwQSUwOSUwOXQlM0R0KnYtTCUzQiUwQSUwOSUwOWlmJTIwKHQlM0MwKSUwQSUwOSUwOSUwOXByaW50ZiglMjIwJTVDbiUyMiklM0IlMEElMDklMDllbHNlJTIwaWYlMjAocyU1Qm4lNUQlM0V0KSUwQSUwOSUwOSUwOXByaW50ZiglMjIlMjVsbGQlNUNuJTIyJTJDdXBwZXJfYm91bmQocyUyQjElMkNzJTJCbiUyQjElMkN0KS1zKSUzQiUwQSUwOSUwOWVsc2UlMEElMDklMDklMDlwcmludGYoJTIya2RsJTVDbiUyMiklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

<span class="hljs-type">int</span> n,L,v;
<span class="hljs-type">int</span> a[<span class="hljs-number">2000010</span>],s[<span class="hljs-number">2000010</span>];

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	n=<span class="hljs-built_in">read</span>(),L=<span class="hljs-built_in">read</span>(),v=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		<span class="hljs-type">int</span> x=<span class="hljs-built_in">read</span>(),y=<span class="hljs-built_in">read</span>();
		a[i]=x-y;
	}
	<span class="hljs-built_in">sort</span>(a<span class="hljs-number">+1</span>,a+n<span class="hljs-number">+1</span>,[](<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y){
		<span class="hljs-keyword">return</span> x&gt;y;
	});
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		s[i]=a[i]+s[i<span class="hljs-number">-1</span>];
	}
	<span class="hljs-type">int</span> q=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">while</span>(q--){
		<span class="hljs-type">int</span> t=<span class="hljs-built_in">read</span>();
		t=t*v-L;
		<span class="hljs-keyword">if</span> (t&lt;<span class="hljs-number">0</span>)
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;0\n&quot;</span>);
		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s[n]&gt;t)
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>,<span class="hljs-built_in">upper_bound</span>(s<span class="hljs-number">+1</span>,s+n<span class="hljs-number">+1</span>,t)-s);
		<span class="hljs-keyword">else</span>
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;kdl\n&quot;</span>);
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>q</mi><mo stretchy="false">)</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O((n+q)logn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">((</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分100pts</p>
<p>注意，需要开long long，否则测试点#6和#7会wa。另外本题还需要快读或者cin/cout关闭流同步，否则最后三个测试点会tle</p>
