<h2 id="ji-chu" tabindex="-1">基础</h2>
<h3 id="yuan-zhou-shuai" tabindex="-1">圆周率</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="Y29uc3QlMjBkb3VibGUlMjBwaSUzRGFjb3MoLTEpJTNCJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-type">const</span> <span class="hljs-type">double</span> pi=<span class="hljs-built_in">acos</span>(<span class="hljs-number">-1</span>);
</div></code></pre>
<h3 id="pian-cha-zhi" tabindex="-1">偏差值</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="Y29uc3QlMjBkb3VibGUlMjBlcHMlM0QxZS04JTNCJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-type">const</span> <span class="hljs-type">double</span> eps=<span class="hljs-number">1e-8</span>;
</div></code></pre>
<p>一般取 1e-8，再小可能就出问题了</p>
<h3 id="fu-hao-han-shu" tabindex="-1">符号函数</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwaW50JTIwc2duKGRvdWJsZSUyMHgpJTdCcmV0dXJuJTIwZmFicyh4KSUzQyUzRGVwcyUzRjAlM0EoeCUzRTAlM0YxJTNBLTEpJTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">sgn</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">fabs</span>(x)&lt;=eps?<span class="hljs-number">0</span>:(x&gt;<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>);}
</div></code></pre>
<h3 id="fu-dian-shu-shu-chu" tabindex="-1">浮点数输出</h3>
<p>当输出浮点数的 0 时，可能会出现输出了 <code>-0.00000...</code> 的情况，某些题目中需要特判：</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwZml0KGRvdWJsZSUyMHgpJTdCcmV0dXJuJTIwc2duKHgpJTNEJTNEMCUzRjAlM0F4JTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">fit</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">sgn</span>(x)==<span class="hljs-number">0</span>?<span class="hljs-number">0</span>:x;}
</div></code></pre>
<h3 id="jing-du-wen-ti" tabindex="-1">精度问题</h3>
<ol>
<li>能整数解决的问题就不要使用浮点数。同时注意，如果运算过程中都是整数，但还是用double类型，还是会发生精度损失</li>
<li>使用 long double 减少精度损失</li>
<li>把所有数放大 1000 倍减少精度损失</li>
</ol>
<h2 id="dian" tabindex="-1">点</h2>
<h3 id="biao-shi" tabindex="-1">表示</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="c3RydWN0JTIwUG9pbnQlN0IlMEElMjAlMjAlMjAlMjBkb3VibGUlMjB4JTJDeSUzQiUwQSUyMCUyMCUyMCUyMFBvaW50KCklN0IlN0QlMEElMjAlMjAlMjAlMjBQb2ludChkb3VibGUlMjB4JTJDZG91YmxlJTIweSklM0F4KHgpJTJDeSh5KSU3QiU3RCUwQSU3RCUzQiUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div></div><div class="code"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>{
    <span class="hljs-type">double</span> x,y;
    <span class="hljs-built_in">Point</span>(){}
    <span class="hljs-built_in">Point</span>(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y):<span class="hljs-built_in">x</span>(x),<span class="hljs-built_in">y</span>(y){}
};
</div></code></pre>
<h3 id="liang-dian-ju-li-gong-shi" tabindex="-1">两点距离公式</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwZGlzKFBvaW50JTIwYSUyQ1BvaW50JTIwYiklN0JyZXR1cm4lMjBoeXBvdChhLngtYi54JTJDYS55LWIueSklM0IlN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">dis</span><span class="hljs-params">(Point a,Point b)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">hypot</span>(a.x-b.x,a.y-b.y);}
</div></code></pre>
<h3 id="pan-deng" tabindex="-1">判等</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="Ym9vbCUyMG9wZXJhdG9yJTNEJTNEKFBvaW50JTIwYiklN0JyZXR1cm4lMjBzZ24oeC1iLngpJTNEJTNEMCUyNiUyNnNnbih5LWIueSklM0QlM0QwJTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(Point b){<span class="hljs-keyword">return</span> <span class="hljs-built_in">sgn</span>(x-b.x)==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">sgn</span>(y-b.y)==<span class="hljs-number">0</span>;}
</div></code></pre>
<h2 id="xiang-liang" tabindex="-1">向量</h2>
<h3 id="biao-shi-1" tabindex="-1">表示</h3>
<p>可以直接用点来表示向量。把所有向量视为起点为原点</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="dHlwZWRlZiUyMFBvaW50JTIwVmVjdG9yJTNCJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-keyword">typedef</span> Point Vector;
</div></code></pre>
<h3 id="xiang-liang-yun-suan" tabindex="-1">向量运算</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="UG9pbnQlMjBvcGVyYXRvciUyQihQb2ludCUyMGIpJTdCcmV0dXJuJTIwUG9pbnQoeCUyQmIueCUyQ3klMkJiLnkpJTNCJTdEJTBBUG9pbnQlMjBvcGVyYXRvci0oUG9pbnQlMjBiKSU3QnJldHVybiUyMFBvaW50KHgtYi54JTJDeS1iLnkpJTNCJTdEJTBBUG9pbnQlMjBvcGVyYXRvciooZG91YmxlJTIwayklN0JyZXR1cm4lMjBQb2ludCh4KmslMkN5KmspJTNCJTdEJTBBUG9pbnQlMjBvcGVyYXRvciUyRihkb3VibGUlMjBiKSU3QnJldHVybiUyMFBvaW50KHglMkZrJTJDeSUyRmspJTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div></div><div class="code">Point <span class="hljs-keyword">operator</span>+(Point b){<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x+b.x,y+b.y);}
Point <span class="hljs-keyword">operator</span>-(Point b){<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x-b.x,y-b.y);}
Point <span class="hljs-keyword">operator</span>*(<span class="hljs-type">double</span> k){<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x*k,y*k);}
Point <span class="hljs-keyword">operator</span>/(<span class="hljs-type">double</span> b){<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x/k,y/k);}
</div></code></pre>
<h3 id="dian-ji" tabindex="-1">点积</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="ZG91YmxlJTIwb3BlcmF0b3IqKFBvaW50JTIwYiklN0JyZXR1cm4lMjB4KmIueCUyQnkqYi55JTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-type">double</span> <span class="hljs-keyword">operator</span>*(Point b){<span class="hljs-keyword">return</span> x*b.x+y*b.y;}
</div></code></pre>
<h4 id="qiu-xiang-liang-mo-chang" tabindex="-1">求向量模长</h4>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwbGVuKFBvaW50JTIwYSklN0JyZXR1cm4lMjBzcXJ0KGEqYSklM0IlN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">len</span><span class="hljs-params">(Point a)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(a*a);}
</div></code></pre>
<p>有时开方会损失精度，可以改为求长度的平方</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwbGVuMihQb2ludCUyMGEpJTdCcmV0dXJuJTIwYSphJTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">len2</span><span class="hljs-params">(Point a)</span></span>{<span class="hljs-keyword">return</span> a*a;}
</div></code></pre>
<h4 id="jia-jiao" tabindex="-1">夹角</h4>
<p>返回的是 cos 值</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwYW5nbGUoUG9pbnQlMjBhJTJDUG9pbnQlMjBiKSU3QnJldHVybiUyMGEqYiUyRmxlbihhKSUyRmxlbihiKSUzQiU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">angle</span><span class="hljs-params">(Point a,Point b)</span></span>{<span class="hljs-keyword">return</span> a*b/<span class="hljs-built_in">len</span>(a)/<span class="hljs-built_in">len</span>(b);}
</div></code></pre>
<h3 id="cha-ji" tabindex="-1">叉积</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="ZG91YmxlJTIwb3BlcmF0b3IlNUUoUG9pbnQlMjBiKSU3QnJldHVybiUyMHgqYi55LXkqYi54JTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-type">double</span> <span class="hljs-keyword">operator</span>^(Point b){<span class="hljs-keyword">return</span> x*b.y-y*b.x;}
</div></code></pre>
<h4 id="mian-ji" tabindex="-1">面积</h4>
<p>以 a 为 公共点，b 到 c 的有向面积</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwYXJlYShQb2ludCUyMGElMkNQb2ludCUyMGIlMkNQb2ludCUyMGMpJTdCcmV0dXJuJTIwKGItYSklNUUoYy1hKSUzQiU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">(Point a,Point b,Point c)</span></span>{<span class="hljs-keyword">return</span> (b-a)^(c-a);}
</div></code></pre>
<h4 id="xiang-liang-xuan-zhuan-yu-fa-xiang-liang" tabindex="-1">向量旋转与法向量</h4>
<p>向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span> 绕原点逆时针旋转度数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>，得到向量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x&#x27;,y&#x27;)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，有如下关系：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>x</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mi>x</mi><mi>cos</mi><mo>⁡</mo><mi>θ</mi><mo>−</mo><mi>y</mi><mi>sin</mi><mo>⁡</mo><mi>θ</mi><mspace linebreak="newline"></mspace><msup><mi>y</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>=</mo><mi>x</mi><mi>sin</mi><mo>⁡</mo><mi>θ</mi><mo>+</mo><mi>y</mi><mi>cos</mi><mo>⁡</mo><mi>θ</mi></mrow><annotation encoding="application/x-tex">x&#x27;=x \cos \theta - y \sin \theta \\
y&#x27;=x \sin \theta + y \cos \theta
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8019em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.9963em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">cos</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span></span></p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwUG9pbnQlMjByb3RhdGUoUG9pbnQlMjBhJTJDZG91YmxlJTIwcmFkKSU3QnJldHVybiUyMFBvaW50KGEueCpjb3MocmFkKS1hLnkqc2luKHJhZCklMkNhLngqc2luKHJhZCklMkJhLnkqY29zKHJhZCkpJTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">rotate</span><span class="hljs-params">(Point a,<span class="hljs-type">double</span> rad)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(a.x*<span class="hljs-built_in">cos</span>(rad)-a.y*<span class="hljs-built_in">sin</span>(rad),a.x*<span class="hljs-built_in">sin</span>(rad)+a.y*<span class="hljs-built_in">cos</span>(rad));}
</div></code></pre>
<p>法向量为向量逆时针旋转 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>90</mn><mo lspace="0em" rspace="0em">∘</mo></msup></mrow><annotation encoding="application/x-tex">90^{\circ} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6741em;"></span><span class="mord">9</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6741em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∘</span></span></span></span></span></span></span></span></span></span></span></span></p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwUG9pbnQlMjBub3JtYWwoUG9pbnQlMjBhKSU3QnJldHVybiUyMFBvaW50KC1hLnklMkZsZW4oYSklMkNhLnglMkZsZW4oYSkpJTNCJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">normal</span><span class="hljs-params">(Point a)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(-a.y/<span class="hljs-built_in">len</span>(a),a.x/<span class="hljs-built_in">len</span>(a));}
</div></code></pre>
<h2 id="xian" tabindex="-1">线</h2>
<h3 id="biao-shi-2" tabindex="-1">表示</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="c3RydWN0JTIwTGluZSU3QiUwQSUyMCUyMCUyMCUyMFBvaW50JTIwcyUyQ3QlM0IlMEElMjAlMjAlMjAlMjBMaW5lKCklN0IlN0QlMEElMjAlMjAlMjAlMjBMaW5lKFBvaW50JTIwcyUyQ1BvaW50JTIwdCklM0FzKHMpJTJDdCh0KSU3QiU3RCUwQSU3RCUzQiUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div></div><div class="code"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Line</span>{
    Point s,t;
    <span class="hljs-built_in">Line</span>(){}
    <span class="hljs-built_in">Line</span>(Point s,Point t):<span class="hljs-built_in">s</span>(s),<span class="hljs-built_in">t</span>(t){}
};
</div></code></pre>
<h3 id="xie-shuai" tabindex="-1">斜率</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwc2xvcGUoUG9pbnQlMjBhJTJDUG9pbnQlMjBiKSU3QnJldHVybiUyMChhLnktYi55KSUyRihhLngtYi54KSUzQiU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">slope</span><span class="hljs-params">(Point a,Point b)</span></span>{<span class="hljs-keyword">return</span> (a.y-b.y)/(a.x-b.x);}
</div></code></pre>
<h3 id="qing-xie-jiao" tabindex="-1">倾斜角</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwYW5nbGUoTGluZSUyMGwpJTdCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwayUzRGF0YW4yKGwucy55LWwudC55JTJDbC5zLngtbC50LngpJTNCJTBBJTIwJTIwJTIwJTIwaWYoc2duKGspJTNDMCklMjBrJTJCJTNEcGklM0IlMEElMjAlMjAlMjAlMjBpZihzZ24oay1waSklM0QlM0QwKSUyMGslM0RwaSUzQiUwQSUyMCUyMCUyMCUyMHJldHVybiUyMGslM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">angle</span><span class="hljs-params">(Line l)</span></span>{
    <span class="hljs-type">double</span> k=<span class="hljs-built_in">atan2</span>(l.s.y-l.t.y,l.s.x-l.t.x);
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>(k)&lt;<span class="hljs-number">0</span>) k+=pi;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>(k-pi)==<span class="hljs-number">0</span>) k=pi;
    <span class="hljs-keyword">return</span> k;
}
</div></code></pre>
<h3 id="dian-yu-xian" tabindex="-1">点与线</h3>
<h4 id="dian-yu-zhi-xian-wei-zhi" tabindex="-1">点与直线位置</h4>
<p>点在直线左边还是右边需要看你是从直线哪个方向观察的，这里传递的线段应视为有向线段，从 s 指向 t</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwaW50JTIwcGxyKFBvaW50JTIwcCUyQ0xpbmUlMjBsKSU3QiUyRiUyRjAlM0FvbiUyMC0xJTNBbGVmdCUyMDElM0FyaWdodCUwQSUyMCUyMCUyMCUyMGludCUyMGslM0RzZ24oKGwudC1sLnMpJTVFKHAtbC5zKSklM0IlMEElMjAlMjAlMjAlMjBpZihrJTNFMCklMjByZXR1cm4lMjAtMSUzQiUwQSUyMCUyMCUyMCUyMGlmKGslM0MwKSUyMHJldHVybiUyMDElM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">plr</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-comment">//0:on -1:left 1:right</span>
    <span class="hljs-type">int</span> k=<span class="hljs-built_in">sgn</span>((l.t-l.s)^(p-l.s));
    <span class="hljs-keyword">if</span>(k&gt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">if</span>(k&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="dian-shi-fou-zai-xian-duan-shang" tabindex="-1">点是否在线段上</h4>
<p>先用叉积判断是否共线，再用点积判断是否在线段上</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwYm9vbCUyMG9uX3NlZyhQb2ludCUyMHAlMkNMaW5lJTIwbCklN0JyZXR1cm4lMjBwbHIocCUyQ2wpJTNEJTNEMCUyNiUyNnNnbigocC1sLnMpKihwLWwudCkpJTNDJTNEMCUzQiU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">on_seg</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">plr</span>(p,l)==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">sgn</span>((p-l.s)*(p-l.t))&lt;=<span class="hljs-number">0</span>;}
</div></code></pre>
<h4 id="dian-dao-zhi-xian-ju-li" tabindex="-1">点到直线距离</h4>
<p>先叉积求出构成的平行四边形面积，然后面积除以底就得到了高，即点到直线距离</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwZGlzKFBvaW50JTIwcCUyQ0xpbmUlMjBsKSU3QnJldHVybiUyMGZhYnMoKHAtbC5zKSU1RShsLnMtbC50KSUyRmRpcyhsLnMlMkNsLnQpKSUzQiU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">dis</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">fabs</span>((p-l.s)^(l.s-l.t)/<span class="hljs-built_in">dis</span>(l.s,l.t));}
</div></code></pre>
<h4 id="dian-zai-zhi-xian-shang-tou-ying" tabindex="-1">点在直线上投影</h4>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwUG9pbnQlMjBwcm9qKFBvaW50JTIwcCUyQ0xpbmUlMjBsKSU3QnJldHVybiUyMGwucyUyQihsLnQtbC5zKSoobC50LWwucykqKHAtbC5zKSUyRmxlbjIobC50LWwucyklM0IlN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">proj</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> l.s+(l.t-l.s)*(l.t-l.s)*(p-l.s)/<span class="hljs-built_in">len2</span>(l.t-l.s);}
</div></code></pre>
<h4 id="dian-guan-yu-zhi-xian-dui-cheng" tabindex="-1">点关于直线对称</h4>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwUG9pbnQlMjBzeW1tZXRyeShQb2ludCUyMHAlMkNMaW5lJTIwbCklN0JyZXR1cm4lMjAyKnByb2oocCUyQ2wpLXAlM0IlN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">symmetry</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*<span class="hljs-built_in">proj</span>(p,l)-p;}
</div></code></pre>
<h4 id="dian-dao-xian-duan-ju-li" tabindex="-1">点到线段距离</h4>
<p>过点向线段所在直线作垂线，如果垂足落在线段上，那么点到线段的距离为点到直线距离，反之，则为点到线段两端点的最小值</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwZGlzX3NlZyhQb2ludCUyMHAlMkNMaW5lJTIwbCklN0IlMEElMjAlMjAlMjAlMjBpZihzZ24oKHAtbC5zKSoobC50LWwucykpJTNDMCU3QyU3Q3NnbigocC1sLnQpKihsLnMtbC50KSklM0MwKSUyMHJldHVybiUyMG1pbihkaXMocCUyQ2wucyklMkNkaXMocCUyQ2wudCkpJTNCJTBBJTIwJTIwJTIwJTIwcmV0dXJuJTIwZGlzKHAlMkNsKSUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">dis_seg</span><span class="hljs-params">(Point p,Line l)</span></span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>((p-l.s)*(l.t-l.s))&lt;<span class="hljs-number">0</span>||<span class="hljs-built_in">sgn</span>((p-l.t)*(l.s-l.t))&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(<span class="hljs-built_in">dis</span>(p,l.s),<span class="hljs-built_in">dis</span>(p,l.t));
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">dis</span>(p,l);
}
</div></code></pre>
<h3 id="xian-yu-xian" tabindex="-1">线与线</h3>
<h4 id="liang-zhi-xian-wei-zhi-guan-xi" tabindex="-1">两直线位置关系</h4>
<p>平行、重合、相交</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwaW50JTIwbGxyKExpbmUlMjBsMSUyQ0xpbmUlMjBsMiklN0IlMkYlMkYwJTNBJUU1JUI5JUIzJUU4JUExJThDJTIwMSUzQSVFNyU5QiVCOCVFNCVCQSVBNCUyMDIlM0ElRTklODclOEQlRTUlOTAlODglMEElMjAlMjAlMjAlMjBpZihzZ24oKGwxLnMtbDEudCklNUUobDIucy1sMi50KSklM0QlM0QwKSU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGlmKHBscihsMS5zJTJDbDIpJTNEJTNEMCklMjByZXR1cm4lMjAyJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwZWxzZSUyMHJldHVybiUyMDAlM0IlMEElMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjByZXR1cm4lMjAxJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">llr</span><span class="hljs-params">(Line l1,Line l2)</span></span>{<span class="hljs-comment">//0:平行 1:相交 2:重合</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>((l<span class="hljs-number">1.</span>s-l<span class="hljs-number">1.</span>t)^(l<span class="hljs-number">2.</span>s-l<span class="hljs-number">2.</span>t))==<span class="hljs-number">0</span>){
        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">plr</span>(l<span class="hljs-number">1.</span>s,l2)==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}
</div></code></pre>
<h4 id="liang-xian-duan-wei-zhi-guan-xi" tabindex="-1">两线段位置关系</h4>
<p>返回值如下：</p>
<ol start="0">
<li>不相交</li>
<li>非规范相交：交点在端点上</li>
<li>规范相交：交点在线段内部</li>
</ol>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwaW50JTIwc3NyKExpbmUlMjBsMSUyQ0xpbmUlMjBsMiklN0IlMkYlMkYwJTNBJUU0JUI4JThEJUU3JTlCJUI4JUU0JUJBJUE0JTIwMSUzQSVFOSU5RCU5RSVFOCVBNyU4NCVFOCU4QyU4MyVFNyU5QiVCOCVFNCVCQSVBNCUyMDIlM0ElRTglQTclODQlRTglOEMlODMlRTclOUIlQjglRTQlQkElQTQlMEElMjAlMjAlMjAlMjBpbnQlMjBjMSUzRHBscihsMS5zJTJDbDIpJTJDYzIlM0RwbHIobDEudCUyQ2wyKSUzQiUwQSUyMCUyMCUyMCUyMGludCUyMGQxJTNEcGxyKGwyLnMlMkNsMSklMkNkMiUzRHBscihsMi50JTJDbDEpJTNCJTBBJTIwJTIwJTIwJTIwaWYoYzEqYzIlM0MwJTI2JTI2ZDEqZDIlM0MwKSUyMHJldHVybiUyMDIlM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjAoYzElM0QlM0QwJTI2JTI2b25fc2VnKGwxLnMlMkNsMikpJTdDJTdDKGMyJTNEJTNEMCUyNiUyNm9uX3NlZyhsMS50JTJDbDIpKSU3QyU3QyhkMSUzRCUzRDAlMjYlMjZvbl9zZWcobDIucyUyQ2wxKSklN0MlN0MoZDIlM0QlM0QwJTI2JTI2b25fc2VnKGwyLnQlMkNsMSkpJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">ssr</span><span class="hljs-params">(Line l1,Line l2)</span></span>{<span class="hljs-comment">//0:不相交 1:非规范相交 2:规范相交</span>
    <span class="hljs-type">int</span> c1=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">1.</span>s,l2),c2=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">1.</span>t,l2);
    <span class="hljs-type">int</span> d1=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">2.</span>s,l1),d2=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">2.</span>t,l1);
    <span class="hljs-keyword">if</span>(c1*c2&lt;<span class="hljs-number">0</span>&amp;&amp;d1*d2&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> (c1==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">1.</span>s,l2))||(c2==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">1.</span>t,l2))||(d1==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">2.</span>s,l1))||(d2==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">2.</span>t,l1));
}
</div></code></pre>
<h4 id="xian-duan-he-zhi-xian-guan-xi" tabindex="-1">线段和直线关系</h4>
<p>返回值：</p>
<ol start="0">
<li>
<p>不相交</p>
</li>
<li>
<p>非规范相交</p>
</li>
<li>
<p>规范相交</p>
</li>
<li>
<p>重合</p>
</li>
</ol>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwaW50JTIwc2xyKExpbmUlMjBzJTJDTGluZSUyMGwpJTdCJTJGJTJGMCUzQSVFNCVCOCU4RCVFNyU5QiVCOCVFNCVCQSVBNCUyMDElM0ElRTklOUQlOUUlRTglQTclODQlRTglOEMlODMlRTclOUIlQjglRTQlQkElQTQlMjAyJTNBJUU4JUE3JTg0JUU4JThDJTgzJUU3JTlCJUI4JUU0JUJBJUE0JTIwMyUzQSVFOSU4NyU4RCVFNSU5MCU4OCUwQSUyMCUyMCUyMCUyMGludCUyMGQxJTNEcGxyKHMucyUyQ2wpJTJDZDIlM0RwbHIocy50JTJDbCklM0IlMEElMjAlMjAlMjAlMjBpZihkMSUzRCUzRDAlMjYlMjZkMiUzRCUzRDApJTIwcmV0dXJuJTIwMyUzQiUwQSUyMCUyMCUyMCUyMGlmKGQxKmQyJTNEJTNEMCklMjByZXR1cm4lMjAxJTNCJTBBJTIwJTIwJTIwJTIwaWYoZDEqZDIlM0MwKSUyMHJldHVybiUyMDIlM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">slr</span><span class="hljs-params">(Line s,Line l)</span></span>{<span class="hljs-comment">//0:不相交 1:非规范相交 2:规范相交 3:重合</span>
    <span class="hljs-type">int</span> d1=<span class="hljs-built_in">plr</span>(s.s,l),d2=<span class="hljs-built_in">plr</span>(s.t,l);
    <span class="hljs-keyword">if</span>(d1==<span class="hljs-number">0</span>&amp;&amp;d2==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;
    <span class="hljs-keyword">if</span>(d1*d2==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span>(d1*d2&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h4 id="liang-zhi-xian-jiao-dian" tabindex="-1">两直线交点</h4>
<p>调用该函数前应确保两条直线存在交点</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwUG9pbnQlMjBjcChMaW5lJTIwbDElMkNMaW5lJTIwbDIpJTdCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwczElM0QobDEudC1sMS5zKSU1RShsMi5zLWwxLnMpJTNCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwczIlM0QobDEudC1sMS5zKSU1RShsMi50LWwxLnMpJTNCJTBBJTIwJTIwJTIwJTIwcmV0dXJuJTIwKGwyLnMqczItbDIudCpzMSklMkYoczItczEpJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">cp</span><span class="hljs-params">(Line l1,Line l2)</span></span>{
    <span class="hljs-type">double</span> s1=(l<span class="hljs-number">1.</span>t-l<span class="hljs-number">1.</span>s)^(l<span class="hljs-number">2.</span>s-l<span class="hljs-number">1.</span>s);
    <span class="hljs-type">double</span> s2=(l<span class="hljs-number">1.</span>t-l<span class="hljs-number">1.</span>s)^(l<span class="hljs-number">2.</span>t-l<span class="hljs-number">1.</span>s);
    <span class="hljs-keyword">return</span> (l<span class="hljs-number">2.</span>s*s2-l<span class="hljs-number">2.</span>t*s1)/(s2-s1);
}
</div></code></pre>
<h4 id="xian-duan-yu-xian-duan-ju-li" tabindex="-1">线段与线段距离</h4>
<p>设 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">P_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 构成线段 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">L_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">P_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 构成线段 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">L_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的距离为：</p>
<ul>
<li>如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">L_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 相交，则为 0</li>
<li>反之，则为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">P_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">P_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">L_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">P_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">L_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mn>3</mn></msub></mrow><annotation encoding="application/x-tex">P_3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">L_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> ，四者距离的最小值</li>
</ul>
<h2 id="ji-chu-dian-xian-mo-ban-hui-zong" tabindex="-1">基础点线模板汇总</h2>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="Y29uc3QlMjBkb3VibGUlMjBwaSUzRGFjb3MoLTEpJTNCJTBBY29uc3QlMjBkb3VibGUlMjBlcHMlM0QxZS04JTNCJTBBaW5saW5lJTIwaW50JTIwc2duKGRvdWJsZSUyMHgpJTdCcmV0dXJuJTIwZmFicyh4KSUzQyUzRGVwcyUzRjAlM0EoeCUzRTAlM0YxJTNBLTEpJTNCJTdEJTBBaW5saW5lJTIwZG91YmxlJTIwZml0KGRvdWJsZSUyMHgpJTdCcmV0dXJuJTIwc2duKHgpJTNEJTNEMCUzRjAlM0F4JTNCJTdEJTBBc3RydWN0JTIwUG9pbnQlN0IlMEElMjAlMjAlMjAlMjBkb3VibGUlMjB4JTJDeSUzQiUwQSUyMCUyMCUyMCUyMFBvaW50KCklN0IlN0QlMEElMjAlMjAlMjAlMjBQb2ludChkb3VibGUlMjB4JTJDZG91YmxlJTIweSklM0F4KHgpJTJDeSh5KSU3QiU3RCUwQSUyMCUyMCUyMCUyMFBvaW50JTIwb3BlcmF0b3IlMkIoY29uc3QlMjBQb2ludCUyNiUyMGIpJTIwY29uc3QlMjAlN0JyZXR1cm4lMjBQb2ludCh4JTIwJTJCJTIwYi54JTJDJTIweSUyMCUyQiUyMGIueSklM0IlN0QlMEElMjAlMjAlMjAlMjBQb2ludCUyMG9wZXJhdG9yLShjb25zdCUyMFBvaW50JTI2JTIwYiklMjBjb25zdCUyMCU3QnJldHVybiUyMFBvaW50KHglMjAtJTIwYi54JTJDJTIweSUyMC0lMjBiLnkpJTNCJTdEJTBBJTIwJTIwJTIwJTIwUG9pbnQlMjBvcGVyYXRvciooZG91YmxlJTIwayklMjBjb25zdCUyMCU3QnJldHVybiUyMFBvaW50KHglMjAqJTIwayUyQyUyMHklMjAqJTIwayklM0IlN0QlMEElMjAlMjAlMjAlMjBkb3VibGUlMjBvcGVyYXRvciooY29uc3QlMjBQb2ludCUyNiUyMGIpJTIwY29uc3QlMjAlN0JyZXR1cm4lMjB4JTIwKiUyMGIueCUyMCUyQiUyMHklMjAqJTIwYi55JTNCJTdEJTBBJTIwJTIwJTIwJTIwUG9pbnQlMjBvcGVyYXRvciUyRihkb3VibGUlMjBrKSUyMGNvbnN0JTIwJTdCcmV0dXJuJTIwUG9pbnQoeCUyMCUyRiUyMGslMkMlMjB5JTIwJTJGJTIwayklM0IlN0QlMEElMjAlMjAlMjAlMjBkb3VibGUlMjBvcGVyYXRvciU1RShjb25zdCUyMFBvaW50JTI2JTIwYiklMjBjb25zdCUyMCU3QnJldHVybiUyMHglMjAqJTIwYi55JTIwLSUyMHklMjAqJTIwYi54JTNCJTdEJTBBJTdEJTNCJTBBdHlwZWRlZiUyMFBvaW50JTIwVmVjdG9yJTNCJTBBc3RydWN0JTIwTGluZSU3QiUwQSUyMCUyMCUyMCUyMFBvaW50JTIwcyUyQ3QlM0IlMEElMjAlMjAlMjAlMjBMaW5lKCklN0IlN0QlMEElMjAlMjAlMjAlMjBMaW5lKFBvaW50JTIwcyUyQ1BvaW50JTIwdCklM0FzKHMpJTJDdCh0KSU3QiU3RCUwQSU3RCUzQiUwQWlubGluZSUyMGRvdWJsZSUyMGRpcyhQb2ludCUyMGElMkNQb2ludCUyMGIpJTdCcmV0dXJuJTIwaHlwb3QoYS54LWIueCUyQ2EueS1iLnkpJTNCJTdEJTBBaW5saW5lJTIwZG91YmxlJTIwZGlzKFBvaW50JTIwcCUyQ0xpbmUlMjBsKSU3QnJldHVybiUyMGZhYnMoKHAtbC5zKSU1RShsLnMtbC50KSUyRmRpcyhsLnMlMkNsLnQpKSUzQiU3RCUwQWlubGluZSUyMGRvdWJsZSUyMGxlbihQb2ludCUyMGEpJTdCcmV0dXJuJTIwc3FydChhKmEpJTNCJTdEJTBBaW5saW5lJTIwZG91YmxlJTIwbGVuMihQb2ludCUyMGEpJTdCcmV0dXJuJTIwYSphJTNCJTdEJTBBaW5saW5lJTIwZG91YmxlJTIwc2xvcGUoUG9pbnQlMjBhJTJDUG9pbnQlMjBiKSU3QnJldHVybiUyMChhLnktYi55KSUyRihhLngtYi54KSUzQiU3RCUwQWlubGluZSUyMGRvdWJsZSUyMGFuZ2xlKFBvaW50JTIwYSUyQ1BvaW50JTIwYiklN0JyZXR1cm4lMjBhKmIlMkZsZW4oYSklMkZsZW4oYiklM0IlN0QlMEFpbmxpbmUlMjBkb3VibGUlMjBhbmdsZShMaW5lJTIwbCklN0IlMEElMjAlMjAlMjAlMjBkb3VibGUlMjBrJTNEYXRhbjIobC5zLnktbC50LnklMkNsLnMueC1sLnQueCklM0IlMEElMjAlMjAlMjAlMjBpZihzZ24oayklM0MwKSUyMGslMkIlM0RwaSUzQiUwQSUyMCUyMCUyMCUyMGlmKHNnbihrLXBpKSUzRCUzRDApJTIwayUzRHBpJTNCJTBBJTIwJTIwJTIwJTIwcmV0dXJuJTIwayUzQiUwQSU3RCUwQWlubGluZSUyMGRvdWJsZSUyMGFyZWEoUG9pbnQlMjBhJTJDUG9pbnQlMjBiJTJDUG9pbnQlMjBjKSU3QnJldHVybiUyMChiLWEpJTVFKGMtYSklM0IlN0QlMkYlMkZhJUU0JUI4JUJBJUU1JTg1JUFDJUU1JTg1JUIxJUU3JTgyJUI5JUVGJUJDJThDYiVFNSU4OCVCMGMlRTYlOUMlODklRTUlOTAlOTElRTklOUQlQTIlRTclQTclQUYlMEFpbmxpbmUlMjBQb2ludCUyMHJvdGF0ZShQb2ludCUyMGElMkNkb3VibGUlMjByYWQpJTdCcmV0dXJuJTIwUG9pbnQoYS54KmNvcyhyYWQpLWEueSpzaW4ocmFkKSUyQ2EueCpzaW4ocmFkKSUyQmEueSpjb3MocmFkKSklM0IlN0QlMEFpbmxpbmUlMjBQb2ludCUyMG5vcm1hbChQb2ludCUyMGEpJTdCcmV0dXJuJTIwUG9pbnQoLWEueSUyRmxlbihhKSUyQ2EueCUyRmxlbihhKSklM0IlN0QlMkYlMkYlRTklODAlODYlRTYlOTclQjYlRTklOTIlODglRTYlOTclOEIlRTglQkQlQUM5MCVFNSVCQSVBNiVFNyU5QSU4NCVFNiVCMyU5NSVFNSU5MCU5MSVFOSU4NyU4RiUwQWlubGluZSUyMGludCUyMHBscihQb2ludCUyMHAlMkNMaW5lJTIwbCklN0IlMkYlMkYwJTNBb24lMjAtMSUzQWxlZnQlMjAxJTNBcmlnaHQlMEElMjAlMjAlMjAlMjBpbnQlMjBrJTNEc2duKChsLnQtbC5zKSU1RShwLWwucykpJTNCJTBBJTIwJTIwJTIwJTIwaWYoayUzRTApJTIwcmV0dXJuJTIwLTElM0IlMEElMjAlMjAlMjAlMjBpZihrJTNDMCklMjByZXR1cm4lMjAxJTNCJTBBJTIwJTIwJTIwJTIwcmV0dXJuJTIwMCUzQiUwQSU3RCUwQWlubGluZSUyMGJvb2wlMjBvbl9zZWcoUG9pbnQlMjBwJTJDTGluZSUyMGwpJTdCcmV0dXJuJTIwcGxyKHAlMkNsKSUzRCUzRDAlMjYlMjZzZ24oKHAtbC5zKSoocC1sLnQpKSUzQyUzRDAlM0IlN0QlMEFpbmxpbmUlMjBQb2ludCUyMHByb2ooUG9pbnQlMjBwJTJDTGluZSUyMGwpJTdCcmV0dXJuJTIwbC5zJTJCKGwudC1sLnMpKigobC50LWwucykqKHAtbC5zKSklMkZsZW4yKGwudC1sLnMpJTNCJTdEJTBBaW5saW5lJTIwUG9pbnQlMjBzeW1tZXRyeShQb2ludCUyMHAlMkNMaW5lJTIwbCklN0JyZXR1cm4lMjBwcm9qKHAlMkNsKSoyLXAlM0IlN0QlMEFpbmxpbmUlMjBkb3VibGUlMjBkaXNfc2VnKFBvaW50JTIwcCUyQ0xpbmUlMjBsKSU3QiUwQSUyMCUyMCUyMCUyMGlmKHNnbigocC1sLnMpKihsLnQtbC5zKSklM0MwJTdDJTdDc2duKChwLWwudCkqKGwucy1sLnQpKSUzQzApJTIwcmV0dXJuJTIwbWluKGRpcyhwJTJDbC5zKSUyQ2RpcyhwJTJDbC50KSklM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjBkaXMocCUyQ2wpJTNCJTBBJTdEJTBBaW5saW5lJTIwaW50JTIwbGxyKExpbmUlMjBsMSUyQ0xpbmUlMjBsMiklN0IlMkYlMkYwJTNBJUU1JUI5JUIzJUU4JUExJThDJTIwMSUzQSVFNyU5QiVCOCVFNCVCQSVBNCUyMDIlM0ElRTklODclOEQlRTUlOTAlODglMEElMjAlMjAlMjAlMjBpZihzZ24oKGwxLnMtbDEudCklNUUobDIucy1sMi50KSklM0QlM0QwKSU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGlmKHBscihsMS5zJTJDbDIpJTNEJTNEMCklMjByZXR1cm4lMjAyJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwZWxzZSUyMHJldHVybiUyMDAlM0IlMEElMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjByZXR1cm4lMjAxJTNCJTBBJTdEJTBBaW5saW5lJTIwaW50JTIwc3NyKExpbmUlMjBsMSUyQ0xpbmUlMjBsMiklN0IlMkYlMkYwJTNBJUU0JUI4JThEJUU3JTlCJUI4JUU0JUJBJUE0JTIwMSUzQSVFOSU5RCU5RSVFOCVBNyU4NCVFOCU4QyU4MyVFNyU5QiVCOCVFNCVCQSVBNCUyMDIlM0ElRTglQTclODQlRTglOEMlODMlRTclOUIlQjglRTQlQkElQTQlMEElMjAlMjAlMjAlMjBpbnQlMjBjMSUzRHBscihsMS5zJTJDbDIpJTJDYzIlM0RwbHIobDEudCUyQ2wyKSUzQiUwQSUyMCUyMCUyMCUyMGludCUyMGQxJTNEcGxyKGwyLnMlMkNsMSklMkNkMiUzRHBscihsMi50JTJDbDEpJTNCJTBBJTIwJTIwJTIwJTIwaWYoYzEqYzIlM0MwJTI2JTI2ZDEqZDIlM0MwKSUyMHJldHVybiUyMDIlM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjAoYzElM0QlM0QwJTI2JTI2b25fc2VnKGwxLnMlMkNsMikpJTdDJTdDKGMyJTNEJTNEMCUyNiUyNm9uX3NlZyhsMS50JTJDbDIpKSU3QyU3QyhkMSUzRCUzRDAlMjYlMjZvbl9zZWcobDIucyUyQ2wxKSklN0MlN0MoZDIlM0QlM0QwJTI2JTI2b25fc2VnKGwyLnQlMkNsMSkpJTNCJTBBJTdEJTBBaW5saW5lJTIwaW50JTIwc2xyKExpbmUlMjBzJTJDTGluZSUyMGwpJTdCJTJGJTJGMCUzQSVFNCVCOCU4RCVFNyU5QiVCOCVFNCVCQSVBNCUyMDElM0ElRTklOUQlOUUlRTglQTclODQlRTglOEMlODMlRTclOUIlQjglRTQlQkElQTQlMjAyJTNBJUU4JUE3JTg0JUU4JThDJTgzJUU3JTlCJUI4JUU0JUJBJUE0JTIwMyUzQSVFOSU4NyU4RCVFNSU5MCU4OCUwQSUyMCUyMCUyMCUyMGludCUyMGQxJTNEcGxyKHMucyUyQ2wpJTJDZDIlM0RwbHIocy50JTJDbCklM0IlMEElMjAlMjAlMjAlMjBpZihkMSUzRCUzRDAlMjYlMjZkMiUzRCUzRDApJTIwcmV0dXJuJTIwMyUzQiUwQSUyMCUyMCUyMCUyMGlmKGQxKmQyJTNEJTNEMCklMjByZXR1cm4lMjAxJTNCJTBBJTIwJTIwJTIwJTIwaWYoZDEqZDIlM0MwKSUyMHJldHVybiUyMDIlM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjAwJTNCJTBBJTdEJTBBaW5saW5lJTIwUG9pbnQlMjBjcChMaW5lJTIwbDElMkNMaW5lJTIwbDIpJTdCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwczElM0QobDEudC1sMS5zKSU1RShsMi5zLWwxLnMpJTNCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwczIlM0QobDEudC1sMS5zKSU1RShsMi50LWwxLnMpJTNCJTBBJTIwJTIwJTIwJTIwcmV0dXJuJTIwKGwyLnMqczItbDIudCpzMSklMkYoczItczEpJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div><div>70</div><div>71</div><div>72</div><div>73</div><div>74</div></div><div class="code"><span class="hljs-type">const</span> <span class="hljs-type">double</span> pi=<span class="hljs-built_in">acos</span>(<span class="hljs-number">-1</span>);
<span class="hljs-type">const</span> <span class="hljs-type">double</span> eps=<span class="hljs-number">1e-8</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">sgn</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">fabs</span>(x)&lt;=eps?<span class="hljs-number">0</span>:(x&gt;<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:<span class="hljs-number">-1</span>);}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">fit</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">sgn</span>(x)==<span class="hljs-number">0</span>?<span class="hljs-number">0</span>:x;}
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Point</span>{
    <span class="hljs-type">double</span> x,y;
    <span class="hljs-built_in">Point</span>(){}
    <span class="hljs-built_in">Point</span>(<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y):<span class="hljs-built_in">x</span>(x),<span class="hljs-built_in">y</span>(y){}
    Point <span class="hljs-keyword">operator</span>+(<span class="hljs-type">const</span> Point&amp; b) <span class="hljs-type">const</span> {<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x + b.x, y + b.y);}
    Point <span class="hljs-keyword">operator</span>-(<span class="hljs-type">const</span> Point&amp; b) <span class="hljs-type">const</span> {<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x - b.x, y - b.y);}
    Point <span class="hljs-keyword">operator</span>*(<span class="hljs-type">double</span> k) <span class="hljs-type">const</span> {<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x * k, y * k);}
    <span class="hljs-type">double</span> <span class="hljs-keyword">operator</span>*(<span class="hljs-type">const</span> Point&amp; b) <span class="hljs-type">const</span> {<span class="hljs-keyword">return</span> x * b.x + y * b.y;}
    Point <span class="hljs-keyword">operator</span>/(<span class="hljs-type">double</span> k) <span class="hljs-type">const</span> {<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(x / k, y / k);}
    <span class="hljs-type">double</span> <span class="hljs-keyword">operator</span>^(<span class="hljs-type">const</span> Point&amp; b) <span class="hljs-type">const</span> {<span class="hljs-keyword">return</span> x * b.y - y * b.x;}
};
<span class="hljs-keyword">typedef</span> Point Vector;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Line</span>{
    Point s,t;
    <span class="hljs-built_in">Line</span>(){}
    <span class="hljs-built_in">Line</span>(Point s,Point t):<span class="hljs-built_in">s</span>(s),<span class="hljs-built_in">t</span>(t){}
};
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">dis</span><span class="hljs-params">(Point a,Point b)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">hypot</span>(a.x-b.x,a.y-b.y);}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">dis</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">fabs</span>((p-l.s)^(l.s-l.t)/<span class="hljs-built_in">dis</span>(l.s,l.t));}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">len</span><span class="hljs-params">(Point a)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">sqrt</span>(a*a);}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">len2</span><span class="hljs-params">(Point a)</span></span>{<span class="hljs-keyword">return</span> a*a;}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">slope</span><span class="hljs-params">(Point a,Point b)</span></span>{<span class="hljs-keyword">return</span> (a.y-b.y)/(a.x-b.x);}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">angle</span><span class="hljs-params">(Point a,Point b)</span></span>{<span class="hljs-keyword">return</span> a*b/<span class="hljs-built_in">len</span>(a)/<span class="hljs-built_in">len</span>(b);}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">angle</span><span class="hljs-params">(Line l)</span></span>{
    <span class="hljs-type">double</span> k=<span class="hljs-built_in">atan2</span>(l.s.y-l.t.y,l.s.x-l.t.x);
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>(k)&lt;<span class="hljs-number">0</span>) k+=pi;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>(k-pi)==<span class="hljs-number">0</span>) k=pi;
    <span class="hljs-keyword">return</span> k;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">(Point a,Point b,Point c)</span></span>{<span class="hljs-keyword">return</span> (b-a)^(c-a);}<span class="hljs-comment">//a为公共点，b到c有向面积</span>
<span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">rotate</span><span class="hljs-params">(Point a,<span class="hljs-type">double</span> rad)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(a.x*<span class="hljs-built_in">cos</span>(rad)-a.y*<span class="hljs-built_in">sin</span>(rad),a.x*<span class="hljs-built_in">sin</span>(rad)+a.y*<span class="hljs-built_in">cos</span>(rad));}
<span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">normal</span><span class="hljs-params">(Point a)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">Point</span>(-a.y/<span class="hljs-built_in">len</span>(a),a.x/<span class="hljs-built_in">len</span>(a));}<span class="hljs-comment">//逆时针旋转90度的法向量</span>
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">plr</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-comment">//0:on -1:left 1:right</span>
    <span class="hljs-type">int</span> k=<span class="hljs-built_in">sgn</span>((l.t-l.s)^(p-l.s));
    <span class="hljs-keyword">if</span>(k&gt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">if</span>(k&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">on_seg</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">plr</span>(p,l)==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">sgn</span>((p-l.s)*(p-l.t))&lt;=<span class="hljs-number">0</span>;}
<span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">proj</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> l.s+(l.t-l.s)*((l.t-l.s)*(p-l.s))/<span class="hljs-built_in">len2</span>(l.t-l.s);}
<span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">symmetry</span><span class="hljs-params">(Point p,Line l)</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">proj</span>(p,l)*<span class="hljs-number">2</span>-p;}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">dis_seg</span><span class="hljs-params">(Point p,Line l)</span></span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>((p-l.s)*(l.t-l.s))&lt;<span class="hljs-number">0</span>||<span class="hljs-built_in">sgn</span>((p-l.t)*(l.s-l.t))&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">min</span>(<span class="hljs-built_in">dis</span>(p,l.s),<span class="hljs-built_in">dis</span>(p,l.t));
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">dis</span>(p,l);
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">llr</span><span class="hljs-params">(Line l1,Line l2)</span></span>{<span class="hljs-comment">//0:平行 1:相交 2:重合</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>((l<span class="hljs-number">1.</span>s-l<span class="hljs-number">1.</span>t)^(l<span class="hljs-number">2.</span>s-l<span class="hljs-number">2.</span>t))==<span class="hljs-number">0</span>){
        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">plr</span>(l<span class="hljs-number">1.</span>s,l2)==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">ssr</span><span class="hljs-params">(Line l1,Line l2)</span></span>{<span class="hljs-comment">//0:不相交 1:非规范相交 2:规范相交</span>
    <span class="hljs-type">int</span> c1=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">1.</span>s,l2),c2=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">1.</span>t,l2);
    <span class="hljs-type">int</span> d1=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">2.</span>s,l1),d2=<span class="hljs-built_in">plr</span>(l<span class="hljs-number">2.</span>t,l1);
    <span class="hljs-keyword">if</span>(c1*c2&lt;<span class="hljs-number">0</span>&amp;&amp;d1*d2&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> (c1==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">1.</span>s,l2))||(c2==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">1.</span>t,l2))||(d1==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">2.</span>s,l1))||(d2==<span class="hljs-number">0</span>&amp;&amp;<span class="hljs-built_in">on_seg</span>(l<span class="hljs-number">2.</span>t,l1));
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">slr</span><span class="hljs-params">(Line s,Line l)</span></span>{<span class="hljs-comment">//0:不相交 1:非规范相交 2:规范相交 3:重合</span>
    <span class="hljs-type">int</span> d1=<span class="hljs-built_in">plr</span>(s.s,l),d2=<span class="hljs-built_in">plr</span>(s.t,l);
    <span class="hljs-keyword">if</span>(d1==<span class="hljs-number">0</span>&amp;&amp;d2==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>;
    <span class="hljs-keyword">if</span>(d1*d2==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">if</span>(d1*d2&lt;<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">cp</span><span class="hljs-params">(Line l1,Line l2)</span></span>{
    <span class="hljs-type">double</span> s1=(l<span class="hljs-number">1.</span>t-l<span class="hljs-number">1.</span>s)^(l<span class="hljs-number">2.</span>s-l<span class="hljs-number">1.</span>s);
    <span class="hljs-type">double</span> s2=(l<span class="hljs-number">1.</span>t-l<span class="hljs-number">1.</span>s)^(l<span class="hljs-number">2.</span>t-l<span class="hljs-number">1.</span>s);
    <span class="hljs-keyword">return</span> (l<span class="hljs-number">2.</span>s*s2-l<span class="hljs-number">2.</span>t*s1)/(s2-s1);
}
</div></code></pre>
<h2 id="duo-bian-xing" tabindex="-1">多边形</h2>
<h3 id="biao-shi-3" tabindex="-1">表示</h3>
<p>一般用下标从 0 开始的 Point 数组表示</p>
<h3 id="duo-bian-xing-mian-ji" tabindex="-1">多边形面积</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwZG91YmxlJTIwYXJlYShQb2ludCUyMCpwZyUyQ2ludCUyMG4pJTdCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwcmVzJTNEMCUzQiUwQSUyMCUyMCUyMCUyMGZvcihpbnQlMjBpJTNEMCUzQmklM0NuJTNCaSUyQiUyQiklMjByZXMlMkIlM0RhcmVhKFBvaW50KDAlMkMwKSUyQ3BnJTVCaSU1RCUyQ3BnJTVCKGklMkIxKSUyNW4lNUQpJTJGMiUzQiUwQSUyMCUyMCUyMCUyMHJldHVybiUyMHJlcyUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">double</span> <span class="hljs-title">area</span><span class="hljs-params">(Point *pg,<span class="hljs-type">int</span> n)</span></span>{
    <span class="hljs-type">double</span> res=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) res+=<span class="hljs-built_in">area</span>(<span class="hljs-built_in">Point</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),pg[i],pg[(i<span class="hljs-number">+1</span>)%n])/<span class="hljs-number">2</span>;
    <span class="hljs-keyword">return</span> res;
}
</div></code></pre>
<h3 id="duo-bian-xing-zhong-xin" tabindex="-1">多边形重心</h3>
<p>将多边形三角剖分，计算出每个三角形的重心，然后再以三角形有向面积为权重加权平均</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwUG9pbnQlMjBwb2x5Z29uX2NlbnRlcihQb2ludCUyMCpwZyUyQ2ludCUyMG4pJTdCJTBBJTIwJTIwJTIwJTIwUG9pbnQlMjBhbnMoMCUyQzApJTNCJTBBJTIwJTIwJTIwJTIwaWYoYXJlYShwZyUyQ24pJTNEJTNEMCklMjByZXR1cm4lMjBhbnMlM0IlMEElMjAlMjAlMjAlMjBmb3IoaW50JTIwaSUzRDAlM0JpJTNDbiUzQmklMkIlMkIpJTIwYW5zJTNEYW5zJTJCKHBnJTVCaSU1RCUyQnBnJTVCKGklMkIxKSUyNW4lNUQpKmFyZWEoUG9pbnQoMCUyQzApJTJDcGclNUJpJTVEJTJDcGclNUIoaSUyQjEpJTI1biU1RCklM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjBhbnMlMkZhcmVhKHBnJTJDbiklMkY2JTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> Point <span class="hljs-title">polygon_center</span><span class="hljs-params">(Point *pg,<span class="hljs-type">int</span> n)</span></span>{
    <span class="hljs-function">Point <span class="hljs-title">ans</span><span class="hljs-params">(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)</span></span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">area</span>(pg,n)==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> ans;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) ans=ans+(pg[i]+pg[(i<span class="hljs-number">+1</span>)%n])*<span class="hljs-built_in">area</span>(<span class="hljs-built_in">Point</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),pg[i],pg[(i<span class="hljs-number">+1</span>)%n]);
    <span class="hljs-keyword">return</span> ans/<span class="hljs-built_in">area</span>(pg,n)/<span class="hljs-number">6</span>;
}
</div></code></pre>
<h3 id="ji-jiao-xu" tabindex="-1">极角序</h3>
<p>三四象限的点极角序最小，排序后是从三四象限的点（如果有）逆时针排序</p>
<p>代码是以原点为基点求的极角序，如果要以其他的点为基点，则需要把所有的点都减去那个基点</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwYm9vbCUyMHBjbXAoUG9pbnQlMjBhJTJDUG9pbnQlMjBiKSU3QiUwQSUyMCUyMCUyMCUyMGF1dG8lMjBmJTNEJTVCJTVEKFBvaW50JTIwcCklN0JyZXR1cm4lMjBwLnklM0UwJTdDJTdDKHAueSUzRCUzRDAlMjYlMjZwLnglM0MwKSUzQiU3RCUzQiUwQSUyMCUyMCUyMCUyMGlmKGYoYSkhJTNEZihiKSklMjByZXR1cm4lMjBmKGEpJTNDZihiKSUzQiUwQSUyMCUyMCUyMCUyMGVsc2UlMjBpZigoYSU1RWIpJTNEJTNEMCklMjByZXR1cm4lMjBhLnglM0NiLnglM0IlMEElMjAlMjAlMjAlMjBlbHNlJTIwcmV0dXJuJTIwKGElNUViKSUzRTAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">pcmp</span><span class="hljs-params">(Point a,Point b)</span></span>{
    <span class="hljs-keyword">auto</span> f=[](Point p){<span class="hljs-keyword">return</span> p.y&gt;<span class="hljs-number">0</span>||(p.y==<span class="hljs-number">0</span>&amp;&amp;p.x&lt;<span class="hljs-number">0</span>);};
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">f</span>(a)!=<span class="hljs-built_in">f</span>(b)) <span class="hljs-keyword">return</span> <span class="hljs-built_in">f</span>(a)&lt;<span class="hljs-built_in">f</span>(b);
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>((a^b)==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> a.x&lt;b.x;
    <span class="hljs-keyword">else</span> <span class="hljs-built_in">return</span> (a^b)&gt;<span class="hljs-number">0</span>;
}
</div></code></pre>
<h3 id="tu-bao" tabindex="-1">凸包</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwaW50JTIwY29udmV4X2h1bGwoUG9pbnQlMjAqcGclMkNpbnQlMjBuJTJDUG9pbnQlMjAqY2gpJTdCJTJGJTJGJUU0JUJDJTlBJUU1JUIwJTg2cGclRTYlOEUlOTIlRTUlQkElOEYlRTUlQjklQjYlRTUlOEUlQkIlRTklODclOEQlRUYlQkMlOEMlRTglQkYlOTQlRTUlOUIlOUUlRTUlODclQjglRTUlOEMlODUlRTklQTElQjYlRTclODIlQjklRTYlOTUlQjAlRUYlQkMlOEMlRTYlQjElODIlRTclOUElODQlRTclOUElODQlRTUlODclQjglRTUlOEMlODUlRTclOUElODQlRTclODIlQjklRTUlOUQlODclRTQlQjglQkElRTklQTElQjYlRTclODIlQjklRUYlQkMlOEMlRTQlQjglOEQlRTUlQUQlOTglRTUlOUMlQTglRTQlQjglQTQlRTYlOUQlQTElRTglQkUlQjklRTUlODUlQjElRTclQkElQkYlMEElMjAlMjAlMjAlMjBzb3J0KHBnJTJDcGclMkJuJTJDJTVCJTVEKFBvaW50JTIwYSUyQ1BvaW50JTIwYiklN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBpZihzZ24oYS54LWIueCklM0QlM0QwKSUyMHJldHVybiUyMHNnbihhLnktYi55KSUzQzAlM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjByZXR1cm4lMjBzZ24oYS54LWIueCklM0MwJTNCJTBBJTIwJTIwJTIwJTIwJTdEKSUzQiUwQSUyMCUyMCUyMCUyMG4lM0R1bmlxdWUocGclMkNwZyUyQm4pLXBnJTNCJTBBJTIwJTIwJTIwJTIwaW50JTIwY250JTNEMCUzQiUwQSUyMCUyMCUyMCUyMGZvcihpbnQlMjBpJTNEMCUzQmklM0NuJTNCaSUyQiUyQiklN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB3aGlsZShjbnQlM0UlM0QyJTI2JTI2c2duKChjaCU1QmNudC0xJTVELWNoJTVCY250LTIlNUQpJTVFKHBnJTVCaSU1RC1jaCU1QmNudC0xJTVEKSklM0MlM0QwKSUyMGNudC0tJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwY2glNUJjbnQlMkIlMkIlNUQlM0RwZyU1QmklNUQlM0IlMEElMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjBpbnQlMjB0JTNEY250JTNCJTBBJTIwJTIwJTIwJTIwZm9yKGludCUyMGklM0RuLTIlM0JpJTNFJTNEMCUzQmktLSklN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB3aGlsZShjbnQlM0UlM0R0JTJCMSUyNiUyNnNnbigoY2glNUJjbnQtMSU1RC1jaCU1QmNudC0yJTVEKSU1RShwZyU1QmklNUQtY2glNUJjbnQtMSU1RCkpJTNDJTNEMCklMjBjbnQtLSUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGNoJTVCY250JTJCJTJCJTVEJTNEcGclNUJpJTVEJTNCJTBBJTIwJTIwJTIwJTIwJTdEJTBBJTIwJTIwJTIwJTIwaWYobiUzRSUzRDIpJTIwY250LS0lM0IlMEElMjAlMjAlMjAlMjByZXR1cm4lMjBjbnQlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">convex_hull</span><span class="hljs-params">(Point *pg,<span class="hljs-type">int</span> n,Point *ch)</span></span>{<span class="hljs-comment">//会将pg排序并去重，返回凸包顶点数，求的的凸包的点均为顶点，不存在两条边共线</span>
    <span class="hljs-built_in">sort</span>(pg,pg+n,[](Point a,Point b){
        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">sgn</span>(a.x-b.x)==<span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">sgn</span>(a.y-b.y)&lt;<span class="hljs-number">0</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sgn</span>(a.x-b.x)&lt;<span class="hljs-number">0</span>;
    });
    n=<span class="hljs-built_in">unique</span>(pg,pg+n)-pg;
    <span class="hljs-type">int</span> cnt=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++){
        <span class="hljs-keyword">while</span>(cnt&gt;=<span class="hljs-number">2</span>&amp;&amp;<span class="hljs-built_in">sgn</span>((ch[cnt<span class="hljs-number">-1</span>]-ch[cnt<span class="hljs-number">-2</span>])^(pg[i]-ch[cnt<span class="hljs-number">-1</span>]))&lt;=<span class="hljs-number">0</span>) cnt--;
        ch[cnt++]=pg[i];
    }
    <span class="hljs-type">int</span> t=cnt;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=n<span class="hljs-number">-2</span>;i&gt;=<span class="hljs-number">0</span>;i--){
        <span class="hljs-keyword">while</span>(cnt&gt;=t<span class="hljs-number">+1</span>&amp;&amp;<span class="hljs-built_in">sgn</span>((ch[cnt<span class="hljs-number">-1</span>]-ch[cnt<span class="hljs-number">-2</span>])^(pg[i]-ch[cnt<span class="hljs-number">-1</span>]))&lt;=<span class="hljs-number">0</span>) cnt--;
        ch[cnt++]=pg[i];
    }
    <span class="hljs-keyword">if</span>(n&gt;=<span class="hljs-number">2</span>) cnt--;
    <span class="hljs-keyword">return</span> cnt;
}
</div></code></pre>
<h3 id="dian-zai-duo-bian-xing-nei" tabindex="-1">点在多边形内</h3>
<h4 id="she-xian-fa" tabindex="-1">射线法</h4>
<p>适用于任意多边形。具体原理是从要判断的点水平作射线，穿过了奇数条边则说明在多边形内部，反之则在多边形外部</p>
<p>但有几个特殊情况：如果遇到一个水平的边，则应视为没有穿过边；穿过了两条边交界处，应视为穿过了一个边；穿过了两条边构成的一个角的顶点，则应视为没有穿过边。其中前一种可以特判，后一种可以采取把线段看成上闭下开的形式来解决</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwYm9vbCUyMGluX3BvbHlnb24oUG9pbnQlMjBwJTJDUG9pbnQlMjAqcGclMkNpbnQlMjBuKSU3QiUyRiUyRiUyMHBnJUU0JUI4JThCJUU2JUEwJTg3JUU0JUJCJThFMCVFNSVCQyU4MCVFNSVBNyU4QiVFRiVCQyU4QyVFNSU5QyVBOCVFOCVCRSVCOSVFNCVCOCU4QSVFNCVCOSU5RiVFNyVBRSU5NyUwQSUyMCUyMCUyMCUyMGludCUyMGFucyUzRDAlM0IlMEElMjAlMjAlMjAlMjBQb2ludCUyMHAxJTJDcDIlM0IlMEElMjAlMjAlMjAlMjBwMSUzRHBnJTVCMCU1RCUzQiUwQSUyMCUyMCUyMCUyMGZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBwMiUzRHBnJTVCaSUyNW4lNUQlM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBpZihvbl9zZWcocCUyQ0xpbmUocDElMkNwMikpKSUyMHJldHVybiUyMHRydWUlM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBpZihwMS55JTNEJTNEcDIueSklN0IlMkYlMkYlMjAlRTYlQjAlQjQlRTUlQjklQjMlRTglQkUlQjklRTQlQjglOEQlRTglODAlODMlRTglOTklOTElMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBwMSUzRHAyJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwY29udGludWUlM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBpZihwLnklM0VtaW4ocDEueSUyQ3AyLnkpJTIwJTI2JTI2JTIwcC55JTNDJTNEbWF4KHAxLnklMkNwMi55KSUyMCUyNiUyNiUyMHAueCUzQyUzRG1heChwMS54JTJDcDIueCkpJTdCJTJGJTJGJUU0JUI4JThBJUU1JThGJTk2JUU0JUI4JThCJUU0JUI4JThEJUU1JThGJTk2JTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaWYocDEueCUzRCUzRHAyLngpJTIwYW5zJTJCJTJCJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwZWxzZSU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGRvdWJsZSUyMHglM0RwMS54JTJCKHAueS1wMS55KSUyRnNsb3BlKHAxJTJDcDIpJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaWYocC54JTNDJTNEeCklMjBhbnMlMkIlMkIlM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBwMSUzRHAyJTNCJTBBJTIwJTIwJTIwJTIwJTdEJTBBJTIwJTIwJTIwJTIwcmV0dXJuJTIwYW5zJTI2MSUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">bool</span> <span class="hljs-title">in_polygon</span><span class="hljs-params">(Point p,Point *pg,<span class="hljs-type">int</span> n)</span></span>{<span class="hljs-comment">// pg下标从0开始，在边上也算</span>
    <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;
    Point p1,p2;
    p1=pg[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
        p2=pg[i%n];
        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">on_seg</span>(p,<span class="hljs-built_in">Line</span>(p1,p2))) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span>(p<span class="hljs-number">1.</span>y==p<span class="hljs-number">2.</span>y){<span class="hljs-comment">// 水平边不考虑</span>
            p1=p2;
            <span class="hljs-keyword">continue</span>;
        }
        <span class="hljs-keyword">if</span>(p.y&gt;<span class="hljs-built_in">min</span>(p<span class="hljs-number">1.</span>y,p<span class="hljs-number">2.</span>y) &amp;&amp; p.y&lt;=<span class="hljs-built_in">max</span>(p<span class="hljs-number">1.</span>y,p<span class="hljs-number">2.</span>y) &amp;&amp; p.x&lt;=<span class="hljs-built_in">max</span>(p<span class="hljs-number">1.</span>x,p<span class="hljs-number">2.</span>x)){<span class="hljs-comment">//上取下不取</span>
            <span class="hljs-keyword">if</span>(p<span class="hljs-number">1.</span>x==p<span class="hljs-number">2.</span>x) ans++;
            <span class="hljs-keyword">else</span>{
                <span class="hljs-type">double</span> x=p<span class="hljs-number">1.</span>x+(p.y-p<span class="hljs-number">1.</span>y)/<span class="hljs-built_in">slope</span>(p1,p2);
                <span class="hljs-keyword">if</span>(p.x&lt;=x) ans++;
            }
        }
        p1=p2;
    }
    <span class="hljs-keyword">return</span> ans&amp;<span class="hljs-number">1</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<h4 id="cha-cheng-pan-duan" tabindex="-1">叉乘判断</h4>
<p>只适用于判断点是否在凸包内</p>
<p>逐个计算点到凸包顶点构成的向量之间的叉乘是否是同号，即判断这些向量是否都往一个方向转，是的话就说明点在该凸包内</p>
<p><div class="img-box"><img class="lazy" date-src="https://pic.caiwen.work/i/2025/02/18/67b46f833d5ba.png" style="transform: scale(1)" width=389 height=262></div></p>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<h4 id="er-fen-fa" tabindex="-1">二分法</h4>
<p>只适用于凸包</p>
<p>首先把多边形划分为多个区域</p>
<p><div class="img-box"><img class="lazy" date-src="https://pic.caiwen.work/i/2025/02/18/67b4701ee315a.png" style="transform: scale(1)" width=536 height=528></div></p>
<p><div class="img-box"><img class="lazy" date-src="https://pic.caiwen.work/i/2025/02/18/67b470cc6b966.png" style="transform: scale(1)" width=950 height=615></div></p>
<p>如果要判断一个点是否在该凸包内，则先找到这个点在哪个区域内。如果不在这几个区域中，则必不在凸包内，否则我们只需要判断这个点和凸包的边的关系即可</p>
<p><div class="img-box"><img class="lazy" date-src="https://pic.caiwen.work/i/2025/02/18/67b470e7ee9a7.png" style="transform: scale(1)" width=516 height=569></div></p>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW50JTIwbiUyQ20lMkNrJTJDb2slM0QwJTJDY250JTNEMSUzQmNpbiUzRSUzRW4lM0UlM0VtJTNFJTNFayUzQiUwQWZvcihpbnQlMjBpJTNEMCUzQmklM0NuJTNCaSUyQiUyQiklMjBjaW4lM0UlM0VwJTVCaSU1RC54JTNFJTNFcCU1QmklNUQueSUzQiUwQW4lM0Rjb252ZXhfaHVsbChwJTJDbiUyQ2NoKSUzQiUwQVBvaW50JTIwYmFzZSUzRHAlNUIwJTVEJTNCJTBBZm9yKGludCUyMGklM0QwJTNCaSUzQ24lM0JpJTJCJTJCKSUyMGNoJTVCaSU1RCUzRGNoJTVCaSU1RC1iYXNlJTNCJTBBd2hpbGUobS0tKSU3QiUwQSUyMCUyMCUyMCUyMFBvaW50JTIwbm93JTNCY2luJTNFJTNFbm93LnglM0UlM0Vub3cueSUzQiUwQSUyMCUyMCUyMCUyMG5vdyUzRG5vdy1iYXNlJTNCJTBBJTIwJTIwJTIwJTIwaWYocGxyKG5vdyUyQ0xpbmUoY2glNUIwJTVEJTJDY2glNUIxJTVEKSklM0QlM0QwJTdDJTdDcGxyKG5vdyUyQ0xpbmUoY2glNUIwJTVEJTJDY2glNUJuLTElNUQpKSUzRCUzRDApJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaWYob25fc2VnKG5vdyUyQ0xpbmUoY2glNUIwJTVEJTJDY2glNUIxJTVEKSklN0MlN0Nvbl9zZWcobm93JTJDTGluZShjaCU1QjAlNUQlMkNjaCU1Qm4tMSU1RCkpKSUyMG9rJTJCJTJCJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwY29udGludWUlM0IlMEElMjAlMjAlMjAlMjAlN0QlMEElMjAlMjAlMjAlMjBpZighKHBscihub3clMkNMaW5lKGNoJTVCMCU1RCUyQ2NoJTVCMSU1RCkpJTNEJTNELTElMjYlMjZwbHIobm93JTJDTGluZShjaCU1QjAlNUQlMkNjaCU1Qm4tMSU1RCkpJTNEJTNEMSkpJTIwY29udGludWUlM0IlMEElMjAlMjAlMjAlMjBpbnQlMjBsJTNEMSUyQ3IlM0RuLTElMkNhbnMlM0QtMSUzQiUwQSUyMCUyMCUyMCUyMHdoaWxlKGwlM0MlM0RyKSU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGludCUyMG1pZCUzRChsJTJCciklM0UlM0UxJTNCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaWYoKGNoJTVCbWlkJTVEJTVFbm93KSUzRSUzRDApJTIwYW5zJTNEbWlkJTJDbCUzRG1pZCUyQjElM0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBlbHNlJTIwciUzRG1pZC0xJTNCJTBBJTIwJTIwJTIwJTIwJTdEJTBBJTIwJTIwJTIwJTIwaWYoYW5zJTNEJTNELTElN0MlN0NhbnMlM0QlM0RuLTEpJTIwY29udGludWUlM0IlMEElMjAlMjAlMjAlMjBpZihwbHIobm93JTJDTGluZShjaCU1QmFucyU1RCUyQ2NoJTVCYW5zJTJCMSU1RCkpISUzRDEpJTIwb2slMkIlMkIlM0IlMEElN0QlMEFpZihvayUzRSUzRGspJTIwY291dCUzQyUzQyUyMllFUyUyMiUzQyUzQ2VuZGwlM0IlMEFlbHNlJTIwY291dCUzQyUzQyUyMk5PJTIyJTNDJTNDZW5kbCUzQiUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div></div><div class="code"><span class="hljs-type">int</span> n,m,k,ok=<span class="hljs-number">0</span>,cnt=<span class="hljs-number">1</span>;cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) cin&gt;&gt;p[i].x&gt;&gt;p[i].y;
n=<span class="hljs-built_in">convex_hull</span>(p,n,ch);
Point base=p[<span class="hljs-number">0</span>];
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) ch[i]=ch[i]-base;
<span class="hljs-keyword">while</span>(m--){
    Point now;cin&gt;&gt;now.x&gt;&gt;now.y;
    now=now-base;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">plr</span>(now,<span class="hljs-built_in">Line</span>(ch[<span class="hljs-number">0</span>],ch[<span class="hljs-number">1</span>]))==<span class="hljs-number">0</span>||<span class="hljs-built_in">plr</span>(now,<span class="hljs-built_in">Line</span>(ch[<span class="hljs-number">0</span>],ch[n<span class="hljs-number">-1</span>]))==<span class="hljs-number">0</span>){
        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">on_seg</span>(now,<span class="hljs-built_in">Line</span>(ch[<span class="hljs-number">0</span>],ch[<span class="hljs-number">1</span>]))||<span class="hljs-built_in">on_seg</span>(now,<span class="hljs-built_in">Line</span>(ch[<span class="hljs-number">0</span>],ch[n<span class="hljs-number">-1</span>]))) ok++;
        <span class="hljs-keyword">continue</span>;
    }
    <span class="hljs-keyword">if</span>(!(<span class="hljs-built_in">plr</span>(now,<span class="hljs-built_in">Line</span>(ch[<span class="hljs-number">0</span>],ch[<span class="hljs-number">1</span>]))==<span class="hljs-number">-1</span>&amp;&amp;<span class="hljs-built_in">plr</span>(now,<span class="hljs-built_in">Line</span>(ch[<span class="hljs-number">0</span>],ch[n<span class="hljs-number">-1</span>]))==<span class="hljs-number">1</span>)) <span class="hljs-keyword">continue</span>;
    <span class="hljs-type">int</span> l=<span class="hljs-number">1</span>,r=n<span class="hljs-number">-1</span>,ans=<span class="hljs-number">-1</span>;
    <span class="hljs-keyword">while</span>(l&lt;=r){
        <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span>((ch[mid]^now)&gt;=<span class="hljs-number">0</span>) ans=mid,l=mid<span class="hljs-number">+1</span>;
        <span class="hljs-keyword">else</span> r=mid<span class="hljs-number">-1</span>;
    }
    <span class="hljs-keyword">if</span>(ans==<span class="hljs-number">-1</span>||ans==n<span class="hljs-number">-1</span>) <span class="hljs-keyword">continue</span>;
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">plr</span>(now,<span class="hljs-built_in">Line</span>(ch[ans],ch[ans<span class="hljs-number">+1</span>]))!=<span class="hljs-number">1</span>) ok++;
}
<span class="hljs-keyword">if</span>(ok&gt;=k) cout&lt;&lt;<span class="hljs-string">&quot;YES&quot;</span>&lt;&lt;endl;
<span class="hljs-keyword">else</span> cout&lt;&lt;<span class="hljs-string">&quot;NO&quot;</span>&lt;&lt;endl;
</div></code></pre>
<h2 id="qi-ta" tabindex="-1">其他</h2>
<h3 id="ping-mian-zui-jin-dian-dui" tabindex="-1">平面最近点对</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="UG9pbnQlMjBwJTVCXyU1RCUzQiUwQWludCUyMHRtcCU1Ql8lNUQlM0IlMEFkb3VibGUlMjBzb2x2ZShpbnQlMjBsJTJDaW50JTIwciklN0IlMEElMjAlMjAlMjAlMjBpZihsJTNEJTNEciklMjByZXR1cm4lMjBpbmYlM0IlMEElMjAlMjAlMjAlMjBpZihsJTJCMSUzRCUzRHIpJTIwcmV0dXJuJTIwZGlzKHAlNUJsJTVEJTJDcCU1QnIlNUQpJTNCJTBBJTIwJTIwJTIwJTIwaW50JTIwbWlkJTNEKGwlMkJyKSUzRSUzRTElMkNjbnQlM0QwJTNCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwZDElM0Rzb2x2ZShsJTJDbWlkKSUyQ2QyJTNEc29sdmUobWlkJTJCMSUyQ3IpJTJDZCUzRG1pbihkMSUyQ2QyKSUzQiUwQSUyMCUyMCUyMCUyMGZvcihpbnQlMjBpJTNEbCUzQmklM0MlM0RyJTNCaSUyQiUyQiklMjBpZihmYWJzKHAlNUJtaWQlNUQueC1wJTVCaSU1RC54KSUzQ2QpJTIwdG1wJTVCJTJCJTJCY250JTVEJTNEaSUzQiUwQSUyMCUyMCUyMCUyMGZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RjbnQlM0JpJTJCJTJCKSU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGZvcihpbnQlMjBqJTNEMSUzQmolM0NpJTNCaiUyQiUyQiklN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBkb3VibGUlMjBkMyUzRGRpcyhwJTVCdG1wJTVCaSU1RCU1RCUyQ3AlNUJ0bXAlNUJqJTVEJTVEKSUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGQlM0RtaW4oZCUyQ2QzKSUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCU3RCUwQSUyMCUyMCUyMCUyMCU3RCUwQSUyMCUyMCUyMCUyMHJldHVybiUyMGQlM0IlMEElN0QlMEFpbmxpbmUlMjB2b2lkJTIwc3VidGFzaygpJTdCJTBBJTIwJTIwJTIwJTIwaW50JTIwbiUzQmNpbiUzRSUzRW4lM0IlMEElMjAlMjAlMjAlMjBmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwY2luJTNFJTNFcCU1QmklNUQueCUzRSUzRXAlNUJpJTVELnklM0IlMEElMjAlMjAlMjAlMjBzb3J0KHAlMkIxJTJDcCUyQm4lMkIxJTJDJTVCJTVEKFBvaW50JTIwYSUyQ1BvaW50JTIwYiklN0JyZXR1cm4lMjBzZ24oYS54LWIueCklM0QlM0QwJTNGJTIwc2duKGEueS1iLnkpJTNDMCUzQXNnbihhLngtYi54KSUzQzAlM0IlN0QpJTNCJTBBJTIwJTIwJTIwJTIwZG91YmxlJTIwcmVzJTNEc29sdmUoMSUyQ24pJTNCJTBBJTIwJTIwJTIwJTIwcHJpbnRmKCUyMiUyNS40bGYlMjIlMkNyZXMpJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div></div><div class="code">Point p[_];
<span class="hljs-type">int</span> tmp[_];
<span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">solve</span><span class="hljs-params">(<span class="hljs-type">int</span> l,<span class="hljs-type">int</span> r)</span></span>{
    <span class="hljs-keyword">if</span>(l==r) <span class="hljs-keyword">return</span> inf;
    <span class="hljs-keyword">if</span>(l<span class="hljs-number">+1</span>==r) <span class="hljs-keyword">return</span> <span class="hljs-built_in">dis</span>(p[l],p[r]);
    <span class="hljs-type">int</span> mid=(l+r)&gt;&gt;<span class="hljs-number">1</span>,cnt=<span class="hljs-number">0</span>;
    <span class="hljs-type">double</span> d1=<span class="hljs-built_in">solve</span>(l,mid),d2=<span class="hljs-built_in">solve</span>(mid<span class="hljs-number">+1</span>,r),d=<span class="hljs-built_in">min</span>(d1,d2);
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=l;i&lt;=r;i++) <span class="hljs-keyword">if</span>(<span class="hljs-built_in">fabs</span>(p[mid].x-p[i].x)&lt;d) tmp[++cnt]=i;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=cnt;i++){
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;i;j++){
            <span class="hljs-type">double</span> d3=<span class="hljs-built_in">dis</span>(p[tmp[i]],p[tmp[j]]);
            d=<span class="hljs-built_in">min</span>(d,d3);
        }
    }
    <span class="hljs-keyword">return</span> d;
}
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">subtask</span><span class="hljs-params">()</span></span>{
    <span class="hljs-type">int</span> n;cin&gt;&gt;n;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;p[i].x&gt;&gt;p[i].y;
    <span class="hljs-built_in">sort</span>(p<span class="hljs-number">+1</span>,p+n<span class="hljs-number">+1</span>,[](Point a,Point b){<span class="hljs-keyword">return</span> <span class="hljs-built_in">sgn</span>(a.x-b.x)==<span class="hljs-number">0</span>? <span class="hljs-built_in">sgn</span>(a.y-b.y)&lt;<span class="hljs-number">0</span>:<span class="hljs-built_in">sgn</span>(a.x-b.x)&lt;<span class="hljs-number">0</span>;});
    <span class="hljs-type">double</span> res=<span class="hljs-built_in">solve</span>(<span class="hljs-number">1</span>,n);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4lf&quot;</span>,res);
}
</div></code></pre>
