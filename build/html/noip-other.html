<h2 id="er-wei-cha-fen" tabindex="-1">二维差分</h2>
<p>设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">d[][]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mclose">]</span><span class="mopen">[</span><span class="mclose">]</span></span></span></span>为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">a[][]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mclose">]</span><span class="mopen">[</span><span class="mclose">]</span></span></span></span>的差分数组，则有</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>=</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>−</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo><mo>−</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">d[i][j]=a[i][j]-a[i-1][j]-a[i][j-1]+a[i-1][j-1]
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></span></p>
<p>使用二维差分可以做到二维区间修改，单点查询，比如（借用知乎大佬的图片）：
<div class="img-box"><img class="lazy" date-src="https://www.caiwen.work/wp-content/uploads/2022/08/QQ%E6%88%AA%E5%9B%BE20220826145602.png" style="transform: scale(1)" width=736 height=288></div>
在图一所示的差分数组的地方加d，则对应原数组（图三）的区域都加d
因此，在左上角<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_1,y_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，右下角<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x_2,y_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>的区域上都加上v，有：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">]</mo><mo>+</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">d[x_1][y_1]+=v
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mord">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>y</mi><mn>1</mn></msub><mo stretchy="false">]</mo><mo>−</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">d[x_2+1][y_1]-=v
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>y</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">d[x_1][y_2+1]-=v
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></span></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><msub><mi>x</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">[</mo><msub><mi>y</mi><mn>2</mn></msub><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>+</mo><mo>=</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">d[x_2+1][y_2+1]+=v
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mord">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></span></p>
<p>在差分数组中进行二维前缀和，就可以得到原数据</p>
<h2 id="lis" tabindex="-1">LIS</h2>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 的求LIS做法</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2FsZ29yaXRobSUzRSUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBaW50JTIwYSU1QjEwMDAwMDYlNUQlM0IlMEFpbnQlMjBzJTVCMTAwMDAwNiU1RCUyQ3RvdCUzQiUyRiUyRiVFNiVBMCU4OCUwQWludCUyMG1haW4oKSU3QiUwQSUwOWludCUyMG4lM0IlMEElMDljaW4lM0UlM0VuJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWNpbiUzRSUzRWElNUJpJTVEJTNCJTBBJTA5JTdEJTBBJTA5cyU1QiUyQiUyQnRvdCU1RCUzRGElNUIxJTVEJTNCJTJGJTJGJUU2JThBJThBJUU3JUFDJUFDJUU0JUI4JTgwJUU0JUI4JUFBJUU2JTk1JUIwJUU1JTg1JUE1JUU2JUEwJTg4JTBBJTA5Zm9yKGludCUyMGklM0QyJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWlmKGElNUJpJTVEJTNFcyU1QnRvdCU1RCklMjBzJTVCJTJCJTJCdG90JTVEJTNEYSU1QmklNUQlM0IlMEElMDklMDllbHNlJTdCJTBBJTA5JTA5JTA5aW50JTIwdG1wJTNEbG93ZXJfYm91bmQocyUyQjElMkNzJTJCdG90JTJCMSUyQ2ElNUJpJTVEKS1zJTNCJTJGJTJGJUU1JTlDJUE4JUU2JUEwJTg4JUU0JUI4JUFEJUU2JTlGJUE1JUU2JTg5JUJFJUU3JUFDJUFDJUU0JUI4JTgwJUU0JUI4JUFBJUU1JUE0JUE3JUU0JUJBJThFJUU3JUFEJTg5JUU0JUJBJThFYSU1QmklNUQlRTclOUElODQlRTYlOTUlQjAlRUYlQkMlOEMlRTclODQlQjYlRTUlOTAlOEUlRTYlOUIlQkYlRTYlOEQlQTIlRTYlOEUlODklMEElMDklMDklMDlzJTVCdG1wJTVEJTNEYSU1QmklNUQlM0IlMEElMDklMDklN0QlMEElMDklN0QlMEElMDljb3V0JTNDJTNDdG90JTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-type">int</span> a[<span class="hljs-number">1000006</span>];
<span class="hljs-type">int</span> s[<span class="hljs-number">1000006</span>],tot;<span class="hljs-comment">//栈</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> n;
	cin&gt;&gt;n;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		cin&gt;&gt;a[i];
	}
	s[++tot]=a[<span class="hljs-number">1</span>];<span class="hljs-comment">//把第一个数入栈</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;=n;i++){
		<span class="hljs-keyword">if</span>(a[i]&gt;s[tot]) s[++tot]=a[i];
		<span class="hljs-keyword">else</span>{
			<span class="hljs-type">int</span> tmp=<span class="hljs-built_in">lower_bound</span>(s<span class="hljs-number">+1</span>,s+tot<span class="hljs-number">+1</span>,a[i])-s;<span class="hljs-comment">//在栈中查找第一个大于等于a[i]的数，然后替换掉</span>
			s[tmp]=a[i];
		}
	}
	cout&lt;&lt;tot;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<h2 id="gao-jing-du-suan-fa" tabindex="-1">高精度算法</h2>
<ul>
<li>string转Lint部分，没有去除前导零</li>
<li>所有的加减乘除都默认是两个正整数操作，没有考虑0和负数</li>
<li>比较大小的时候倒序循环！</li>
<li>除法注意c.len可能为负数，需要变成0</li>
<li>Lint含参构造器中无法再去调用无参构造函数，需要直接把代码复制过来</li>
</ul>
<h3 id="jie-gou-ti" tabindex="-1">结构体</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="c3RydWN0JTIwTGludCU3QiUwQSUwOWludCUyMG51bSU1Qm1heG4qMiU1RCUyQ2xlbiUzQmNoYXIlMjBvcCUzQiUwQSUwOUxpbnQoKSU3Qm1lbXNldChudW0lMkMwJTJDc2l6ZW9mKG51bSkpJTNCbGVuJTNEMSUzQm9wJTNEJyUyQiclM0IlN0QlMEElMDlMaW50KHN0cmluZyUyMHN0ciklN0JtZW1zZXQobnVtJTJDMCUyQ3NpemVvZihudW0pKSUzQmxlbiUzRDElM0JvcCUzRCclMkInJTNCJTBBJTA5JTA5aWYoc3RyJTVCMCU1RCUzRCUzRCctJyklMjBvcCUzRCctJyUyQ3N0ci5lcmFzZSgwJTJDMSklM0IlMEElMDklMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEc3RyLnNpemUoKSUzQmklMkIlMkIpJTIwbnVtJTVCaSU1RCUzRChpbnQpKHN0ciU1QnN0ci5zaXplKCktaSU1RCktJzAnJTNCJTBBJTA5JTA5bGVuJTNEc3RyLnNpemUoKSUzQiUwQSUwOSU3RCUwQSUwOUxpbnQoaW50JTIwYSUyQ2ludCUyMHQlM0QwKSU3Qm1lbXNldChudW0lMkMwJTJDc2l6ZW9mKG51bSkpJTNCbGVuJTNEMSUzQm9wJTNEJyUyQiclM0IlMEElMDklMDlmb3IoJTNCYSUzQmxlbiUzRCUyQiUyQnQlMkNhJTJGJTNEMTApJTIwbnVtJTVCdCU1RCUzRGElMjUxMCUzQiUwQSUwOSU3RCUwQSU3RCUzQiUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div></div><div class="code"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Lint</span>{
	<span class="hljs-type">int</span> num[maxn*<span class="hljs-number">2</span>],len;<span class="hljs-type">char</span> op;
	<span class="hljs-built_in">Lint</span>(){<span class="hljs-built_in">memset</span>(num,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(num));len=<span class="hljs-number">1</span>;op=<span class="hljs-string">&#x27;+&#x27;</span>;}
	<span class="hljs-built_in">Lint</span>(string str){<span class="hljs-built_in">memset</span>(num,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(num));len=<span class="hljs-number">1</span>;op=<span class="hljs-string">&#x27;+&#x27;</span>;
		<span class="hljs-keyword">if</span>(str[<span class="hljs-number">0</span>]==<span class="hljs-string">&#x27;-&#x27;</span>) op=<span class="hljs-string">&#x27;-&#x27;</span>,str.<span class="hljs-built_in">erase</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=str.<span class="hljs-built_in">size</span>();i++) num[i]=(<span class="hljs-type">int</span>)(str[str.<span class="hljs-built_in">size</span>()-i])-<span class="hljs-string">&#x27;0&#x27;</span>;
		len=str.<span class="hljs-built_in">size</span>();
	}
	<span class="hljs-built_in">Lint</span>(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> t=<span class="hljs-number">0</span>){<span class="hljs-built_in">memset</span>(num,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(num));len=<span class="hljs-number">1</span>;op=<span class="hljs-string">&#x27;+&#x27;</span>;
		<span class="hljs-keyword">for</span>(;a;len=++t,a/=<span class="hljs-number">10</span>) num[t]=a%<span class="hljs-number">10</span>;
	}
};
</div></code></pre>
<h3 id="da-xiao-bi-jiao" tabindex="-1">大小比较</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="Ym9vbCUyMG9wZXJhdG9yJTNFKExpbnQlMjBhJTJDTGludCUyMGIpJTdCJTBBJTA5aWYoYS5vcCElM0RiLm9wKSUyMHJldHVybiUyMGEub3AlM0QlM0QnJTJCJyUzQiUwQSUwOWlmKGEubGVuJTNFYi5sZW4pJTIwcmV0dXJuJTIwYS5vcCUzRCUzRCclMkInJTNCJTBBJTA5aWYoYS5sZW4lM0NiLmxlbiklMjByZXR1cm4lMjBhLm9wISUzRCclMkInJTNCJTBBJTA5Zm9yKGludCUyMGklM0RhLmxlbiUzQmklM0UlM0QxJTNCaS0tKSU3QiUwQSUwOSUwOWlmKGEubnVtJTVCaSU1RCUzRWIubnVtJTVCaSU1RCklMjByZXR1cm4lMjBhLm9wJTNEJTNEJyUyQiclM0IlMEElMDklMDllbHNlJTIwaWYoYS5udW0lNUJpJTVEJTNDYi5udW0lNUJpJTVEKSUyMHJldHVybiUyMGEub3AhJTNEJyUyQiclM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjBmYWxzZSUzQiUwQSU3RCUwQWJvb2wlMjBvcGVyYXRvciUzRCUzRChMaW50JTIwYSUyQ0xpbnQlMjBiKSU3QiUwQSUwOWlmKGEubGVuISUzRGIubGVuKSUyMHJldHVybiUyMGZhbHNlJTNCJTBBJTA5Zm9yKGludCUyMGklM0RhLmxlbiUzQmklM0UlM0QxJTNCaS0tKSUyMGlmKGEubnVtJTVCaSU1RCElM0RiLm51bSU1QmklNUQpJTIwcmV0dXJuJTIwZmFsc2UlM0IlMEElMDlyZXR1cm4lMjB0cnVlJTNCJTBBJTdEJTBBYm9vbCUyMG9wZXJhdG9yJTNDKExpbnQlMjBhJTJDTGludCUyMGIpJTdCJTBBJTA5cmV0dXJuJTIwKCEoYSUzRWIpJTI2JTI2IShhJTNEJTNEYikpJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div></div><div class="code"><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&gt;(Lint a,Lint b){
	<span class="hljs-keyword">if</span>(a.op!=b.op) <span class="hljs-keyword">return</span> a.op==<span class="hljs-string">&#x27;+&#x27;</span>;
	<span class="hljs-keyword">if</span>(a.len&gt;b.len) <span class="hljs-keyword">return</span> a.op==<span class="hljs-string">&#x27;+&#x27;</span>;
	<span class="hljs-keyword">if</span>(a.len&lt;b.len) <span class="hljs-keyword">return</span> a.op!=<span class="hljs-string">&#x27;+&#x27;</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a.len;i&gt;=<span class="hljs-number">1</span>;i--){
		<span class="hljs-keyword">if</span>(a.num[i]&gt;b.num[i]) <span class="hljs-keyword">return</span> a.op==<span class="hljs-string">&#x27;+&#x27;</span>;
		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a.num[i]&lt;b.num[i]) <span class="hljs-keyword">return</span> a.op!=<span class="hljs-string">&#x27;+&#x27;</span>;
	}
	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>==(Lint a,Lint b){
	<span class="hljs-keyword">if</span>(a.len!=b.len) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a.len;i&gt;=<span class="hljs-number">1</span>;i--) <span class="hljs-keyword">if</span>(a.num[i]!=b.num[i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
	<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
<span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span>&lt;(Lint a,Lint b){
	<span class="hljs-keyword">return</span> (!(a&gt;b)&amp;&amp;!(a==b));
}
</div></code></pre>
<h3 id="jia-jian-cheng" tabindex="-1">加减乘</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="TGludCUyMG9wZXJhdG9yJTJCKExpbnQlMjBhJTJDTGludCUyMGIpJTdCJTBBJTA5TGludCUyMGMlM0JjLmxlbiUzRG1heChhLmxlbiUyQ2IubGVuKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RjLmxlbiUzQmklMkIlMkIpJTIwYy5udW0lNUJpJTVEJTNEYS5udW0lNUJpJTVEJTJCYi5udW0lNUJpJTVEJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRGMubGVuJTNCaSUyQiUyQiklMEElMDklMDlpZihjLm51bSU1QmklNUQlM0UlM0QxMCklMEElMDklMDklMDljLm51bSU1QmklMkIxJTVEJTJCJTNEYy5udW0lNUJpJTVEJTJGMTAlMkNjLm51bSU1QmklNUQlMjUlM0QxMCUyQ2MubGVuJTNEbWF4KGMubGVuJTJDaSUyQjEpJTNCJTBBJTA5d2hpbGUoYy5sZW4lM0UwJTI2JTI2IWMubnVtJTVCYy5sZW4lNUQpJTIwYy5sZW4tLSUzQiUwQSUwOXJldHVybiUyMGMlM0IlMEElN0QlMEFMaW50JTIwb3BlcmF0b3ItKExpbnQlMjBhJTJDTGludCUyMGIpJTdCJTBBJTA5TGludCUyMGMlM0JjLmxlbiUzRG1heChhLmxlbiUyQ2IubGVuKSUzQiUwQSUwOWlmKGIlM0VhKSUyMGMub3AlM0QnLSclMkNzd2FwKGElMkNiKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RjLmxlbiUzQmklMkIlMkIpJTIwYy5udW0lNUJpJTVEJTNEYS5udW0lNUJpJTVELWIubnVtJTVCaSU1RCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RjLmxlbiUzQmklMkIlMkIpJTBBJTA5JTA5aWYoYy5udW0lNUJpJTVEJTNDMCklMEElMDklMDklMDljLm51bSU1QmklNUQlMkIlM0QxMCUyQ2MubnVtJTVCaSUyQjElNUQtJTNEMSUzQiUwQSUwOXdoaWxlKGMubGVuJTNFMCUyNiUyNiFjLm51bSU1QmMubGVuJTVEKSUyMGMubGVuLS0lM0IlMEElMDlyZXR1cm4lMjBjJTNCJTBBJTdEJTBBTGludCUyMG9wZXJhdG9yKihMaW50JTIwYSUyQ0xpbnQlMjBiKSU3QiUwQSUwOUxpbnQlMjBjJTNCJTBBJTA5Yy5sZW4lM0RhLmxlbiUyQmIubGVuJTJCMSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RhLmxlbiUzQmklMkIlMkIpJTBBJTA5JTA5Zm9yKGludCUyMGolM0QxJTNCaiUzQyUzRGIubGVuJTNCaiUyQiUyQiklMjBjLm51bSU1QmklMkJqLTElNUQlMkIlM0RhLm51bSU1QmklNUQqYi5udW0lNUJqJTVEJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRGMubGVuJTNCaSUyQiUyQiklMEElMDklMDlpZihjLm51bSU1QmklNUQlM0UlM0QxMCklMEElMDklMDklMDljLm51bSU1QmklMkIxJTVEJTJCJTNEYy5udW0lNUJpJTVEJTJGMTAlMkNjLm51bSU1QmklNUQlMjUlM0QxMCUyQ2MubGVuJTNEbWF4KGMubGVuJTJDaSUyQjEpJTNCJTBBJTA5d2hpbGUoYy5sZW4lM0UwJTI2JTI2IWMubnVtJTVCYy5sZW4lNUQpJTIwYy5sZW4tLSUzQiUwQSUwOXJldHVybiUyMGMlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div></div><div class="code">Lint <span class="hljs-keyword">operator</span>+(Lint a,Lint b){
	Lint c;c.len=<span class="hljs-built_in">max</span>(a.len,b.len);
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=c.len;i++) c.num[i]=a.num[i]+b.num[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=c.len;i++)
		<span class="hljs-keyword">if</span>(c.num[i]&gt;=<span class="hljs-number">10</span>)
			c.num[i<span class="hljs-number">+1</span>]+=c.num[i]/<span class="hljs-number">10</span>,c.num[i]%=<span class="hljs-number">10</span>,c.len=<span class="hljs-built_in">max</span>(c.len,i<span class="hljs-number">+1</span>);
	<span class="hljs-keyword">while</span>(c.len&gt;<span class="hljs-number">0</span>&amp;&amp;!c.num[c.len]) c.len--;
	<span class="hljs-keyword">return</span> c;
}
Lint <span class="hljs-keyword">operator</span>-(Lint a,Lint b){
	Lint c;c.len=<span class="hljs-built_in">max</span>(a.len,b.len);
	<span class="hljs-keyword">if</span>(b&gt;a) c.op=<span class="hljs-string">&#x27;-&#x27;</span>,<span class="hljs-built_in">swap</span>(a,b);
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=c.len;i++) c.num[i]=a.num[i]-b.num[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=c.len;i++)
		<span class="hljs-keyword">if</span>(c.num[i]&lt;<span class="hljs-number">0</span>)
			c.num[i]+=<span class="hljs-number">10</span>,c.num[i<span class="hljs-number">+1</span>]-=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(c.len&gt;<span class="hljs-number">0</span>&amp;&amp;!c.num[c.len]) c.len--;
	<span class="hljs-keyword">return</span> c;
}
Lint <span class="hljs-keyword">operator</span>*(Lint a,Lint b){
	Lint c;
	c.len=a.len+b.len<span class="hljs-number">+1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=a.len;i++)
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=b.len;j++) c.num[i+j<span class="hljs-number">-1</span>]+=a.num[i]*b.num[j];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=c.len;i++)
		<span class="hljs-keyword">if</span>(c.num[i]&gt;=<span class="hljs-number">10</span>)
			c.num[i<span class="hljs-number">+1</span>]+=c.num[i]/<span class="hljs-number">10</span>,c.num[i]%=<span class="hljs-number">10</span>,c.len=<span class="hljs-built_in">max</span>(c.len,i<span class="hljs-number">+1</span>);
	<span class="hljs-keyword">while</span>(c.len&gt;<span class="hljs-number">0</span>&amp;&amp;!c.num[c.len]) c.len--;
	<span class="hljs-keyword">return</span> c;
}
</div></code></pre>
<h3 id="chu-qu-mo" tabindex="-1">除/取模</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="TGludCUyMG51bWNweShMaW50JTIwYSUyQ2ludCUyMGwpJTdCJTBBJTA5TGludCUyMGIlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEYS5sZW4lM0JpJTJCJTJCKSUyMGIubnVtJTVCaSUyQmwtMSU1RCUzRGEubnVtJTVCaSU1RCUzQiUwQSUwOXJldHVybiUyMGIubGVuJTNEYS5sZW4lMkJsLTElMkNiJTNCJTBBJTdEJTBBTGludCUyMG9wZXJhdG9yJTJGKExpbnQlMjBhJTJDTGludCUyMGIpJTdCJTBBJTA5TGludCUyMGMlM0IlMEElMDljLmxlbiUzRGEubGVuLWIubGVuJTJCMSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEYy5sZW4lM0JpJTNFJTNEMSUzQmktLSklN0IlMEElMDklMDlMaW50JTIwdCUzRG51bWNweShiJTJDaSklM0IlMEElMDklMDl3aGlsZShhJTNFdCU3QyU3Q2ElM0QlM0R0KSU3QiUwQSUwOSUwOSUwOWMubnVtJTVCaSU1RCUyQiUyQiUyQ2ElM0RhLXQlM0IlMEElMDklMDklMDl3aGlsZShhLmxlbiUzRTAlMjYlMjYhYS5udW0lNUJhLmxlbiU1RCklMjBhLmxlbi0tJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTA5aWYoYy5sZW4lM0MwKSUyMGMubGVuJTNEMCUzQiUwQSUwOXdoaWxlKGMubGVuJTNFMCUyNiUyNiFjLm51bSU1QmMubGVuJTVEKSUyMGMubGVuLS0lM0IlMEElMDlyZXR1cm4lMjBjJTNCJTBBJTdEJTBBTGludCUyMG9wZXJhdG9yJTJGKExpbnQlMjBhJTJDaW50JTIwYiklN0IlMEElMDlMaW50JTIwYyUzQmMubGVuJTNEYS5sZW4lM0IlMEElMDlmb3IoaW50JTIwaSUzRGEubGVuJTJDZCUzRDAlM0JpJTNFJTNEMSUzQmktLSklN0IlMEElMDklMDljLm51bSU1QmklNUQlM0QoZCUzRGQqMTAlMkJhLm51bSU1QmklNUQpJTJGYiUzQiUwQSUwOSUwOWQlMjUlM0RiJTNCJTBBJTA5JTdEJTBBJTA5d2hpbGUoYy5sZW4lM0UwJTI2JTI2IWMubnVtJTVCYy5sZW4lNUQpJTIwYy5sZW4tLSUzQiUwQSUwOXJldHVybiUyMGMlM0IlMEElN0QlMEFMaW50JTIwb3BlcmF0b3IlMjAlMjUoTGludCUyMGElMkNMaW50JTIwYiklN0IlMEElMDlmb3IoaW50JTIwaSUzRGEubGVuLWIubGVuJTJCMSUzQmklM0UlM0QxJTNCaS0tKSU3QiUwQSUwOSUwOUxpbnQlMjB0JTNEbnVtY3B5KGIlMkNpKSUzQiUwQSUwOSUwOXdoaWxlKGElM0V0JTdDJTdDYSUzRCUzRHQpJTdCJTBBJTA5JTA5JTA5YSUzRGEtdCUzQiUwQSUwOSUwOSUwOXdoaWxlKGEubGVuJTNFMCUyNiUyNiFhLm51bSU1QmEubGVuJTVEKSUyMGEubGVuLS0lM0IlMEElMDklMDklN0QlMEElMDklN0QlMEElMDlyZXR1cm4lMjBhJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div></div><div class="code"><span class="hljs-function">Lint <span class="hljs-title">numcpy</span><span class="hljs-params">(Lint a,<span class="hljs-type">int</span> l)</span></span>{
	Lint b;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=a.len;i++) b.num[i+l<span class="hljs-number">-1</span>]=a.num[i];
	<span class="hljs-keyword">return</span> b.len=a.len+l<span class="hljs-number">-1</span>,b;
}
Lint <span class="hljs-keyword">operator</span>/(Lint a,Lint b){
	Lint c;
	c.len=a.len-b.len<span class="hljs-number">+1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=c.len;i&gt;=<span class="hljs-number">1</span>;i--){
		Lint t=<span class="hljs-built_in">numcpy</span>(b,i);
		<span class="hljs-keyword">while</span>(a&gt;t||a==t){
			c.num[i]++,a=a-t;
			<span class="hljs-keyword">while</span>(a.len&gt;<span class="hljs-number">0</span>&amp;&amp;!a.num[a.len]) a.len--;
		}
	}
	<span class="hljs-keyword">if</span>(c.len&lt;<span class="hljs-number">0</span>) c.len=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">while</span>(c.len&gt;<span class="hljs-number">0</span>&amp;&amp;!c.num[c.len]) c.len--;
	<span class="hljs-keyword">return</span> c;
}
Lint <span class="hljs-keyword">operator</span>/(Lint a,<span class="hljs-type">int</span> b){
	Lint c;c.len=a.len;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a.len,d=<span class="hljs-number">0</span>;i&gt;=<span class="hljs-number">1</span>;i--){
		c.num[i]=(d=d*<span class="hljs-number">10</span>+a.num[i])/b;
		d%=b;
	}
	<span class="hljs-keyword">while</span>(c.len&gt;<span class="hljs-number">0</span>&amp;&amp;!c.num[c.len]) c.len--;
	<span class="hljs-keyword">return</span> c;
}
Lint <span class="hljs-keyword">operator</span> %(Lint a,Lint b){
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=a.len-b.len<span class="hljs-number">+1</span>;i&gt;=<span class="hljs-number">1</span>;i--){
		Lint t=<span class="hljs-built_in">numcpy</span>(b,i);
		<span class="hljs-keyword">while</span>(a&gt;t||a==t){
			a=a-t;
			<span class="hljs-keyword">while</span>(a.len&gt;<span class="hljs-number">0</span>&amp;&amp;!a.num[a.len]) a.len--;
		}
	}
	<span class="hljs-keyword">return</span> a;
}
</div></code></pre>
<h2 id="tan-xin" tabindex="-1">贪心</h2>
<p>（1）选择不相交区间：按照区间右端点排序，依次选择</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="c2lnbmVkJTIwbWFpbigpJTdCJTBBJUMyJUEwJTIwJUMyJUEwJTIwbiUzRHJlYWQoKSUzQiUwQSVDMiVBMCUyMCVDMiVBMCUyMGZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjBsaW5lJTVCaSU1RC5zJTNEcmVhZCgpJTJDbGluZSU1QmklNUQudCUzRHJlYWQoKSUzQiUwQSVDMiVBMCUyMCVDMiVBMCUyMHNvcnQobGluZSUyQjElMkNsaW5lJTJCbiUyQjElMkMlNUIlNUQoTGluZSUyMHglMkNMaW5lJTIweSklN0JyZXR1cm4lMjB4LnQlM0N5LnQlM0IlN0QpJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwaW50JTIwcCUzRDAlMkNhbnMlM0QwJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwZm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMGlmKGxpbmUlNUJpJTVELnMlM0UlM0RwKSUyMGFucyUyQiUyQiUyQ3AlM0RsaW5lJTVCaSU1RC50JTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwJTdEJTBBJUMyJUEwJTIwJUMyJUEwJTIwY291dCUzQyUzQ2FucyUzQiUwQSVDMiVBMCUyMCVDMiVBMCUyMHJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div></div><div class="code"><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    n=<span class="hljs-built_in">read</span>();
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) line[i].s=<span class="hljs-built_in">read</span>(),line[i].t=<span class="hljs-built_in">read</span>();
    <span class="hljs-built_in">sort</span>(line<span class="hljs-number">+1</span>,line+n<span class="hljs-number">+1</span>,[](Line x,Line y){<span class="hljs-keyword">return</span> x.t&lt;y.t;});
    <span class="hljs-type">int</span> p=<span class="hljs-number">0</span>,ans=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
        <span class="hljs-keyword">if</span>(line[i].s&gt;=p) ans++,p=line[i].t;
    }
    cout&lt;&lt;ans;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>（原题给的区间是左闭右开的）
（2）区间选点问题：按照区间右端点排序，依次解决</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="c2lnbmVkJTIwbWFpbigpJTdCJTBBJUMyJUEwJTIwJUMyJUEwJTIwbiUzRHJlYWQoKSUyQ2glM0RyZWFkKCklM0IlMEElQzIlQTAlMjAlQzIlQTAlMjBmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEaCUzQmklMkIlMkIpJTIwbGluZSU1QmklNUQucyUzRHJlYWQoKSUyQ2xpbmUlNUJpJTVELnQlM0RyZWFkKCklMkNsaW5lJTVCaSU1RC54JTNEcmVhZCgpJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwc29ydChsaW5lJTJCMSUyQ2xpbmUlMkJoJTJCMSUyQ2NtcCklM0IlMEElQzIlQTAlMjAlQzIlQTAlMjBpbnQlMjBhbnMlM0QwJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwZm9yKGludCUyMGklM0QxJTNCaSUzQyUzRGglM0JpJTJCJTJCKSU3QiUwQSVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMGludCUyMHMlM0RsaW5lJTVCaSU1RC5zJTJDdCUzRGxpbmUlNUJpJTVELnQlMkN4JTNEbGluZSU1QmklNUQueCUzQiUwQSVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMGludCUyMHRtcCUzRHF1ZXJ5KHQpLXF1ZXJ5KHMtMSklM0IlMkYlMkYlRTUlODUlODglRTUlODglQTQlRTYlOTYlQUQlRTUlQjclQjIlRTclQkIlOEYlRTglQTYlODYlRTclOUIlOTYlRTQlQkElODYlRTUlODclQTAlRTQlQjglQUElRTclODIlQjklMEElQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjBpZih0bXAlM0UlM0R4KSUyMGNvbnRpbnVlJTNCJTJGJTJGJUU1JUI3JUIyJUU3JUJCJThGJUU4JUE2JTg2JUU3JTlCJTk2JUU1JUFFJThDJUU2JUFGJTk1JTBBJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIweC0lM0R0bXAlM0IlMkYlMkYlRTYlQjIlQTElRTYlOUMlODklRTglQTYlODYlRTclOUIlOTYlRTUlQUUlOEMlRUYlQkMlOEMlRTglQUUlQTElRTclQUUlOTclRTglQkYlOTglRTUlODklQTklRTUlQTQlOUElRTUlQjAlOTElMEElQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjBhbnMlMkIlM0R4JTNCJTJGJTJGJUU1JTg1JTg4JUU4JUI0JUExJUU3JThDJUFFJUU3JUFEJTk0JUU2JUExJTg4JTBBJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwaW50JTIwcCUzRHQlM0IlMkYlMkYlRTQlQkIlOEUlRTUlOEMlQkElRTklOTclQjQlRTUlOEYlQjMlRTclQUIlQUYlRTclODIlQjklRTUlQkMlODAlRTUlQTclOEIlRTYlOUElQjQlRTUlOEElOUIlRTklODAlODklRTclODIlQjklMEElQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjB3aGlsZSh4KSU3QiUwQSVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMCVDMiVBMCUyMGlmKHAlM0NzKSUyMGJyZWFrJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwaWYobWFyayU1QnAlNUQpJTdCJTBBJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwcC0tJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwY29udGludWUlM0IlMEElQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlN0QlMEElQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjB4LS0lM0IlMEElQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjBtYXJrJTVCcCU1RCUzRHRydWUlM0IlMEElQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjAlQzIlQTAlMjBtb2RpZnkocCUyQzEpJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwcC0tJTNCJTBBJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJUMyJUEwJTIwJTdEJTBBJUMyJUEwJTIwJUMyJUEwJTIwJTdEJTBBJUMyJUEwJTIwJUMyJUEwJTIwY291dCUzQyUzQ2FucyUzQiUwQSVDMiVBMCUyMCVDMiVBMCUyMHJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div></div><div class="code"><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
    n=<span class="hljs-built_in">read</span>(),h=<span class="hljs-built_in">read</span>();
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=h;i++) line[i].s=<span class="hljs-built_in">read</span>(),line[i].t=<span class="hljs-built_in">read</span>(),line[i].x=<span class="hljs-built_in">read</span>();
    <span class="hljs-built_in">sort</span>(line<span class="hljs-number">+1</span>,line+h<span class="hljs-number">+1</span>,cmp);
    <span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=h;i++){
        <span class="hljs-type">int</span> s=line[i].s,t=line[i].t,x=line[i].x;
        <span class="hljs-type">int</span> tmp=<span class="hljs-built_in">query</span>(t)-<span class="hljs-built_in">query</span>(s<span class="hljs-number">-1</span>);<span class="hljs-comment">//先判断已经覆盖了几个点</span>
        <span class="hljs-keyword">if</span>(tmp&gt;=x) <span class="hljs-keyword">continue</span>;<span class="hljs-comment">//已经覆盖完毕</span>
        x-=tmp;<span class="hljs-comment">//没有覆盖完，计算还剩多少</span>
        ans+=x;<span class="hljs-comment">//先贡献答案</span>
        <span class="hljs-type">int</span> p=t;<span class="hljs-comment">//从区间右端点开始暴力选点</span>
        <span class="hljs-keyword">while</span>(x){
            <span class="hljs-keyword">if</span>(p&lt;s) <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">if</span>(mark[p]){
                p--;
                <span class="hljs-keyword">continue</span>;
            }
            x--;
            mark[p]=<span class="hljs-literal">true</span>;
            <span class="hljs-built_in">modify</span>(p,<span class="hljs-number">1</span>);
            p--;
        }
    }
    cout&lt;&lt;ans;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>（3）区间覆盖问题：按照区间左端点排序。t为当前已覆盖区间的右端点。然后依次选择区间，选择能覆盖t，且右端点最大的区间，选择后用这个区间的右端点更新t，继续选择。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="c29ydChsaW5lJTJCMSUyQ2xpbmUlMkJuJTJCMSUyQ2NtcCklM0IlMEFkb3VibGUlMjBub3clM0QwJTNCJTBBaW50JTIwaSUzRDElMkNhbnMlM0QwJTJDZmFpbCUzRDAlM0IlMEF3aGlsZShub3clM0NMKSU3QiUyRiUyRm5vdyVFNCVCOCVCQSVFNSVCRCU5MyVFNSU4OSU4RCVFNSVCNyVCMiVFNyVCQiU4RiVFOCVBNiU4NiVFNyU5QiU5NiVFNyU5QSU4NCVFNSU4RiVCMyVFNyVBQiVBRiVFNyU4MiVCOSUwQSUwOWFucyUyQiUyQiUzQiUwQSUwOWRvdWJsZSUyMHMlM0Rub3clM0IlMEElMDlmb3IoJTNCbGluZSU1QmklNUQubCUzQyUzRHMlMjYlMjZpJTNDJTNEbiUzQmklMkIlMkIpJTIwbm93JTNEbWF4KG5vdyUyQ2xpbmUlNUJpJTVELnIpJTNCJTBBJTA5aWYobm93JTNEJTNEcyUyNiUyNm5vdyUzQ0wpJTdCJTJGJTJGJUU2JUIyJUExJUU2JTlDJTg5JUU2JTg5JUJFJUU1JTg4JUIwJUU1JThGJUFGJUU0JUJCJUE1JUU4JUE2JTg2JUU3JTlCJTk2JUU1JThGJUIzJUU3JUFCJUFGJUU3JTgyJUI5JUU3JTlBJTg0JUU1JThDJUJBJUU5JTk3JUI0JUVGJUJDJThDJUU4JUFGJUI0JUU2JTk4JThFJUU2JTk3JUEwJUU4JUE3JUEzJTBBJTA5JTA5Y291dCUzQyUzQy0xJTNDJTNDZW5kbCUzQiUwQSUwOSUwOWZhaWwlM0QxJTNCJTBBJTA5JTA5YnJlYWslM0IlMEElMDklN0QlMEElN0QlMEFpZighZmFpbCklMjBjb3V0JTNDJTNDYW5zJTNDJTNDZW5kbCUzQiUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div></div><div class="code"><span class="hljs-built_in">sort</span>(line<span class="hljs-number">+1</span>,line+n<span class="hljs-number">+1</span>,cmp);
<span class="hljs-type">double</span> now=<span class="hljs-number">0</span>;
<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>,ans=<span class="hljs-number">0</span>,fail=<span class="hljs-number">0</span>;
<span class="hljs-keyword">while</span>(now&lt;L){<span class="hljs-comment">//now为当前已经覆盖的右端点</span>
	ans++;
	<span class="hljs-type">double</span> s=now;
	<span class="hljs-keyword">for</span>(;line[i].l&lt;=s&amp;&amp;i&lt;=n;i++) now=<span class="hljs-built_in">max</span>(now,line[i].r);
	<span class="hljs-keyword">if</span>(now==s&amp;&amp;now&lt;L){<span class="hljs-comment">//没有找到可以覆盖右端点的区间，说明无解</span>
		cout&lt;&lt;<span class="hljs-number">-1</span>&lt;&lt;endl;
		fail=<span class="hljs-number">1</span>;
		<span class="hljs-keyword">break</span>;
	}
}
<span class="hljs-keyword">if</span>(!fail) cout&lt;&lt;ans&lt;&lt;endl;
</div></code></pre>
<p>（4）流水作业调度问题：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 分别表示在A机器和B机器上执行需要消耗的时间。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub><mo>=</mo><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><msub><mi>a</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>b</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">m_i=min(a_i,b_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，然后将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">m[]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mopen">[</span><span class="mclose">]</span></span></span></span> 排序。然后，有两个指针 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>r</mi><mo>=</mo><mi>n</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">l=0,r=n+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>n</mi><mi>s</mi><mo stretchy="false">[</mo><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">ans[]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mclose">]</span></span></span></span> 为答案序列。遍历 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">m_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>m</mi><mi>i</mi></msub><mo>=</mo><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">m_i=a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>n</mi><mi>s</mi><mo stretchy="false">[</mo><mo>+</mo><mo>+</mo><mi>l</mi><mo stretchy="false">]</mo><mo>=</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">ans[++l]=i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>，反之 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>n</mi><mi>s</mi><mo stretchy="false">[</mo><mo>−</mo><mo>−</mo><mi>r</mi><mo stretchy="false">]</mo><mo>=</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">ans[--r]=i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mopen">[</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="c29ydCh0YXNrJTJCMSUyQ3Rhc2slMkJuJTJCMSUyQ2NtcCklM0IlMEFpbnQlMjBsJTNEMSUyQ3IlM0RuJTNCJTBBZm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSUwOWlmKHRhc2slNUJpJTVELmElM0N0YXNrJTVCaSU1RC5iKSUyMGxpJTVCbCUyQiUyQiU1RCUzRHRhc2slNUJpJTVELmluZGV4JTNCJTBBJTA5ZWxzZSUyMGxpJTVCci0tJTVEJTNEdGFzayU1QmklNUQuaW5kZXglM0IlMEElN0QlMEElMkYlMkYlRTYlOEMlODklRTclODUlQTclRTQlQjglOEIlRTklOUQlQTIlRTclOUElODQlRTYlOTYlQjklRTYlQjMlOTUlRTglQUUlQTElRTclQUUlOTclRTYlOTYlQjklRTYlQTElODglRTYlODklODAlRTclOTQlQTglRTYlOTclQjYlRTklOTclQjQlMEFpbnQlMjB0YSUzRDAlMkN0YiUzRDAlM0IlMEFmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTdCJTBBJTA5dGElMkIlM0R0JTVCbGklNUJpJTVEJTVELmElM0IlMEElMDlpZih0YiUzQ3RhKSUyMHRiJTNEdGElM0IlMEElMDl0YiUyQiUzRHQlNUJsaSU1QmklNUQlNUQuYiUzQiUwQSU3RCUwQWNvdXQlM0MlM0N0YiUzQyUzQ2VuZGwlM0IlMEFmb3IoaW50JTIwaSUzRDElM0JpJTNDbiUzQmklMkIlMkIpJTIwY291dCUzQyUzQ2xpJTVCaSU1RCUzQyUzQyclMjAnJTNCJTBBY291dCUzQyUzQ2xpJTVCbiU1RCUzQiUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div></div><div class="code"><span class="hljs-built_in">sort</span>(task<span class="hljs-number">+1</span>,task+n<span class="hljs-number">+1</span>,cmp);
<span class="hljs-type">int</span> l=<span class="hljs-number">1</span>,r=n;
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
	<span class="hljs-keyword">if</span>(task[i].a&lt;task[i].b) li[l++]=task[i].index;
	<span class="hljs-keyword">else</span> li[r--]=task[i].index;
}
<span class="hljs-comment">//按照下面的方法计算方案所用时间</span>
<span class="hljs-type">int</span> ta=<span class="hljs-number">0</span>,tb=<span class="hljs-number">0</span>;
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
	ta+=t[li[i]].a;
	<span class="hljs-keyword">if</span>(tb&lt;ta) tb=ta;
	tb+=t[li[i]].b;
}
cout&lt;&lt;tb&lt;&lt;endl;
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++) cout&lt;&lt;li[i]&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;
cout&lt;&lt;li[n];
</div></code></pre>
<p>（5）带限期和罚款的单位时间任务调度：将罚款从大到小排序。对于一个任务，从任务到期时间开始从后往前枚举时间点，如果枚举到的时间点没有被安排，那么安排当前任务。如果没有一个时间点都被安排，那么就罚款</p>
<h2 id="kang-tuo-zhan-kai" tabindex="-1">康拓展开</h2>
<p>康托展开可以求一个排列的在全部排列中的排名
如求842697513是长度为9的排列中按字典序排序的第几个排列
我们先求出比给定排列小的排列的数量
可以有如下过程求解：</p>
<ul>
<li>第一位取1到7，都可以满足，第一位贡献答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7</mn><mo>×</mo><mn>8</mn><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">7\times 8!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">8</span><span class="mclose">!</span></span></span></span></li>
<li>第一位取8，第二位取1到3，都可以满足，第二位贡献答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><mn>7</mn><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">3\times 7!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">7</span><span class="mclose">!</span></span></span></span></li>
<li>第一位取8，第二位取4，第三位取1到1，都可以满足，第三位贡献答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>×</mo><mn>6</mn><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">1\times 6!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">6</span><span class="mclose">!</span></span></span></span></li>
<li>第一位取8，第二位取4，第三位取2，第四位取1到5，都可以满足，注意这里，第四位实际上可取的数字只有1、3、5，因为2、4已经被前面取完了，因此第四位贡献答案为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mo>×</mo><mn>5</mn><mo stretchy="false">!</mo></mrow><annotation encoding="application/x-tex">3\times 5!</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">5</span><span class="mclose">!</span></span></span></span>
...
上述统计这一位能取到的数字有几个，可以用树状数组维护</li>
</ul>
<h3 id="zheng-kang-tuo-zhan-kai" tabindex="-1">正康拓展开</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwaW50JTIwa3QoY2hhciUyMHMlNUI4JTVEKSU3QiUwQSUwOWludCUyMHJlcyUzRDAlM0IlMEElMDlmb3IoaW50JTIwaSUzRDAlM0JpJTNDOCUzQmklMkIlMkIpJTdCJTBBJTA5JTA5aW50JTIwdG90JTNEMCUzQiUwQSUwOSUwOWZvcihpbnQlMjBqJTNEaSUyQjElM0JqJTNDOCUzQmolMkIlMkIpJTdCJTBBJTA5JTA5JTA5aWYocyU1QmolNUQlM0NzJTVCaSU1RCklMjB0b3QlMkIlMkIlM0IlMkYlMkYlRTYlODklQkUlRTUlOTAlOEUlRTklOUQlQTIlRTYlQUYlOTQlRTUlQkQlOTMlRTUlODklOEQlRTYlOTUlQjAlRTglQkYlOTglRTglQTYlODElRTUlQjAlOEYlRTclOUElODQlMEElMDklMDklN0QlMEElMDklMDlyZXMlMkIlM0R0b3QqZmFjKDctaSklM0IlMkYlMkYlRTglODMlQkQlRTUlQTQlOUYlRTYlOUUlOUElRTQlQjglQkUlRTUlODglQjAlRTUlODclQTAlRUYlQkMlOEMlRTUlQjAlQjElRTclOTQlQTglRTUlODclQTAlRTUlODclOEYlRTUlOEUlQkJpJTBBJTA5JTdEJTBBJTA5cmV0dXJuJTIwcmVzJTJCMSUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">kt</span><span class="hljs-params">(<span class="hljs-type">char</span> s[<span class="hljs-number">8</span>])</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">8</span>;i++){
		<span class="hljs-type">int</span> tot=<span class="hljs-number">0</span>;
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=i<span class="hljs-number">+1</span>;j&lt;<span class="hljs-number">8</span>;j++){
			<span class="hljs-keyword">if</span>(s[j]&lt;s[i]) tot++;<span class="hljs-comment">//找后面比当前数还要小的</span>
		}
		res+=tot*<span class="hljs-built_in">fac</span>(<span class="hljs-number">7</span>-i);<span class="hljs-comment">//能够枚举到几，就用几减去i</span>
	}
	<span class="hljs-keyword">return</span> res<span class="hljs-number">+1</span>;
}
</div></code></pre>
<p>还可以结合树状数组优化</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW50JTIwZmFjJTVCMTAwMDA1JTVEJTJDaW4lNUIxMDAwMDUlNUQlM0IlMEF2b2lkJTIwaW5pdCgpJTdCJTBBJTA5ZmFjJTVCMCU1RCUzRDElM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwZmFjJTVCaSU1RCUzRGZhYyU1QmktMSU1RCppJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTJDaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGFkZChpJTJDMSklM0IlMEElN0QlMEFpbnQlMjBrdCgpJTdCJTBBJTA5aW50JTIwcmVzJTNEMCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklN0IlMEElMDklMDlpbnQlMjB0b3QlM0RzdW0oaW4lNUJpJTVEKS0xJTNCJTBBJTA5JTA5YWRkKGluJTVCaSU1RCUyQy0xKSUzQiUwQSUwOSUwOXJlcyUyQiUzRHRvdCpmYWMlNUJuLWklNUQlM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjByZXMlMkIxJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div></div><div class="code"><span class="hljs-type">int</span> fac[<span class="hljs-number">100005</span>],in[<span class="hljs-number">100005</span>];
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span>{
	fac[<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) fac[i]=fac[i<span class="hljs-number">-1</span>]*i;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>,i&lt;=n;i++) <span class="hljs-built_in">add</span>(i,<span class="hljs-number">1</span>);
}
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kt</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		<span class="hljs-type">int</span> tot=<span class="hljs-built_in">sum</span>(in[i])<span class="hljs-number">-1</span>;
		<span class="hljs-built_in">add</span>(in[i],<span class="hljs-number">-1</span>);
		res+=tot*fac[n-i];
	}
	<span class="hljs-keyword">return</span> res<span class="hljs-number">+1</span>;
}
</div></code></pre>
<h3 id="ni-kang-tuo-zhan-kai" tabindex="-1">逆康拓展开</h3>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aW5saW5lJTIwdm9pZCUyMGdldChpbnQlMjBvKSU3QiUwQSUwOW8tLSUzQiUyRiUyRiVFNSU5MiU4QyVFNiVBRCVBMyVFNSVCQSVCNyVFNiU4QiU5MyVFNSVCMSU5NSVFNSVCQyU4MCVFNCVCOCU4MCVFNiVBMCVCNyUwQSUwOW1lbXNldChidSUyQzAlMkNzaXplb2YoYnUpKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklN0IlMEElMDklMDlpbnQlMjB0JTNEbyUyRmZhYyU1Qm4taSU1RCUyQjElM0IlMkYlMkYlRTUlQkQlOTMlRTUlODklOEQlRTglQkYlOTklRTQlQjglQUElRTYlOTUlQjAlRTclOUElODQlRTYlOEUlOTIlRTUlOTAlOEQlRUYlQkMlOEMlRTYlQjMlQTglRTYlODQlOEYlRTUlOEElQTAlRTQlQjglODAlMEElMDklMDlpbnQlMjBub3clM0QwJTJDaiUzRDElM0IlMkYlMkZqJUU0JUI4JUJBJUU2JTlFJTlBJUU0JUI4JUJFJUU3JTlBJTg0JUU2JTk1JUIwJUVGJUJDJThDbm93JUU0JUI4JUJBJUU1JUJEJTkzJUU1JTg5JThEJUU2JThFJTkyJUU1JTkwJThEJTBBJTA5JTA5Zm9yKCUzQmolM0MlM0RuJTNCaiUyQiUyQiklN0IlMEElMDklMDklMDlpZihidSU1QmolNUQpJTIwY29udGludWUlM0IlMkYlMkYlRTQlQjklOEIlRTUlODklOEQlRTUlQjclQjIlRTclQkIlOEYlRTYlOUUlOUElRTQlQjglQkUlRTQlQkElODYlRUYlQkMlOEMlRTglQjclQjMlRTglQkYlODclMEElMDklMDklMDlub3clMkIlMkIlM0IlMEElMDklMDklMDlpZihub3clM0QlM0R0KSUyMGJyZWFrJTNCJTJGJTJGJUU2JThFJTkyJUU1JTkwJThEJUU2JTlFJTlBJUU0JUI4JUJFJUU1JUFFJThDJUU2JUFGJTk1JTBBJTA5JTA5JTdEJTBBJTA5JTA5YnUlNUJqJTVEJTNEdHJ1ZSUzQiUwQSUwOSUwOWNvdXQlM0MlM0NqJTNDJTNDJyUyMCclM0IlMkYlMkYlRTglQkUlOTMlRTUlODclQkElMEElMDklMDlvJTI1JTNEZmFjJTVCbi1pJTVEJTNCJTJGJTJGJUU1JTg2JThEJUU2JUE4JUExJUU0JUI4JTgwJUU0JUI4JThCJUUzJTgwJTgyJUU2JUIzJUE4JUU2JTg0JThGJUU4JUJGJTk4JUU2JTk4JUFGJUU4JTgzJUJEJUU2JTlFJTlBJUU0JUI4JUJFJUU1JTg4JUIwJUU3JTlBJTg0JUU2JTlDJTgwJUU1JUE0JUE3JUU2JTk1JUIwLSVFNSVCRCU5MyVFNSU4OSU4RCVFNiU5RSU5QSVFNCVCOCVCRSVFNiU5NSVCMCUwQSUwOSU3RCUwQSUwOWNvdXQlM0MlM0NlbmRsJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div></div><div class="code"><span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">int</span> o)</span></span>{
	o--;<span class="hljs-comment">//和正康拓展开一样</span>
	<span class="hljs-built_in">memset</span>(bu,<span class="hljs-number">0</span>,<span class="hljs-built_in">sizeof</span>(bu));
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		<span class="hljs-type">int</span> t=o/fac[n-i]<span class="hljs-number">+1</span>;<span class="hljs-comment">//当前这个数的排名，注意加一</span>
		<span class="hljs-type">int</span> now=<span class="hljs-number">0</span>,j=<span class="hljs-number">1</span>;<span class="hljs-comment">//j为枚举的数，now为当前排名</span>
		<span class="hljs-keyword">for</span>(;j&lt;=n;j++){
			<span class="hljs-keyword">if</span>(bu[j]) <span class="hljs-keyword">continue</span>;<span class="hljs-comment">//之前已经枚举了，跳过</span>
			now++;
			<span class="hljs-keyword">if</span>(now==t) <span class="hljs-keyword">break</span>;<span class="hljs-comment">//排名枚举完毕</span>
		}
		bu[j]=<span class="hljs-literal">true</span>;
		cout&lt;&lt;j&lt;&lt;<span class="hljs-string">&#x27; &#x27;</span>;<span class="hljs-comment">//输出</span>
		o%=fac[n-i];<span class="hljs-comment">//再模一下。注意还是能枚举到的最大数-当前枚举数</span>
	}
	cout&lt;&lt;endl;
}
</div></code></pre>
<h2 id="shuang-xiang-bfs" tabindex="-1">双向bfs</h2>
<p>以poj1915为例</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwcWEucHVzaChtYWtlX3BhaXIoYXglMkNheSkpJTNCJTJGJTJGJUU4JUI1JUI3JUU3JTgyJUI5JTBBJTA5JTA5cWIucHVzaChtYWtlX3BhaXIoYnglMkNieSkpJTNCJTJGJTJGJUU3JUJCJTg4JUU3JTgyJUI5JTBBJTA5JTA5d2hpbGUoIXFhLmVtcHR5KCklMjYlMjYhcWIuZW1wdHkoKSklN0IlMkYlMkYlRTQlQjglQTQlRTQlQjglQUElRTklODMlQkQlRTQlQjglOEQlRTglODMlQkQlRTQlQjglQkElRTclQTklQkElMEElMDklMDklMDlwaWklMjBub3dhJTNEcWEuZnJvbnQoKSUzQnFhLnBvcCgpJTNCJTJGJTJGJUU0JUI4JUE0JUU0JUI4JUFBJUU5JTk4JTlGJUU1JTg4JTk3JUU1JTkwJTg0JUU1JThGJTk2JUU0JUI4JTgwJUU0JUI4JUFBJTBBJTA5JTA5JTA5cGlpJTIwbm93YiUzRHFiLmZyb250KCklM0JxYi5wb3AoKSUzQiUwQSUwOSUwOSUwOSUyRiUyRiVFOSU4MSU4RCVFNSU4RSU4NiVFNyU5QSU4NCVFNyU4QSVCNiVFNiU4MCU4MSVFOSU4NyU4RCVFNSU5MCU4OCUwQSUwOSUwOSUwOWlmKHZpc2ElNUJub3diLmZpcnN0JTVEJTVCbm93Yi5zZWNvbmQlNUQlN0MlN0N2aXNiJTVCbm93YS5maXJzdCU1RCU1Qm5vd2Euc2Vjb25kJTVEKSU3QiUwQSUwOSUwOSUwOSUwOWNvdXQlM0MlM0NjbnRhJTVCbm93Yi5maXJzdCU1RCU1Qm5vd2Iuc2Vjb25kJTVEJTJCY250YiU1Qm5vd2IuZmlyc3QlNUQlNUJub3diLnNlY29uZCU1RCUzQyUzQ2VuZGwlM0IlMEElMDklMDklMDklMDlicmVhayUzQiUwQSUwOSUwOSUwOSU3RCUwQSUwOSUwOSUwOWZvcihpbnQlMjBpJTNEMCUzQmklM0M4JTNCaSUyQiUyQiklN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMkYlMkYlRTQlQjglQTQlRTglQkUlQjklRTUlOTAlODQlRTglODclQUElRTYlODklQTklRTUlQjElOTUlMEElMDklMDklMDklMDlpbnQlMjBueCUyQ255JTNCJTBBJTA5JTA5JTA5JTA5bnglM0Rub3dhLmZpcnN0JTJCZHglNUJpJTVEJTNCJTBBJTA5JTA5JTA5JTA5bnklM0Rub3dhLnNlY29uZCUyQmR5JTVCaSU1RCUzQiUwQSUwOSUwOSUwOSUwOWlmKG54JTNFJTNEMCUyNiUyNm54JTNDayUyNiUyNm55JTNFJTNEMCUyNiUyNm55JTNDayklN0IlMEElMDklMDklMDklMDklMDlpZighdmlzYSU1Qm54JTVEJTVCbnklNUQpJTdCJTBBJTA5JTA5JTA5JTA5JTA5JTA5Y250YSU1Qm54JTVEJTVCbnklNUQlM0RjbnRhJTVCbm93YS5maXJzdCU1RCU1Qm5vd2Euc2Vjb25kJTVEJTJCMSUzQiUwQSUwOSUwOSUwOSUwOSUwOSUwOXZpc2ElNUJueCU1RCU1Qm55JTVEJTNEdHJ1ZSUzQiUwQSUwOSUwOSUwOSUwOSUwOSUwOXFhLnB1c2gobWFrZV9wYWlyKG54JTJDbnkpKSUzQiUwQSUwOSUwOSUwOSUwOSUwOSU3RCUwQSUwOSUwOSUwOSUwOSU3RCUwQSUwOSUwOSUwOSUwOW54JTNEbm93Yi5maXJzdCUyQmR4JTVCaSU1RCUzQiUwQSUwOSUwOSUwOSUwOW55JTNEbm93Yi5zZWNvbmQlMkJkeSU1QmklNUQlM0IlMEElMDklMDklMDklMDlpZihueCUzRSUzRDAlMjYlMjZueCUzQ2slMjYlMjZueSUzRSUzRDAlMjYlMjZueSUzQ2spJTdCJTBBJTA5JTA5JTA5JTA5JTA5aWYoIXZpc2IlNUJueCU1RCU1Qm55JTVEKSU3QiUwQSUwOSUwOSUwOSUwOSUwOSUwOWNudGIlNUJueCU1RCU1Qm55JTVEJTNEY250YiU1Qm5vd2IuZmlyc3QlNUQlNUJub3diLnNlY29uZCU1RCUyQjElM0IlMEElMDklMDklMDklMDklMDklMDl2aXNiJTVCbnglNUQlNUJueSU1RCUzRHRydWUlM0IlMEElMDklMDklMDklMDklMDklMDlxYi5wdXNoKG1ha2VfcGFpcihueCUyQ255KSklM0IlMEElMDklMDklMDklMDklMDklN0QlMEElMDklMDklMDklMDklN0QlMEElMDklMDklMDklN0QlMEElMDklMDklN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div></div><div class="code">        qa.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">make_pair</span>(ax,ay));<span class="hljs-comment">//起点</span>
		qb.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">make_pair</span>(bx,by));<span class="hljs-comment">//终点</span>
		<span class="hljs-keyword">while</span>(!qa.<span class="hljs-built_in">empty</span>()&amp;&amp;!qb.<span class="hljs-built_in">empty</span>()){<span class="hljs-comment">//两个都不能为空</span>
			pii nowa=qa.<span class="hljs-built_in">front</span>();qa.<span class="hljs-built_in">pop</span>();<span class="hljs-comment">//两个队列各取一个</span>
			pii nowb=qb.<span class="hljs-built_in">front</span>();qb.<span class="hljs-built_in">pop</span>();
			<span class="hljs-comment">//遍历的状态重合</span>
			<span class="hljs-keyword">if</span>(visa[nowb.first][nowb.second]||visb[nowa.first][nowa.second]){
				cout&lt;&lt;cnta[nowb.first][nowb.second]+cntb[nowb.first][nowb.second]&lt;&lt;endl;
				<span class="hljs-keyword">break</span>;
			}
			<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">8</span>;i++){
                <span class="hljs-comment">//两边各自扩展</span>
				<span class="hljs-type">int</span> nx,ny;
				nx=nowa.first+dx[i];
				ny=nowa.second+dy[i];
				<span class="hljs-keyword">if</span>(nx&gt;=<span class="hljs-number">0</span>&amp;&amp;nx&lt;k&amp;&amp;ny&gt;=<span class="hljs-number">0</span>&amp;&amp;ny&lt;k){
					<span class="hljs-keyword">if</span>(!visa[nx][ny]){
						cnta[nx][ny]=cnta[nowa.first][nowa.second]<span class="hljs-number">+1</span>;
						visa[nx][ny]=<span class="hljs-literal">true</span>;
						qa.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">make_pair</span>(nx,ny));
					}
				}
				nx=nowb.first+dx[i];
				ny=nowb.second+dy[i];
				<span class="hljs-keyword">if</span>(nx&gt;=<span class="hljs-number">0</span>&amp;&amp;nx&lt;k&amp;&amp;ny&gt;=<span class="hljs-number">0</span>&amp;&amp;ny&lt;k){
					<span class="hljs-keyword">if</span>(!visb[nx][ny]){
						cntb[nx][ny]=cntb[nowb.first][nowb.second]<span class="hljs-number">+1</span>;
						visb[nx][ny]=<span class="hljs-literal">true</span>;
						qb.<span class="hljs-built_in">push</span>(<span class="hljs-built_in">make_pair</span>(nx,ny));
					}
				}
			}
		}
</div></code></pre>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="aWYocCUzRCUzRGIuc2l6ZSgpKSUyMGFucyUyQiUyQiUyQ3AlM0QwJTNCJTIwJTJGJTJGcCUzRDAlRUYlQkMlOEMlRTklOTglQjIlRTYlQUQlQTIlRTklODclOEQlRTUlQTQlOEQlRTUlOEMlQjklRTklODUlOEQlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div></div><div class="code"><span class="hljs-keyword">if</span>(p==b.<span class="hljs-built_in">size</span>()) ans++,p=<span class="hljs-number">0</span>; <span class="hljs-comment">//p=0，防止重复匹配</span>
</div></code></pre>
<h2 id="mo-ni-tui-huo" tabindex="-1">模拟退火</h2>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="Y29uc3QlMjBkb3VibGUlMjBkdCUzRDAuOTExMiUzQiUwQWludCUyMGFucyUzRDB4M2YzZjNmM2YzZjNmM2YzZiUzQiUyRiUyRiVFNSU4NSU4OCVFNiU5QyU4OSVFNCVCOCVBQSVFNSU4NSVBOCVFNSVCMSU4MCVFNyVBRCU5NCVFNiVBMSU4OCUwQXZvaWQlMjBzYShkb3VibGUlMjB0KSU3QiUwQSUyMCUyMCUyMCUyMGludCUyMHRtcCUzRDB4M2YzZjNmM2YzZjNmM2YzZiUzQiUyRiUyRiVFNiU5QyU4OSVFNCVCOCVBQSVFNSVCMSU4MCVFOSU4MyVBOCVFNyVBRCU5NCVFNiVBMSU4OCUwQSUwOXdoaWxlKHQlM0UxZS0xMCklN0IlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMkYlMkYlRTglQkYlOTklRTklODclOEMlRTglQkYlOUIlRTglQTElOEMlRTklOUElOEYlRTYlOUMlQkElRTYlOTMlOEQlRTQlQkQlOUMlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMkYlMkYlRTglQUUlQjAlRTUlQkQlOTUlRTQlQjglOEIlRTYlOTMlOEQlRTQlQkQlOUMlRTUlODklOEQlRTclOUElODQlRTclQUQlOTQlRTYlQTElODhBJUU1JTkyJThDJUU2JTkzJThEJUU0JUJEJTlDJUU1JTkwJThFJUU3JTlBJTg0JUU3JUFEJTk0JUU2JUExJTg4QiUwQSUwOSUwOWludCUyMGQlM0RCLUElM0IlMkYlMkYlRTYlOEIlQkYlRTYlOTMlOEQlRTQlQkQlOUMlRTUlOTAlOEUlRTclOUElODQlRTUlODclOEYlRTUlOEUlQkIlRTYlOTMlOEQlRTQlQkQlOUMlRTUlODklOEQlRTclOUElODQlRUYlQkMlOEMlRTglQkYlOTklRTklODclOEMlRTYlOTglQUYlRTclQUQlOTQlRTYlQTElODglRTglQjYlOEElRTUlQjAlOEYlRTglQjYlOEElRTUlQTUlQkQlRTMlODAlODIlRTUlOEYlOEQlRTQlQjklOEIlRTUlQjAlQjFBLUIlRTMlODAlODIlRTYlODAlQkIlRTQlQjklOEJkJUU0JUI4JUJBJUU3JUFEJTk0JUU2JUExJTg4JUU3JTlBJTg0JUU1JUI3JUFFJUU4JUI3JTlEJUVGJUJDJThDJUU1JUJGJTg1JUU5JUExJUJCJUU0JUI4JUJBJUU2JUFEJUEzJTBBJTA5JTA5aWYoZCUzQzAlN0MlN0MoZXhwKGQlMkZ0KSpSQU5EX01BWCUzQ3JhbmQoKSkpJTdCJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTJGJTJGJUU2JThFJUE1JUU1JThGJTk3JUU3JUFEJTk0JUU2JUExJTg4JUU0JUJBJTg2JTBBJTA5JTA5JTdEZWxzZSU3QiUyRiUyRiVFNSVBNiU4MiVFNiU5RSU5QyVFNyVBRCU5NCVFNiVBMSU4OCVFNCVCOCU4RCVFNCVCQyU5OCVFRiVCQyU4QyVFNCVCOCU5NCVFNiVCOCVBOSVFNSVCQSVBNiVFNCVCOCU4QiVFOSU5OSU4RCVFNSU4OCVCMCVFNCVCOCVCNCVFNyU5NSU4QyVFRiVCQyU4QyVFNSVCMCVCMSVFNCVCOCU4RCVFNiU4RSVBNSVFNSU4RiU5NyVFNyVBRCU5NCVFNiVBMSU4OCUwQSUwOSUwOSUwOSUyRiUyRiVFOCVCRiU5OSVFOSU4NyU4QyVFOCVCRiU5QiVFOCVBMSU4QyVFNiU5MiVBNCVFOSU5NCU4MCVFNiU5MyU4RCVFNCVCRCU5QyUwQSUwOSUwOSU3RCUwQSUwOSUwOXQqJTNEZHQlM0IlMEElMDklN0QlMEElMDlhbnMlM0RtaW4oYW5zJTJDdG1wKSUzQiUyRiUyRiVFNSVCMCU4NiVFNSVCMSU4MCVFOSU4MyVBOCVFNyVBRCU5NCVFNiVBMSU4OCVFNiU4RSVBOCVFOSU4MCU4MSVFNSU4OCVCMCVFNSU4NSVBOCVFNSVCMSU4MCUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div></div><div class="code"><span class="hljs-type">const</span> <span class="hljs-type">double</span> dt=<span class="hljs-number">0.9112</span>;
<span class="hljs-type">int</span> ans=<span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>;<span class="hljs-comment">//先有个全局答案</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sa</span><span class="hljs-params">(<span class="hljs-type">double</span> t)</span></span>{
    <span class="hljs-type">int</span> tmp=<span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>;<span class="hljs-comment">//有个局部答案</span>
	<span class="hljs-keyword">while</span>(t&gt;<span class="hljs-number">1e-10</span>){
        <span class="hljs-comment">//这里进行随机操作</span>
        <span class="hljs-comment">//记录下操作前的答案A和操作后的答案B</span>
		<span class="hljs-type">int</span> d=B-A;<span class="hljs-comment">//拿操作后的减去操作前的，这里是答案越小越好。反之就A-B。总之d为答案的差距，必须为正</span>
		<span class="hljs-keyword">if</span>(d&lt;<span class="hljs-number">0</span>||(<span class="hljs-built_in">exp</span>(d/t)*RAND_MAX&lt;<span class="hljs-built_in">rand</span>())){
            <span class="hljs-comment">//接受答案了</span>
		}<span class="hljs-keyword">else</span>{<span class="hljs-comment">//如果答案不优，且温度下降到临界，就不接受答案</span>
			<span class="hljs-comment">//这里进行撤销操作</span>
		}
		t*=dt;
	}
	ans=<span class="hljs-built_in">min</span>(ans,tmp);<span class="hljs-comment">//将局部答案推送到全局</span>
}
</div></code></pre>
<p>一般要进行1000-3000多次模拟退火，具体可以卡时
又一个例子
<strong>P3878 [TJOI2010]分金币</strong></p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2NtYXRoJTNFJTBBJTIzaW5jbHVkZSUzQ2N0aW1lJTNFJTBBJTIzaW5jbHVkZSUzQ2FsZ29yaXRobSUzRSUwQSUyM2RlZmluZSUyMGludCUyMGxvbmclMjBsb25nJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEFpbnQlMjBpbiU1QjMxJTVEJTJDbiUyQ2JsJTVCMzElNUQlMkNzdW0lNUIzJTVEJTJDY250JTVCMyU1RCUyQ3QlM0IlMEFjb25zdCUyMGRvdWJsZSUyMGR0JTNEMC45MTEyJTNCJTBBaW50JTIwYW5zJTNEMHgzZjNmM2YzZjNmM2YzZjNmJTNCJTBBdm9pZCUyMHNhKGRvdWJsZSUyMHQpJTdCJTBBJTIwJTIwJTIwJTIwJTJGJTJGJUU1JTg1JTg4JUU5JTlBJThGJUU2JTlDJUJBJUU1JTg3JUJBJUU0JUI4JTgwJUU0JUI4JUFBJUU2JTk2JUI5JUU2JUExJTg4JTBBJTA5Y250JTVCMSU1RCUzRDAlMkNjbnQlNUIyJTVEJTNEMCUzQiUwQSUwOXN1bSU1QjElNUQlM0QwJTJDc3VtJTVCMiU1RCUzRDAlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTdCJTBBJTA5JTA5aWYoY250JTVCMSU1RCUzRWNudCU1QjIlNUQpJTdCJTBBJTA5JTA5JTA5YmwlNUJpJTVEJTNEMiUzQiUwQSUwOSUwOSUwOWNudCU1QjIlNUQlMkIlMkIlM0IlMEElMDklMDklMDlzdW0lNUIyJTVEJTJCJTNEaW4lNUJpJTVEJTNCJTBBJTA5JTA5JTdEZWxzZSUyMGlmKGNudCU1QjIlNUQlM0VjbnQlNUIxJTVEKSU3QiUwQSUwOSUwOSUwOWJsJTVCaSU1RCUzRDElM0IlMEElMDklMDklMDljbnQlNUIxJTVEJTJCJTJCJTNCJTBBJTA5JTA5JTA5c3VtJTVCMSU1RCUyQiUzRGluJTVCaSU1RCUzQiUwQSUwOSUwOSU3RGVsc2UlN0IlMEElMDklMDklMDlibCU1QmklNUQlM0RyYW5kKCklMjUyJTJCMSUzQiUwQSUwOSUwOSUwOWNudCU1QmJsJTVCaSU1RCU1RCUyQiUyQiUzQiUwQSUwOSUwOSUwOXN1bSU1QmJsJTVCaSU1RCU1RCUyQiUzRGluJTVCaSU1RCUzQiUwQSUwOSUwOSU3RCUwQSUwOSU3RCUwQSUwOWludCUyMHRtcCUzRGFicyhzdW0lNUIxJTVELXN1bSU1QjIlNUQpJTNCJTBBJTIwJTIwJTIwJTIwJTJGJTJGJUU3JTg0JUI2JUU1JTkwJThFJUU1JUJDJTgwJUU1JUE3JThCJUU2JUE4JUExJUU2JThCJTlGJUU5JTgwJTgwJUU3JTgxJUFCJTBBJTA5d2hpbGUodCUzRTFlLTEwKSU3QiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyRiUyRiVFNiVBRiU4RiVFNiVBQyVBMSVFOSU5QSU4RiVFNiU5QyVCQSVFNCVCQSVBNCVFNiU4RCVBMiVFNCVCOCVBNCVFNCVCOCVBQSVFNCVCRCU4RCVFNyVCRCVBRSUwQSUwOSUwOWludCUyMHglM0RyYW5kKCklMjVuJTJCMSUzQiUwQSUwOSUwOWludCUyMHklM0RyYW5kKCklMjVuJTJCMSUzQiUwQSUwOSUwOXN1bSU1QmJsJTVCeCU1RCU1RC0lM0RpbiU1QnglNUQlM0IlMEElMDklMDlzdW0lNUJibCU1QnklNUQlNUQtJTNEaW4lNUJ5JTVEJTNCJTBBJTA5JTA5c3dhcChpbiU1QnglNUQlMkNpbiU1QnklNUQpJTNCJTBBJTA5JTA5c3VtJTVCYmwlNUJ4JTVEJTVEJTJCJTNEaW4lNUJ4JTVEJTNCJTBBJTA5JTA5c3VtJTVCYmwlNUJ5JTVEJTVEJTJCJTNEaW4lNUJ5JTVEJTNCJTBBJTA5JTA5aW50JTIwYmFjayUzRHRtcCUzQiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyRiUyRiVFNSU4NSU4OCVFNiU4RSVBNSVFNSU4RiU5NyVFNyVBRCU5NCVFNiVBMSU4OCUwQSUwOSUwOXRtcCUzRGFicyhzdW0lNUIxJTVELXN1bSU1QjIlNUQpJTNCJTBBJTA5JTA5aW50JTIwZCUzRHRtcC1iYWNrJTNCJTBBJTA5JTA5aWYoZCUzQzAlN0MlN0MoZXhwKGQlMkZ0KSpSQU5EX01BWCUzQ3JhbmQoKSkpJTdCJTBBJTA5JTA5JTA5JTJGJTJGY291dCUzQyUzQyUyMmFjJTIyJTNDJTNDZW5kbCUzQiUwQSUwOSUwOSU3RGVsc2UlN0IlMkYlMkYlRTUlQTYlODIlRTYlOUUlOUMlRTclQUQlOTQlRTYlQTElODglRTQlQjglOEQlRTQlQkMlOTglRUYlQkMlOEMlRTQlQjglOTQlRTYlQjglQTklRTUlQkElQTYlRTQlQjglOEIlRTklOTklOEQlRTUlODglQjAlRTQlQjglQjQlRTclOTUlOEMlRUYlQkMlOEMlRTUlQjAlQjElRTQlQjglOEQlRTYlOEUlQTUlRTUlOEYlOTclRTclQUQlOTQlRTYlQTElODglMEElMDklMDklMDlzdW0lNUJibCU1QnglNUQlNUQtJTNEaW4lNUJ4JTVEJTNCJTBBJTA5JTA5JTA5c3VtJTVCYmwlNUJ5JTVEJTVELSUzRGluJTVCeSU1RCUzQiUwQSUwOSUwOSUwOXN3YXAoaW4lNUJ4JTVEJTJDaW4lNUJ5JTVEKSUzQiUwQSUwOSUwOSUwOXN1bSU1QmJsJTVCeCU1RCU1RCUyQiUzRGluJTVCeCU1RCUzQiUwQSUwOSUwOSUwOXN1bSU1QmJsJTVCeSU1RCU1RCUyQiUzRGluJTVCeSU1RCUzQiUwQSUwOSUwOSUwOXRtcCUzRGJhY2slM0IlMEElMDklMDklN0QlMEElMDklMDl0KiUzRGR0JTNCJTBBJTA5JTdEJTBBJTA5YW5zJTNEbWluKGFucyUyQ3RtcCklM0IlMkYlMkYlRTUlQjAlODYlRTUlQjElODAlRTklODMlQTglRTclQUQlOTQlRTYlQTElODglRTYlOEUlQTglRTklODAlODElRTUlODglQjAlRTUlODUlQTglRTUlQjElODAlMEElN0QlMEF2b2lkJTIwc3VidGFzayhpbnQlMjBrKSU3QiUwQSUwOWFucyUzRDB4M2YzZjNmM2YzZjNmM2YzZiUzQiUwQSUwOWNpbiUzRSUzRW4lM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwY2luJTNFJTNFaW4lNUJpJTVEJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRDEwMDAlM0JpJTJCJTJCKSUyMHNhKDUwMDApJTNCJTJGJTJGJUU1JUE0JTlBJUU2JUFDJUExJUU2JUE4JUExJUU2JThCJTlGJUU5JTgwJTgwJUU3JTgxJUFCJTBBJTA5Y291dCUzQyUzQ2FucyUzQyUzQ2VuZGwlM0IlMEElN0QlMEFzaWduZWQlMjBtYWluKCklN0IlMEElMDlzcmFuZCgodW5zaWduZWQpdGltZShOVUxMKSklM0IlMEElMDljaW4lM0UlM0V0JTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRHQlM0JpJTJCJTJCKSU3QiUwQSUwOSUwOXN1YnRhc2soaSklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div><div>70</div><div>71</div><div>72</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cmath&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;ctime&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-type">int</span> in[<span class="hljs-number">31</span>],n,bl[<span class="hljs-number">31</span>],sum[<span class="hljs-number">3</span>],cnt[<span class="hljs-number">3</span>],t;
<span class="hljs-type">const</span> <span class="hljs-type">double</span> dt=<span class="hljs-number">0.9112</span>;
<span class="hljs-type">int</span> ans=<span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sa</span><span class="hljs-params">(<span class="hljs-type">double</span> t)</span></span>{
    <span class="hljs-comment">//先随机出一个方案</span>
	cnt[<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>,cnt[<span class="hljs-number">2</span>]=<span class="hljs-number">0</span>;
	sum[<span class="hljs-number">1</span>]=<span class="hljs-number">0</span>,sum[<span class="hljs-number">2</span>]=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		<span class="hljs-keyword">if</span>(cnt[<span class="hljs-number">1</span>]&gt;cnt[<span class="hljs-number">2</span>]){
			bl[i]=<span class="hljs-number">2</span>;
			cnt[<span class="hljs-number">2</span>]++;
			sum[<span class="hljs-number">2</span>]+=in[i];
		}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(cnt[<span class="hljs-number">2</span>]&gt;cnt[<span class="hljs-number">1</span>]){
			bl[i]=<span class="hljs-number">1</span>;
			cnt[<span class="hljs-number">1</span>]++;
			sum[<span class="hljs-number">1</span>]+=in[i];
		}<span class="hljs-keyword">else</span>{
			bl[i]=<span class="hljs-built_in">rand</span>()%<span class="hljs-number">2</span><span class="hljs-number">+1</span>;
			cnt[bl[i]]++;
			sum[bl[i]]+=in[i];
		}
	}
	<span class="hljs-type">int</span> tmp=<span class="hljs-built_in">abs</span>(sum[<span class="hljs-number">1</span>]-sum[<span class="hljs-number">2</span>]);
    <span class="hljs-comment">//然后开始模拟退火</span>
	<span class="hljs-keyword">while</span>(t&gt;<span class="hljs-number">1e-10</span>){
        <span class="hljs-comment">//每次随机交换两个位置</span>
		<span class="hljs-type">int</span> x=<span class="hljs-built_in">rand</span>()%n<span class="hljs-number">+1</span>;
		<span class="hljs-type">int</span> y=<span class="hljs-built_in">rand</span>()%n<span class="hljs-number">+1</span>;
		sum[bl[x]]-=in[x];
		sum[bl[y]]-=in[y];
		<span class="hljs-built_in">swap</span>(in[x],in[y]);
		sum[bl[x]]+=in[x];
		sum[bl[y]]+=in[y];
		<span class="hljs-type">int</span> back=tmp;
        <span class="hljs-comment">//先接受答案</span>
		tmp=<span class="hljs-built_in">abs</span>(sum[<span class="hljs-number">1</span>]-sum[<span class="hljs-number">2</span>]);
		<span class="hljs-type">int</span> d=tmp-back;
		<span class="hljs-keyword">if</span>(d&lt;<span class="hljs-number">0</span>||(<span class="hljs-built_in">exp</span>(d/t)*RAND_MAX&lt;<span class="hljs-built_in">rand</span>())){
			<span class="hljs-comment">//cout&lt;&lt;&quot;ac&quot;&lt;&lt;endl;</span>
		}<span class="hljs-keyword">else</span>{<span class="hljs-comment">//如果答案不优，且温度下降到临界，就不接受答案</span>
			sum[bl[x]]-=in[x];
			sum[bl[y]]-=in[y];
			<span class="hljs-built_in">swap</span>(in[x],in[y]);
			sum[bl[x]]+=in[x];
			sum[bl[y]]+=in[y];
			tmp=back;
		}
		t*=dt;
	}
	ans=<span class="hljs-built_in">min</span>(ans,tmp);<span class="hljs-comment">//将局部答案推送到全局</span>
}
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span>{
	ans=<span class="hljs-number">0x3f3f3f3f3f3f3f3f</span>;
	cin&gt;&gt;n;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;in[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">1000</span>;i++) <span class="hljs-built_in">sa</span>(<span class="hljs-number">5000</span>);<span class="hljs-comment">//多次模拟退火</span>
	cout&lt;&lt;ans&lt;&lt;endl;
}
<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-built_in">srand</span>((<span class="hljs-type">unsigned</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));
	cin&gt;&gt;t;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=t;i++){
		<span class="hljs-built_in">subtask</span>(i);
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
