<div class="alert alert-success"><div class="icon"><svg focusable="false" aria-hidden="true" viewBox="0 0 24 24"><path d="M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"></path></svg></div><div class="message"><div class="title"> 说明</div><p>本篇文章是举行在2022年12月17日的 CZOI Online #2 的题解</p>
<p>比赛页：<a href="https://www.luogu.com.cn/contest/94623">https://www.luogu.com.cn/contest/94623</a></p>
<p>T1黑盒（仅有部分数据）：<a href="https://www.luogu.com.cn/problem/T297881">https://www.luogu.com.cn/problem/T297881</a></p>
<p>T2序列：<a href="https://www.luogu.com.cn/problem/T256382">https://www.luogu.com.cn/problem/T256382</a></p>
<p>T3滚动（仅有部分数据）：<a href="https://www.luogu.com.cn/problem/T297950">https://www.luogu.com.cn/problem/T297950</a></p>
<p>T4南瓜：<a href="https://www.luogu.com.cn/problem/T256110">https://www.luogu.com.cn/problem/T256110</a></p>
</div></div>
<h2 id="t1-hei-he" tabindex="-1">T1 黑盒</h2>
<h3 id="suan-fa-ling" tabindex="-1">算法零</h3>
<p>注意到测试点11-12的操作2和3都是0，也就是执行操作4时第三个黑盒中没有数字。这样，对于每个操作4全部输出0即可。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2RlcXVlJTNFJTBBJTIzaW5jbHVkZSUzQ2NzdGRpbyUzRSUwQSUyM2luY2x1ZGUlM0Nzc3RyZWFtJTNFJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbmxpbmUlMjBpbnQlMjByZWFkKCklN0IlMEElMDlpbnQlMjByZXMlM0QwJTJDY2glM0RnZXRjaGFyKCklMkNmJTNEMSUzQiUwQSUwOXdoaWxlKCFpc2RpZ2l0KGNoKSUyMGFuZCUyMGNoISUzREVPRiklN0IlMEElMDklMDlpZihjaCUzRCUzRCctJyklMjBmJTNELTElM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXdoaWxlKGlzZGlnaXQoY2gpKSU3QiUwQSUwOSUwOXJlcyUzRChyZXMlM0MlM0MzKSUyQihyZXMlM0MlM0MxKSUyQihjaC0nMCcpJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjByZXMqZiUzQiUwQSU3RCUwQSUwQWludCUyMGElNUIxMDAzJTVEJTNCJTBBaW50JTIwbWFpbigpJTdCJTBBJTA5aW50JTIwbiUzRHJlYWQoKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjBhJTVCaSU1RCUzRHJlYWQoKSUzQiUwQSUwOWludCUyMHElM0RyZWFkKCklM0IlMEElMDlpbnQlMjBwJTNEMSUzQiUwQSUwOXN0cmluZyUyMHN0ciUzQiUwQSUwOWNpbiUzRSUzRXN0ciUzQiUwQSUwQSUwOWZvcihpbnQlMjBpJTNEMCUzQmklM0NzdHIuc2l6ZSgpJTNCaSUyQiUyQiklN0IlMEElMDklMDljaGFyJTIwb3B0JTNEc3RyJTVCaSU1RCUzQiUwQSUwOSUwOWlmKG9wdCUzRCUzRCc0JyklMjBjb3V0JTNDJTNDMCUzQyUzQ2VuZGwlM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;deque&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;sstream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

<span class="hljs-type">int</span> a[<span class="hljs-number">1003</span>];
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> n=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">read</span>();
	<span class="hljs-type">int</span> q=<span class="hljs-built_in">read</span>();
	<span class="hljs-type">int</span> p=<span class="hljs-number">1</span>;
	string str;
	cin&gt;&gt;str;

	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-type">char</span> opt=str[i];
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;4&#x27;</span>) cout&lt;&lt;<span class="hljs-number">0</span>&lt;&lt;endl;
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span> 期望得分10pts。</p>
<h3 id="suan-fa-yi" tabindex="-1">算法一</h3>
<p>注意到题目的数据范围有一个不起眼的约定：所有操作结束之后，黑盒二和三中没有数。结合测试点#1-4中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>q</mi><mrow><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn></mrow></msub></mrow><annotation encoding="application/x-tex">q_{1,2,3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>的范围，我们不难发现我们并不需要处理“无穷多个”这一条件，直接把最开始读入的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> 个数作为黑盒一中的数即可。</p>
<p>然后考虑一个朴素的暴力：对于操作1，给每次加入的数打一个时间戳，将数放到vector里。操作2和3时，将所有数按时间戳排序，选择满足题意的数加入到黑盒三中。</p>
<p>然后我们做进一步思考，题目中的“无限个”实质上就是最开始的n个数无限循环下去。我们可以记录一个指针p，每次加入数时加入指针p指向的数，并右移指针。当指针p的位置大于n时，让指针重新指向1这个位置。这样就可以达到循环的效果。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEF1c2luZyUyMG5hbWVzcGFjZSUyMHN0ZCUzQiUwQSUwQWlubGluZSUyMGludCUyMHJlYWQoKSU3QiUwQSUwOWludCUyMHJlcyUzRDAlMkNjaCUzRGdldGNoYXIoKSUyQ2YlM0QxJTNCJTBBJTA5d2hpbGUoIWlzZGlnaXQoY2gpJTIwYW5kJTIwY2ghJTNERU9GKSU3QiUwQSUwOSUwOWlmKGNoJTNEJTNEJy0nKSUyMGYlM0QtMSUzQiUwQSUwOSUwOWNoJTNEZ2V0Y2hhcigpJTNCJTBBJTA5JTdEJTBBJTA5d2hpbGUoaXNkaWdpdChjaCkpJTdCJTBBJTA5JTA5cmVzJTNEKHJlcyUzQyUzQzMpJTJCKHJlcyUzQyUzQzEpJTJCKGNoLScwJyklM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXJldHVybiUyMHJlcypmJTNCJTBBJTdEJTBBJTBBc3RyaW5nc3RyZWFtJTIwYmxhY2slM0IlMEFib29sJTIwZmxhZyUzRGZhbHNlJTNCJTBBaW5saW5lJTIwdm9pZCUyMGFkZChpbnQlMjB4KSU3QiUwQSUwOSUyRiUyRiUyRmNvdXQlM0MlM0MlMjJhZGQlMjIlM0MlM0N4JTNDJTNDZW5kbCUzQiUwQSUwOWlmKHglM0QlM0QwJTI2JTI2IWZsYWcpJTIwcmV0dXJuJTNCJTBBJTA5ZmxhZyUzRHRydWUlM0IlMEElMDlibGFjayUzQyUzQ3glM0IlMEElN0QlMEElMEFpbnQlMjBhJTVCMTAwMyU1RCUyQ190aW1lJTNCJTBBdHlwZWRlZiUyMHBhaXIlM0NpbnQlMkNpbnQlM0UlMjBwaWklM0IlMEF2ZWN0b3IlM0NwaWklM0UlMjB2ZSUzQiUwQWludCUyMG1haW4oKSU3QiUwQSUwOWludCUyMG4lM0RyZWFkKCklM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwYSU1QmklNUQlM0RyZWFkKCklM0IlMEElMDlpbnQlMjBxJTNEcmVhZCgpJTNCJTBBJTA5aW50JTIwcCUzRDElM0IlMEElMDlzdHJpbmclMjBzdHIlM0IlMEElMDljaW4lM0UlM0VzdHIlM0IlMEElMEElMDlmb3IoaW50JTIwaSUzRDAlM0JpJTNDc3RyLnNpemUoKSUzQmklMkIlMkIpJTdCJTBBJTA5JTA5Y2hhciUyMG9wdCUzRHN0ciU1QmklNUQlM0IlMEElMDklMDlpZihvcHQlM0QlM0QnMScpJTdCJTBBJTA5JTA5JTA5dmUucHVzaF9iYWNrKHBpaSglMkIlMkJfdGltZSUyQ2ElNUJwJTVEKSklM0IlMEElMDklMDklMDlwJTJCJTJCJTNCJTBBJTA5JTA5JTA5aWYocCUzRW4pJTIwcC0lM0RuJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTA5aWYob3B0JTNEJTNEJzInKSU3QiUwQSUwOSUwOSUwOXNvcnQodmUuYmVnaW4oKSUyQ3ZlLmVuZCgpJTJDJTVCJTVEKHBpaSUyMHglMkNwaWklMjB5KSU3QiUwQSUwOSUwOSUwOSUwOXJldHVybiUyMHguZmlyc3QlM0N5LmZpcnN0JTNCJTBBJTA5JTA5JTA5JTdEKSUzQiUwQSUwOSUwOSUwOWFkZCh2ZSU1QjAlNUQuc2Vjb25kKSUzQiUwQSUwOSUwOSUwOXZlLmVyYXNlKHZlLmJlZ2luKCkpJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTA5aWYob3B0JTNEJTNEJzMnKSU3QiUwQSUwOSUwOSUwOXNvcnQodmUuYmVnaW4oKSUyQ3ZlLmVuZCgpJTJDJTVCJTVEKHBpaSUyMHglMkNwaWklMjB5KSU3QiUwQSUwOSUwOSUwOSUwOXJldHVybiUyMHguZmlyc3QlM0V5LmZpcnN0JTNCJTBBJTA5JTA5JTA5JTdEKSUzQiUwQSUwOSUwOSUwOWFkZCh2ZSU1QjAlNUQuc2Vjb25kKSUzQiUwQSUwOSUwOSUwOXZlLmVyYXNlKHZlLmJlZ2luKCkpJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTA5aWYob3B0JTNEJTNEJzQnKSU3QiUwQSUwOSUwOSUwOWlmKCFmbGFnKSU3QiUwQSUwOSUwOSUwOSUwOWNvdXQlM0MlM0MnMCclM0MlM0NlbmRsJTNCJTBBJTA5JTA5JTA5JTdEZWxzZSU3QiUwQSUwOSUwOSUwOSUwOWNvdXQlM0MlM0NibGFjay5zdHIoKSUzQyUzQ2VuZGwlM0IlMEElMDklMDklMDklMDlmbGFnJTNEZmFsc2UlM0IlMEElMDklMDklMDklMDlibGFjay5zdHIoJTIyJTIyKSUzQiUwQSUwOSUwOSUwOSU3RCUwQSUwOSUwOSU3RCUwQSUwOSU3RCUwQSUwOXJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

stringstream black;
<span class="hljs-type">bool</span> flag=<span class="hljs-literal">false</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>{
	<span class="hljs-comment">///cout&lt;&lt;&quot;add&quot;&lt;&lt;x&lt;&lt;endl;</span>
	<span class="hljs-keyword">if</span>(x==<span class="hljs-number">0</span>&amp;&amp;!flag) <span class="hljs-keyword">return</span>;
	flag=<span class="hljs-literal">true</span>;
	black&lt;&lt;x;
}

<span class="hljs-type">int</span> a[<span class="hljs-number">1003</span>],_time;
<span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; pii;
vector&lt;pii&gt; ve;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> n=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">read</span>();
	<span class="hljs-type">int</span> q=<span class="hljs-built_in">read</span>();
	<span class="hljs-type">int</span> p=<span class="hljs-number">1</span>;
	string str;
	cin&gt;&gt;str;

	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-type">char</span> opt=str[i];
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;1&#x27;</span>){
			ve.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">pii</span>(++_time,a[p]));
			p++;
			<span class="hljs-keyword">if</span>(p&gt;n) p-=n;
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;2&#x27;</span>){
			<span class="hljs-built_in">sort</span>(ve.<span class="hljs-built_in">begin</span>(),ve.<span class="hljs-built_in">end</span>(),[](pii x,pii y){
				<span class="hljs-keyword">return</span> x.first&lt;y.first;
			});
			<span class="hljs-built_in">add</span>(ve[<span class="hljs-number">0</span>].second);
			ve.<span class="hljs-built_in">erase</span>(ve.<span class="hljs-built_in">begin</span>());
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;3&#x27;</span>){
			<span class="hljs-built_in">sort</span>(ve.<span class="hljs-built_in">begin</span>(),ve.<span class="hljs-built_in">end</span>(),[](pii x,pii y){
				<span class="hljs-keyword">return</span> x.first&gt;y.first;
			});
			<span class="hljs-built_in">add</span>(ve[<span class="hljs-number">0</span>].second);
			ve.<span class="hljs-built_in">erase</span>(ve.<span class="hljs-built_in">begin</span>());
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;4&#x27;</span>){
			<span class="hljs-keyword">if</span>(!flag){
				cout&lt;&lt;<span class="hljs-string">&#x27;0&#x27;</span>&lt;&lt;endl;
			}<span class="hljs-keyword">else</span>{
				cout&lt;&lt;black.<span class="hljs-built_in">str</span>()&lt;&lt;endl;
				flag=<span class="hljs-literal">false</span>;
				black.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>);
			}
		}
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msub><mi>q</mi><mn>1</mn></msub><mo>+</mo><msub><mi>q</mi><mn>4</mn></msub><mo>+</mo><mo stretchy="false">(</mo><msub><mi>q</mi><mn>2</mn></msub><mo>+</mo><msub><mi>q</mi><mn>3</mn></msub><mo stretchy="false">)</mo><mo>×</mo><msub><mi>q</mi><mn>1</mn></msub><mi>log</mi><mo>⁡</mo><msub><mi>q</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(q_1+q_4+(q_2+q_3)\times q_1 \log q_1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 可认为时间复杂度为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>q</mi><mn>2</mn></msup><mi>log</mi><mo>⁡</mo><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(q^2\log q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分 60pts。</p>
<h3 id="suan-fa-er" tabindex="-1">算法二</h3>
<p>对于测试点#13-#14的只有操作2的特殊性质，我们不难想到拥有“先进先出”性质的数据结构：队列。</p>
<p>然后我们进一步思考测试点#15-#16的特殊性质，不难发现可以用一个栈来处理“先进后出”。</p>
<p>这样，我们对于这两个特殊性质进行专门的处理。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEF1c2luZyUyMG5hbWVzcGFjZSUyMHN0ZCUzQiUwQSUwQWlubGluZSUyMGludCUyMHJlYWQoKSU3QiUwQSUwOWludCUyMHJlcyUzRDAlMkNjaCUzRGdldGNoYXIoKSUyQ2YlM0QxJTNCJTBBJTA5d2hpbGUoIWlzZGlnaXQoY2gpJTIwYW5kJTIwY2ghJTNERU9GKSU3QiUwQSUwOSUwOWlmKGNoJTNEJTNEJy0nKSUyMGYlM0QtMSUzQiUwQSUwOSUwOWNoJTNEZ2V0Y2hhcigpJTNCJTBBJTA5JTdEJTBBJTA5d2hpbGUoaXNkaWdpdChjaCkpJTdCJTBBJTA5JTA5cmVzJTNEKHJlcyUzQyUzQzMpJTJCKHJlcyUzQyUzQzEpJTJCKGNoLScwJyklM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXJldHVybiUyMHJlcypmJTNCJTBBJTdEJTBBJTBBc3RyaW5nc3RyZWFtJTIwYmxhY2slM0IlMEFib29sJTIwZmxhZyUzRGZhbHNlJTNCJTBBaW5saW5lJTIwdm9pZCUyMGFkZChpbnQlMjB4KSU3QiUwQSUwOSUyRiUyRiUyRmNvdXQlM0MlM0MlMjJhZGQlMjIlM0MlM0N4JTNDJTNDZW5kbCUzQiUwQSUwOWlmKHglM0QlM0QwJTI2JTI2IWZsYWcpJTIwcmV0dXJuJTNCJTBBJTA5ZmxhZyUzRHRydWUlM0IlMEElMDlibGFjayUzQyUzQ3glM0IlMEElN0QlMEElMEFpbnQlMjBhJTVCMTAwMyU1RCUyQ190aW1lJTJDbiUzQiUwQXR5cGVkZWYlMjBwYWlyJTNDaW50JTJDaW50JTNFJTIwcGlpJTNCJTBBdmVjdG9yJTNDcGlpJTNFJTIwdmUlM0IlMEFzdHJpbmclMjBzdHIlM0IlMEFpbnQlMjBwJTNEMSUzQiUwQXZvaWQlMjBzdWJ0YXNrMSgpJTdCJTBBJTA5Zm9yKGludCUyMGklM0QwJTNCaSUzQ3N0ci5zaXplKCklM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWNoYXIlMjBvcHQlM0RzdHIlNUJpJTVEJTNCJTBBJTA5JTA5aWYob3B0JTNEJTNEJzEnKSU3QiUwQSUwOSUwOSUwOXZlLnB1c2hfYmFjayhwaWkoJTJCJTJCX3RpbWUlMkNhJTVCcCU1RCkpJTNCJTBBJTA5JTA5JTA5cCUyQiUyQiUzQiUwQSUwOSUwOSUwOWlmKHAlM0VuKSUyMHAtJTNEbiUzQiUwQSUwOSUwOSU3RCUwQSUwOSUwOWlmKG9wdCUzRCUzRCcyJyklN0IlMEElMDklMDklMDlzb3J0KHZlLmJlZ2luKCklMkN2ZS5lbmQoKSUyQyU1QiU1RChwaWklMjB4JTJDcGlpJTIweSklN0IlMEElMDklMDklMDklMDlyZXR1cm4lMjB4LmZpcnN0JTNDeS5maXJzdCUzQiUwQSUwOSUwOSUwOSU3RCklM0IlMEElMDklMDklMDlhZGQodmUlNUIwJTVELnNlY29uZCklM0IlMEElMDklMDklMDl2ZS5lcmFzZSh2ZS5iZWdpbigpKSUzQiUwQSUwOSUwOSU3RCUwQSUwOSUwOWlmKG9wdCUzRCUzRCczJyklN0IlMEElMDklMDklMDlzb3J0KHZlLmJlZ2luKCklMkN2ZS5lbmQoKSUyQyU1QiU1RChwaWklMjB4JTJDcGlpJTIweSklN0IlMEElMDklMDklMDklMDlyZXR1cm4lMjB4LmZpcnN0JTNFeS5maXJzdCUzQiUwQSUwOSUwOSUwOSU3RCklM0IlMEElMDklMDklMDlhZGQodmUlNUIwJTVELnNlY29uZCklM0IlMEElMDklMDklMDl2ZS5lcmFzZSh2ZS5iZWdpbigpKSUzQiUwQSUwOSUwOSU3RCUwQSUwOSUwOWlmKG9wdCUzRCUzRCc0JyklN0IlMEElMDklMDklMDlpZighZmxhZyklN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDJzAnJTNDJTNDZW5kbCUzQiUwQSUwOSUwOSUwOSU3RGVsc2UlN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDYmxhY2suc3RyKCklM0MlM0NlbmRsJTNCJTBBJTA5JTA5JTA5JTA5ZmxhZyUzRGZhbHNlJTNCJTBBJTA5JTA5JTA5JTA5YmxhY2suc3RyKCUyMiUyMiklM0IlMEElMDklMDklMDklN0QlMEElMDklMDklN0QlMEElMDklN0QlMEElN0QlMEElMEFxdWV1ZSUzQ2ludCUzRSUyMHF1ZSUzQiUwQXZvaWQlMjBzdWJ0YXNrMigpJTdCJTBBJTA5Zm9yKGludCUyMGklM0QwJTNCaSUzQ3N0ci5zaXplKCklM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWNoYXIlMjBvcHQlM0RzdHIlNUJpJTVEJTNCJTBBJTA5JTA5aWYob3B0JTNEJTNEJzEnKSU3QiUwQSUwOSUwOSUwOXF1ZS5wdXNoKGElNUJwJTVEKSUzQiUwQSUwOSUwOSUwOXAlMkIlMkIlM0IlMEElMDklMDklMDlpZihwJTNFbiklMjBwLSUzRG4lM0IlMEElMDklMDklN0QlMEElMDklMDlpZihvcHQlM0QlM0QnMicpJTdCJTBBJTA5JTA5JTA5YWRkKHF1ZS5mcm9udCgpKSUzQiUwQSUwOSUwOSUwOXF1ZS5wb3AoKSUzQiUwQSUwOSUwOSU3RCUwQSUwOSUwOWlmKG9wdCUzRCUzRCc0JyklN0IlMEElMDklMDklMDlpZighZmxhZyklN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDJzAnJTNDJTNDZW5kbCUzQiUwQSUwOSUwOSUwOSU3RGVsc2UlN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDYmxhY2suc3RyKCklM0MlM0NlbmRsJTNCJTBBJTA5JTA5JTA5JTA5ZmxhZyUzRGZhbHNlJTNCJTBBJTA5JTA5JTA5JTA5YmxhY2suc3RyKCUyMiUyMiklM0IlMEElMDklMDklMDklN0QlMEElMDklMDklN0QlMEElMDklN0QlMEElN0QlMEElMEFzdGFjayUzQ2ludCUzRSUyMHN0YSUzQiUwQXZvaWQlMjBzdWJ0YXNrMygpJTdCJTBBJTA5Zm9yKGludCUyMGklM0QwJTNCaSUzQ3N0ci5zaXplKCklM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWNoYXIlMjBvcHQlM0RzdHIlNUJpJTVEJTNCJTBBJTA5JTA5aWYob3B0JTNEJTNEJzEnKSU3QiUwQSUwOSUwOSUwOXN0YS5wdXNoKGElNUJwJTVEKSUzQiUwQSUwOSUwOSUwOXAlMkIlMkIlM0IlMEElMDklMDklMDlpZihwJTNFbiklMjBwLSUzRG4lM0IlMEElMDklMDklN0QlMEElMDklMDlpZihvcHQlM0QlM0QnMycpJTdCJTBBJTA5JTA5JTA5YWRkKHN0YS50b3AoKSklM0IlMEElMDklMDklMDlzdGEucG9wKCklM0IlMEElMDklMDklN0QlMEElMDklMDlpZihvcHQlM0QlM0QnNCcpJTdCJTBBJTA5JTA5JTA5aWYoIWZsYWcpJTdCJTBBJTA5JTA5JTA5JTA5Y291dCUzQyUzQycwJyUzQyUzQ2VuZGwlM0IlMEElMDklMDklMDklN0RlbHNlJTdCJTBBJTA5JTA5JTA5JTA5Y291dCUzQyUzQ2JsYWNrLnN0cigpJTNDJTNDZW5kbCUzQiUwQSUwOSUwOSUwOSUwOWZsYWclM0RmYWxzZSUzQiUwQSUwOSUwOSUwOSUwOWJsYWNrLnN0ciglMjIlMjIpJTNCJTBBJTA5JTA5JTA5JTdEJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTdEJTBBdm9pZCUyMHN1YnRhc2swKCklN0IlMEElMDlmb3IoaW50JTIwaSUzRDAlM0JpJTNDc3RyLnNpemUoKSUzQmklMkIlMkIpJTdCJTBBJTA5JTA5Y2hhciUyMG9wdCUzRHN0ciU1QmklNUQlM0IlMEElMDklMDlpZihvcHQlM0QlM0QnNCcpJTIwY291dCUzQyUzQycwJyUzQyUzQ2VuZGwlM0IlMEElMDklN0QlMEElN0QlMEElMEFpbnQlMjBtYWluKCklN0IlMEElMDluJTNEcmVhZCgpJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGElNUJpJTVEJTNEcmVhZCgpJTNCJTBBJTA5aW50JTIwcSUzRHJlYWQoKSUzQiUwQSUwOWNpbiUzRSUzRXN0ciUzQiUwQSUwOWludCUyMHEyJTNEMCUyQ3EzJTNEMCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMCUzQmklM0NzdHIuc2l6ZSgpJTNCaSUyQiUyQiklN0IlMEElMDklMDlpZihzdHIlNUJpJTVEJTNEJTNEJzInKSUyMHEyJTJCJTJCJTNCJTBBJTA5JTA5aWYoc3RyJTVCaSU1RCUzRCUzRCczJyklMjBxMyUyQiUyQiUzQiUwQSUwOSU3RCUwQSUwOWlmKHEyJTNEJTNEMCUyNiUyNnEzJTNEJTNEMCklMjBzdWJ0YXNrMCgpJTNCJTBBJTA5aWYocTIhJTNEMCUyNiUyNnEzISUzRDApJTIwc3VidGFzazEoKSUzQiUwQSUwOWVsc2UlMjBpZihxMiElM0QwKSUyMHN1YnRhc2syKCklM0IlMEElMDllbHNlJTIwaWYocTMhJTNEMCklMjBzdWJ0YXNrMygpJTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div><div>67</div><div>68</div><div>69</div><div>70</div><div>71</div><div>72</div><div>73</div><div>74</div><div>75</div><div>76</div><div>77</div><div>78</div><div>79</div><div>80</div><div>81</div><div>82</div><div>83</div><div>84</div><div>85</div><div>86</div><div>87</div><div>88</div><div>89</div><div>90</div><div>91</div><div>92</div><div>93</div><div>94</div><div>95</div><div>96</div><div>97</div><div>98</div><div>99</div><div>100</div><div>101</div><div>102</div><div>103</div><div>104</div><div>105</div><div>106</div><div>107</div><div>108</div><div>109</div><div>110</div><div>111</div><div>112</div><div>113</div><div>114</div><div>115</div><div>116</div><div>117</div><div>118</div><div>119</div><div>120</div><div>121</div><div>122</div><div>123</div><div>124</div><div>125</div><div>126</div><div>127</div><div>128</div><div>129</div><div>130</div><div>131</div><div>132</div><div>133</div><div>134</div><div>135</div><div>136</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

stringstream black;
<span class="hljs-type">bool</span> flag=<span class="hljs-literal">false</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>{
	<span class="hljs-comment">///cout&lt;&lt;&quot;add&quot;&lt;&lt;x&lt;&lt;endl;</span>
	<span class="hljs-keyword">if</span>(x==<span class="hljs-number">0</span>&amp;&amp;!flag) <span class="hljs-keyword">return</span>;
	flag=<span class="hljs-literal">true</span>;
	black&lt;&lt;x;
}

<span class="hljs-type">int</span> a[<span class="hljs-number">1003</span>],_time,n;
<span class="hljs-keyword">typedef</span> pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; pii;
vector&lt;pii&gt; ve;
string str;
<span class="hljs-type">int</span> p=<span class="hljs-number">1</span>;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask1</span><span class="hljs-params">()</span></span>{
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-type">char</span> opt=str[i];
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;1&#x27;</span>){
			ve.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">pii</span>(++_time,a[p]));
			p++;
			<span class="hljs-keyword">if</span>(p&gt;n) p-=n;
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;2&#x27;</span>){
			<span class="hljs-built_in">sort</span>(ve.<span class="hljs-built_in">begin</span>(),ve.<span class="hljs-built_in">end</span>(),[](pii x,pii y){
				<span class="hljs-keyword">return</span> x.first&lt;y.first;
			});
			<span class="hljs-built_in">add</span>(ve[<span class="hljs-number">0</span>].second);
			ve.<span class="hljs-built_in">erase</span>(ve.<span class="hljs-built_in">begin</span>());
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;3&#x27;</span>){
			<span class="hljs-built_in">sort</span>(ve.<span class="hljs-built_in">begin</span>(),ve.<span class="hljs-built_in">end</span>(),[](pii x,pii y){
				<span class="hljs-keyword">return</span> x.first&gt;y.first;
			});
			<span class="hljs-built_in">add</span>(ve[<span class="hljs-number">0</span>].second);
			ve.<span class="hljs-built_in">erase</span>(ve.<span class="hljs-built_in">begin</span>());
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;4&#x27;</span>){
			<span class="hljs-keyword">if</span>(!flag){
				cout&lt;&lt;<span class="hljs-string">&#x27;0&#x27;</span>&lt;&lt;endl;
			}<span class="hljs-keyword">else</span>{
				cout&lt;&lt;black.<span class="hljs-built_in">str</span>()&lt;&lt;endl;
				flag=<span class="hljs-literal">false</span>;
				black.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>);
			}
		}
	}
}

queue&lt;<span class="hljs-type">int</span>&gt; que;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask2</span><span class="hljs-params">()</span></span>{
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-type">char</span> opt=str[i];
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;1&#x27;</span>){
			que.<span class="hljs-built_in">push</span>(a[p]);
			p++;
			<span class="hljs-keyword">if</span>(p&gt;n) p-=n;
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;2&#x27;</span>){
			<span class="hljs-built_in">add</span>(que.<span class="hljs-built_in">front</span>());
			que.<span class="hljs-built_in">pop</span>();
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;4&#x27;</span>){
			<span class="hljs-keyword">if</span>(!flag){
				cout&lt;&lt;<span class="hljs-string">&#x27;0&#x27;</span>&lt;&lt;endl;
			}<span class="hljs-keyword">else</span>{
				cout&lt;&lt;black.<span class="hljs-built_in">str</span>()&lt;&lt;endl;
				flag=<span class="hljs-literal">false</span>;
				black.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>);
			}
		}
	}
}

stack&lt;<span class="hljs-type">int</span>&gt; sta;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask3</span><span class="hljs-params">()</span></span>{
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-type">char</span> opt=str[i];
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;1&#x27;</span>){
			sta.<span class="hljs-built_in">push</span>(a[p]);
			p++;
			<span class="hljs-keyword">if</span>(p&gt;n) p-=n;
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;3&#x27;</span>){
			<span class="hljs-built_in">add</span>(sta.<span class="hljs-built_in">top</span>());
			sta.<span class="hljs-built_in">pop</span>();
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;4&#x27;</span>){
			<span class="hljs-keyword">if</span>(!flag){
				cout&lt;&lt;<span class="hljs-string">&#x27;0&#x27;</span>&lt;&lt;endl;
			}<span class="hljs-keyword">else</span>{
				cout&lt;&lt;black.<span class="hljs-built_in">str</span>()&lt;&lt;endl;
				flag=<span class="hljs-literal">false</span>;
				black.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>);
			}
		}
	}
}
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask0</span><span class="hljs-params">()</span></span>{
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-type">char</span> opt=str[i];
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;4&#x27;</span>) cout&lt;&lt;<span class="hljs-string">&#x27;0&#x27;</span>&lt;&lt;endl;
	}
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	n=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">read</span>();
	<span class="hljs-type">int</span> q=<span class="hljs-built_in">read</span>();
	cin&gt;&gt;str;
	<span class="hljs-type">int</span> q2=<span class="hljs-number">0</span>,q3=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-keyword">if</span>(str[i]==<span class="hljs-string">&#x27;2&#x27;</span>) q2++;
		<span class="hljs-keyword">if</span>(str[i]==<span class="hljs-string">&#x27;3&#x27;</span>) q3++;
	}
	<span class="hljs-keyword">if</span>(q2==<span class="hljs-number">0</span>&amp;&amp;q3==<span class="hljs-number">0</span>) <span class="hljs-built_in">subtask0</span>();
	<span class="hljs-keyword">if</span>(q2!=<span class="hljs-number">0</span>&amp;&amp;q3!=<span class="hljs-number">0</span>) <span class="hljs-built_in">subtask1</span>();
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(q2!=<span class="hljs-number">0</span>) <span class="hljs-built_in">subtask2</span>();
	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(q3!=<span class="hljs-number">0</span>) <span class="hljs-built_in">subtask3</span>();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度同算法一。期望得分80pts。</p>
<h3 id="suan-fa-san" tabindex="-1">算法三</h3>
<p>我们把栈和队列结合在一起看，发现加入最早的数相当于把序列中最头上的数加入。加入最晚的数相当于把序列中最末尾的数加入。这样的操作使我们想到了双向队列，这样就得到了本题的标准算法。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2RlcXVlJTNFJTBBJTIzaW5jbHVkZSUzQ2NzdGRpbyUzRSUwQSUyM2luY2x1ZGUlM0Nzc3RyZWFtJTNFJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbmxpbmUlMjBpbnQlMjByZWFkKCklN0IlMEElMDlpbnQlMjByZXMlM0QwJTJDY2glM0RnZXRjaGFyKCklMkNmJTNEMSUzQiUwQSUwOXdoaWxlKCFpc2RpZ2l0KGNoKSUyMGFuZCUyMGNoISUzREVPRiklN0IlMEElMDklMDlpZihjaCUzRCUzRCctJyklMjBmJTNELTElM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXdoaWxlKGlzZGlnaXQoY2gpKSU3QiUwQSUwOSUwOXJlcyUzRChyZXMlM0MlM0MzKSUyQihyZXMlM0MlM0MxKSUyQihjaC0nMCcpJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjByZXMqZiUzQiUwQSU3RCUwQSUwQXN0cmluZ3N0cmVhbSUyMGJsYWNrJTNCJTBBYm9vbCUyMGZsYWclM0RmYWxzZSUzQiUwQWlubGluZSUyMHZvaWQlMjBhZGQoaW50JTIweCklN0IlMEElMDklMkYlMkYlMkZjb3V0JTNDJTNDJTIyYWRkJTIyJTNDJTNDeCUzQyUzQ2VuZGwlM0IlMEElMDlpZih4JTNEJTNEMCUyNiUyNiFmbGFnKSUyMHJldHVybiUzQiUwQSUwOWZsYWclM0R0cnVlJTNCJTBBJTA5YmxhY2slM0MlM0N4JTNCJTBBJTdEJTBBJTBBaW50JTIwYSU1QjEwMDMlNUQlM0IlMEFpbnQlMjBtYWluKCklN0IlMEElMDlpbnQlMjBuJTNEcmVhZCgpJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGElNUJpJTVEJTNEcmVhZCgpJTNCJTBBJTA5aW50JTIwcSUzRHJlYWQoKSUzQiUwQSUwOWludCUyMHAlM0QxJTNCJTBBJTA5c3RyaW5nJTIwc3RyJTNCJTBBJTA5Y2luJTNFJTNFc3RyJTNCJTBBJTBBJTA5ZGVxdWUlM0NpbnQlM0UlMjBkZXElM0IlMEElMDlmb3IoaW50JTIwaSUzRDAlM0JpJTNDc3RyLnNpemUoKSUzQmklMkIlMkIpJTdCJTBBJTA5JTA5Y2hhciUyMG9wdCUzRHN0ciU1QmklNUQlM0IlMEElMDklMDlpZihvcHQlM0QlM0QnMScpJTdCJTBBJTA5JTA5JTA5ZGVxLnB1c2hfYmFjayhhJTVCcCU1RCklM0IlMEElMDklMDklMDlwJTJCJTJCJTNCJTBBJTA5JTA5JTA5aWYocC0xJTNFJTNEbiklMjBwLSUzRG4lM0IlMEElMDklMDklN0QlMEElMDklMDlpZihvcHQlM0QlM0QnMicpJTdCJTBBJTA5JTA5JTA5YWRkKGRlcS5mcm9udCgpKSUzQiUwQSUwOSUwOSUwOWRlcS5wb3BfZnJvbnQoKSUzQiUwQSUwOSUwOSU3RCUwQSUwOSUwOWlmKG9wdCUzRCUzRCczJyklN0IlMEElMDklMDklMDlhZGQoZGVxLmJhY2soKSklM0IlMEElMDklMDklMDlkZXEucG9wX2JhY2soKSUzQiUwQSUwOSUwOSU3RCUwQSUwOSUwOWlmKG9wdCUzRCUzRCc0JyklN0IlMEElMDklMDklMDlpZighZmxhZyklN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDJzAnJTNDJTNDZW5kbCUzQiUwQSUwOSUwOSUwOSU3RGVsc2UlN0IlMEElMDklMDklMDklMDljb3V0JTNDJTNDYmxhY2suc3RyKCklM0MlM0NlbmRsJTNCJTBBJTA5JTA5JTA5JTA5ZmxhZyUzRGZhbHNlJTNCJTBBJTA5JTA5JTA5JTA5YmxhY2suc3RyKCUyMiUyMiklM0IlMEElMDklMDklMDklN0QlMEElMDklMDklN0QlMEElMDklN0QlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;deque&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;sstream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

stringstream black;
<span class="hljs-type">bool</span> flag=<span class="hljs-literal">false</span>;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>{
	<span class="hljs-comment">///cout&lt;&lt;&quot;add&quot;&lt;&lt;x&lt;&lt;endl;</span>
	<span class="hljs-keyword">if</span>(x==<span class="hljs-number">0</span>&amp;&amp;!flag) <span class="hljs-keyword">return</span>;
	flag=<span class="hljs-literal">true</span>;
	black&lt;&lt;x;
}

<span class="hljs-type">int</span> a[<span class="hljs-number">1003</span>];
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> n=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">read</span>();
	<span class="hljs-type">int</span> q=<span class="hljs-built_in">read</span>();
	<span class="hljs-type">int</span> p=<span class="hljs-number">1</span>;
	string str;
	cin&gt;&gt;str;

	deque&lt;<span class="hljs-type">int</span>&gt; deq;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;str.<span class="hljs-built_in">size</span>();i++){
		<span class="hljs-type">char</span> opt=str[i];
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;1&#x27;</span>){
			deq.<span class="hljs-built_in">push_back</span>(a[p]);
			p++;
			<span class="hljs-keyword">if</span>(p<span class="hljs-number">-1</span>&gt;=n) p-=n;
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;2&#x27;</span>){
			<span class="hljs-built_in">add</span>(deq.<span class="hljs-built_in">front</span>());
			deq.<span class="hljs-built_in">pop_front</span>();
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;3&#x27;</span>){
			<span class="hljs-built_in">add</span>(deq.<span class="hljs-built_in">back</span>());
			deq.<span class="hljs-built_in">pop_back</span>();
		}
		<span class="hljs-keyword">if</span>(opt==<span class="hljs-string">&#x27;4&#x27;</span>){
			<span class="hljs-keyword">if</span>(!flag){
				cout&lt;&lt;<span class="hljs-string">&#x27;0&#x27;</span>&lt;&lt;endl;
			}<span class="hljs-keyword">else</span>{
				cout&lt;&lt;black.<span class="hljs-built_in">str</span>()&lt;&lt;endl;
				flag=<span class="hljs-literal">false</span>;
				black.<span class="hljs-built_in">str</span>(<span class="hljs-string">&quot;&quot;</span>);
			}
		}
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>q</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(q)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mclose">)</span></span></span></span>，期望得分100pts。</p>
<h2 id="t2-xu-lie" tabindex="-1">T2 序列</h2>
<h3 id="suan-fa-yi-1" tabindex="-1">算法一</h3>
<p>暴力修改。对于所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的情况，最后扫描一下序列，找到最大值。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbnQlMjBuJTJDbSUyQ2slM0IlMEFpbnQlMjBBJTJDQiUyQ0MlMkNQJTNCJTBBaW5saW5lJTIwaW50JTIwcm5kKCklN0JyZXR1cm4lMjBBJTNEKEEqQiUyQkMpJTI1UCUzQiU3RCUzQiUwQWlubGluZSUyMGludCUyMGdldCgpJTdCcmV0dXJuJTIwcm5kKCklMjVuJTJCMSUzQiU3RCUzQiUwQSUwQWludCUyMGElNUIxMDAwMDAwNyU1RCUzQiUwQWludCUyMG1haW4oKSU3QiUwQSUwOWNpbiUzRSUzRW4lM0UlM0VtJTNFJTNFayUzQiUwQSUwOWNpbiUzRSUzRUElM0UlM0VCJTNFJTNFQyUzRSUzRVAlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwYSU1QmklNUQlM0RnZXQoKSUzQiUwQSUwOWludCUyMGFucyUzRDAlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbSUzQmklMkIlMkIpJTdCJTBBJTA5JTA5aW50JTIwZiUzRGdldCgpJTJDZyUzRGdldCgpJTJDdCUzRGdldCgpJTNCJTBBJTA5JTA5aWYoZiUzRWcpJTIwc3dhcChmJTJDZyklM0IlMEElMDklMDlmb3IoaW50JTIwaiUzRGYlM0JqJTNDJTNEZyUzQmolMkIlMkIpJTdCJTBBJTA5JTA5JTA5YSU1QmolNUQlMkIlM0R0JTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWFucyUzRG1heChhbnMlMkNhJTVCaSU1RCklM0IlMEElMDklN0QlMEElMDljb3V0JTNDJTNDYW5zJTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> n,m,k;
<span class="hljs-type">int</span> A,B,C,P;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">rnd</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> A=(A*B+C)%P;};
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">rnd</span>()%n<span class="hljs-number">+1</span>;};

<span class="hljs-type">int</span> a[<span class="hljs-number">10000007</span>];
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;
	cin&gt;&gt;A&gt;&gt;B&gt;&gt;C&gt;&gt;P;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">get</span>();
	<span class="hljs-type">int</span> ans=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++){
		<span class="hljs-type">int</span> f=<span class="hljs-built_in">get</span>(),g=<span class="hljs-built_in">get</span>(),t=<span class="hljs-built_in">get</span>();
		<span class="hljs-keyword">if</span>(f&gt;g) <span class="hljs-built_in">swap</span>(f,g);
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=f;j&lt;=g;j++){
			a[j]+=t;
		}
	}
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		ans=<span class="hljs-built_in">max</span>(ans,a[i]);
	}
	cout&lt;&lt;ans;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nm)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">nm</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分12pts，由于测试点#7过水，实际得分15pts</p>
<h3 id="suan-fa-er-1" tabindex="-1">算法二</h3>
<p>我们学习过排序算法。对于其他k的情况，可以通过排序解决</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2FsZ29yaXRobSUzRSUwQSUyM2RlZmluZSUyMGludCUyMGxvbmclMjBsb25nJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbnQlMjBuJTJDbSUyQ2slM0IlMEFpbnQlMjBBJTJDQiUyQ0MlMkNQJTNCJTBBaW5saW5lJTIwaW50JTIwcm5kKCklN0JyZXR1cm4lMjBBJTNEKEEqQiUyQkMpJTI1UCUzQiU3RCUzQiUwQWlubGluZSUyMGludCUyMGdldCgpJTdCcmV0dXJuJTIwcm5kKCklMjVuJTJCMSUzQiU3RCUzQiUwQSUwQWludCUyMGElNUIxMDAwMDAwNyU1RCUzQiUwQXNpZ25lZCUyMG1haW4oKSU3QiUwQSUwOWNpbiUzRSUzRW4lM0UlM0VtJTNFJTNFayUzQiUwQSUwOWNpbiUzRSUzRUElM0UlM0VCJTNFJTNFQyUzRSUzRVAlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwYSU1QmklNUQlM0RnZXQoKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RtJTNCaSUyQiUyQiklN0IlMEElMDklMDlpbnQlMjBmJTNEZ2V0KCklMkNnJTNEZ2V0KCklMkN0JTNEZ2V0KCklM0IlMEElMDklMDlpZihmJTNFZyklMjBzd2FwKGYlMkNnKSUzQiUwQSUwOSUwOWZvcihpbnQlMjBqJTNEZiUzQmolM0MlM0RnJTNCaiUyQiUyQiklN0IlMEElMDklMDklMDlhJTVCaiU1RCUyQiUzRHQlM0IlMEElMDklMDklN0QlMEElMDklN0QlMEElMDlzb3J0KGElMkIxJTJDYSUyQm4lMkIxJTJDJTVCJTVEKGludCUyMGElMkNpbnQlMjBiKSU3QiUwQSUwOSUwOXJldHVybiUyMGElM0ViJTNCJTBBJTA5JTdEKSUzQiUwQSUwOWNvdXQlM0MlM0NhJTVCayU1RCUzQiUwQSUwOXJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> n,m,k;
<span class="hljs-type">int</span> A,B,C,P;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">rnd</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> A=(A*B+C)%P;};
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">rnd</span>()%n<span class="hljs-number">+1</span>;};

<span class="hljs-type">int</span> a[<span class="hljs-number">10000007</span>];
<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;
	cin&gt;&gt;A&gt;&gt;B&gt;&gt;C&gt;&gt;P;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">get</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++){
		<span class="hljs-type">int</span> f=<span class="hljs-built_in">get</span>(),g=<span class="hljs-built_in">get</span>(),t=<span class="hljs-built_in">get</span>();
		<span class="hljs-keyword">if</span>(f&gt;g) <span class="hljs-built_in">swap</span>(f,g);
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=f;j&lt;=g;j++){
			a[j]+=t;
		}
	}
	<span class="hljs-built_in">sort</span>(a<span class="hljs-number">+1</span>,a+n<span class="hljs-number">+1</span>,[](<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b){
		<span class="hljs-keyword">return</span> a&gt;b;
	});
	cout&lt;&lt;a[k];
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mi>n</mi><mo>+</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(mn+nlogn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分23pts</p>
<p>实际上，对于测试点#10，我们并不需要再去排序了，直接扫描一遍序列就可以取出最大值了。期望得分28pts</p>
<h3 id="suan-fa-san-1" tabindex="-1">算法三</h3>
<p>发现k非常小，取值范围只有1,2,3。我们可以设三个变量，遇到一个数，先尝试更新最大值。比最大值小尝试更新第二大的值。比第二大的值小尝试更新第三大的值。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2FsZ29yaXRobSUzRSUwQSUyM2RlZmluZSUyMGludCUyMGxvbmclMjBsb25nJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbnQlMjBuJTJDbSUyQ2slM0IlMEFpbnQlMjBBJTJDQiUyQ0MlMkNQJTNCJTBBaW5saW5lJTIwaW50JTIwcm5kKCklN0JyZXR1cm4lMjBBJTNEKEEqQiUyQkMpJTI1UCUzQiU3RCUzQiUwQWlubGluZSUyMGludCUyMGdldCgpJTdCcmV0dXJuJTIwcm5kKCklMjVuJTJCMSUzQiU3RCUzQiUwQSUwQWludCUyMGElNUIxMDAwMDAwNyU1RCUzQiUwQXNpZ25lZCUyMG1haW4oKSU3QiUwQSUwOWNpbiUzRSUzRW4lM0UlM0VtJTNFJTNFayUzQiUwQSUwOWNpbiUzRSUzRUElM0UlM0VCJTNFJTNFQyUzRSUzRVAlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwYSU1QmklNUQlM0RnZXQoKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RtJTNCaSUyQiUyQiklN0IlMEElMDklMDlpbnQlMjBmJTNEZ2V0KCklMkNnJTNEZ2V0KCklMkN0JTNEZ2V0KCklM0IlMEElMDklMDlpZihmJTNFZyklMjBzd2FwKGYlMkNnKSUzQiUwQSUwOSUwOWZvcihpbnQlMjBqJTNEZiUzQmolM0MlM0RRJTA5ZyUzQmolMkIlMkIpJTdCJTBBJTA5JTA5JTA5YSU1QmolNUQlMkIlM0R0JTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTBBJTA5aW50JTIwbTElM0QwJTJDbTIlM0QwJTJDbTMlM0QwJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWlmKGElNUJpJTVEJTNFJTNEbTEpJTdCJTBBJTA5JTA5JTA5bTMlM0RtMiUzQiUwQSUwOSUwOSUwOW0yJTNEbTElM0IlMEElMDklMDklMDltMSUzRGElNUJpJTVEJTNCJTBBJTA5JTA5JTdEZWxzZSUyMGlmKGElNUJpJTVEJTNFJTNEbTIpJTdCJTBBJTA5JTA5JTA5bTMlM0RtMiUzQiUwQSUwOSUwOSUwOW0yJTNEYSU1QmklNUQlM0IlMEElMDklMDklN0RlbHNlJTIwaWYoYSU1QmklNUQlM0UlM0RtMyklN0IlMEElMDklMDklMDltMyUzRGElNUJpJTVEJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTA5aWYoayUzRCUzRDEpJTIwY291dCUzQyUzQ20xJTNCJTBBJTA5aWYoayUzRCUzRDIpJTIwY291dCUzQyUzQ20yJTNCJTBBJTA5aWYoayUzRCUzRDMpJTIwY291dCUzQyUzQ20zJTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;algorithm&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> n,m,k;
<span class="hljs-type">int</span> A,B,C,P;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">rnd</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> A=(A*B+C)%P;};
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">rnd</span>()%n<span class="hljs-number">+1</span>;};

<span class="hljs-type">int</span> a[<span class="hljs-number">10000007</span>];
<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n&gt;&gt;m&gt;&gt;k;
	cin&gt;&gt;A&gt;&gt;B&gt;&gt;C&gt;&gt;P;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">get</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++){
		<span class="hljs-type">int</span> f=<span class="hljs-built_in">get</span>(),g=<span class="hljs-built_in">get</span>(),t=<span class="hljs-built_in">get</span>();
		<span class="hljs-keyword">if</span>(f&gt;g) <span class="hljs-built_in">swap</span>(f,g);
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=f;j&lt;=Q	g;j++){
			a[j]+=t;
		}
	}

	<span class="hljs-type">int</span> m1=<span class="hljs-number">0</span>,m2=<span class="hljs-number">0</span>,m3=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		<span class="hljs-keyword">if</span>(a[i]&gt;=m1){
			m3=m2;
			m2=m1;
			m1=a[i];
		}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i]&gt;=m2){
			m3=m2;
			m2=a[i];
		}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i]&gt;=m3){
			m3=a[i];
		}
	}
	<span class="hljs-keyword">if</span>(k==<span class="hljs-number">1</span>) cout&lt;&lt;m1;
	<span class="hljs-keyword">if</span>(k==<span class="hljs-number">2</span>) cout&lt;&lt;m2;
	<span class="hljs-keyword">if</span>(k==<span class="hljs-number">3</span>) cout&lt;&lt;m3;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mi>n</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(mn+n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分55pts</p>
<h3 id="suan-fa-si" tabindex="-1">算法四</h3>
<p>我们已经把最后找第k大的数的过程的时间复杂度降到最低，但还是无法通过，主要是区间修改操作耗费了大量时间，我们需要优化</p>
<p>观察到，最后求第k大的数，是在所有操作之后进行的，这是一个特殊的地方。数据范围为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>e</mi><mn>7</mn></mrow><annotation encoding="application/x-tex">1e7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span><span class="mord mathnormal">e</span><span class="mord">7</span></span></span></span> 启示我们用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 的修改算法</p>
<p>这就需要差分了</p>
<p>设差分数组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>=</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>−</mo><mi>a</mi><mo stretchy="false">[</mo><mi>i</mi><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">d[i]=a[i]-a[i-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">[</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span></p>
<p>对于给区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span> 加上 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span>，可变为修改差分数组：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo stretchy="false">[</mo><mi>l</mi><mo stretchy="false">]</mo><mo>+</mo><mo>=</mo><mi>d</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">[</mo><mi>r</mi><mo>+</mo><mn>1</mn><mo stretchy="false">]</mo><mo>−</mo><mo>=</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">d[l]+=d,d[r+1]-=d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mclose">]</span><span class="mord">+</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">d</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">d</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mord">−</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></p>
<p>对差分数组求前缀和就可以得到对应位置修改操作之后的值</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2lvc3RyZWFtJTNFJTBBJTIzaW5jbHVkZSUzQ2NzdGRpbyUzRSUwQSUyM2RlZmluZSUyMGludCUyMGxvbmclMjBsb25nJTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEElMEFpbmxpbmUlMjBpbnQlMjByZWFkKCklN0IlMEElMDlpbnQlMjByZXMlM0QwJTJDY2glM0RnZXRjaGFyKCklMkNmJTNEMSUzQiUwQSUwOXdoaWxlKCFpc2RpZ2l0KGNoKSUyMGFuZCUyMGNoISUzREVPRiklN0IlMEElMDklMDlpZihjaCUzRCUzRCctJyklMjBmJTNELTElM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXdoaWxlKGlzZGlnaXQoY2gpKSU3QiUwQSUwOSUwOXJlcyUzRChyZXMlM0MlM0MzKSUyQihyZXMlM0MlM0MxKSUyQihjaC0nMCcpJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjByZXMqZiUzQiUwQSU3RCUwQSUwQWludCUyMEElMkNCJTJDQyUyQ1AlM0IlMEFpbnQlMjBuJTJDbSUyQ2slM0IlMEFpbmxpbmUlMjBpbnQlMjBybmQoKSU3QnJldHVybiUyMEElM0QoQSpCJTJCQyklMjVQJTNCJTdEJTNCJTBBaW5saW5lJTIwaW50JTIwZ2V0KCklN0JyZXR1cm4lMjBybmQoKSUyNW4lMkIxJTNCJTdEJTNCJTBBJTBBaW50JTIwYSU1QjEwMDAwMDA3JTVEJTNCJTBBaW50JTIwZCU1QjEwMDAwMDA3JTVEJTNCJTBBJTBBc2lnbmVkJTIwbWFpbigpJTdCJTBBJTA5JTJGJTJGZnJlb3BlbiglMjJhLmluJTIyJTJDJTIyciUyMiUyQ3N0ZGluKSUzQiUwQSUwOSUyRiUyRmZyZW9wZW4oJTIyYS5vdXQlMjIlMkMlMjJ3JTIyJTJDc3Rkb3V0KSUzQiUwQSUwOW4lM0RyZWFkKCklMkNtJTNEcmVhZCgpJTJDayUzRHJlYWQoKSUzQiUwQSUwOUElM0RyZWFkKCklMkNCJTNEcmVhZCgpJTJDQyUzRHJlYWQoKSUyQ1AlM0RyZWFkKCklM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTdCJTBBJTA5JTA5YSU1QmklNUQlM0RnZXQoKSUzQiUwQSUwOSUwOWQlNUJpJTVEJTNEYSU1QmklNUQtYSU1QmktMSU1RCUzQiUwQSUwOSU3RCUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RtJTNCaSUyQiUyQiklN0IlMEElMDklMDlpbnQlMjBsJTNEZ2V0KCklMkNyJTNEZ2V0KCklMkN0JTNEZ2V0KCklM0IlMEElMDklMDlpZihsJTNFciklMjBzd2FwKGwlMkNyKSUzQiUwQSUwOSUwOWQlNUJsJTVEJTJCJTNEdCUzQiUwQSUwOSUwOWQlNUJyJTJCMSU1RC0lM0R0JTNCJTBBJTA5JTdEJTBBJTA5aW50JTIwc3VtJTNEMCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklN0IlMEElMDklMDlzdW0lMkIlM0RkJTVCaSU1RCUzQiUwQSUwOSUwOWElNUJpJTVEJTNEc3VtJTNCJTBBJTA5JTdEJTBBJTBBJTA5aW50JTIwbTElM0QwJTJDbTIlM0QwJTJDbTMlM0QwJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWlmKGElNUJpJTVEJTNFJTNEbTEpJTdCJTBBJTA5JTA5JTA5bTMlM0RtMiUzQiUwQSUwOSUwOSUwOW0yJTNEbTElM0IlMEElMDklMDklMDltMSUzRGElNUJpJTVEJTNCJTBBJTA5JTA5JTdEZWxzZSUyMGlmKGElNUJpJTVEJTNFJTNEbTIpJTdCJTBBJTA5JTA5JTA5bTMlM0RtMiUzQiUwQSUwOSUwOSUwOW0yJTNEYSU1QmklNUQlM0IlMEElMDklMDklN0RlbHNlJTIwaWYoYSU1QmklNUQlM0UlM0RtMyklN0IlMEElMDklMDklMDltMyUzRGElNUJpJTVEJTNCJTBBJTA5JTA5JTdEJTBBJTA5JTdEJTBBJTBBJTA5aWYoayUzRCUzRDEpJTIwY291dCUzQyUzQ20xJTNCJTBBJTA5aWYoayUzRCUzRDIpJTIwY291dCUzQyUzQ20yJTNCJTBBJTA5aWYoayUzRCUzRDMpJTIwY291dCUzQyUzQ20zJTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div><div>61</div><div>62</div><div>63</div><div>64</div><div>65</div><div>66</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;cstdio&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

<span class="hljs-type">int</span> A,B,C,P;
<span class="hljs-type">int</span> n,m,k;
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">rnd</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> A=(A*B+C)%P;};
<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">rnd</span>()%n<span class="hljs-number">+1</span>;};

<span class="hljs-type">int</span> a[<span class="hljs-number">10000007</span>];
<span class="hljs-type">int</span> d[<span class="hljs-number">10000007</span>];

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	<span class="hljs-comment">//freopen(&quot;a.in&quot;,&quot;r&quot;,stdin);</span>
	<span class="hljs-comment">//freopen(&quot;a.out&quot;,&quot;w&quot;,stdout);</span>
	n=<span class="hljs-built_in">read</span>(),m=<span class="hljs-built_in">read</span>(),k=<span class="hljs-built_in">read</span>();
	A=<span class="hljs-built_in">read</span>(),B=<span class="hljs-built_in">read</span>(),C=<span class="hljs-built_in">read</span>(),P=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		a[i]=<span class="hljs-built_in">get</span>();
		d[i]=a[i]-a[i<span class="hljs-number">-1</span>];
	}
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++){
		<span class="hljs-type">int</span> l=<span class="hljs-built_in">get</span>(),r=<span class="hljs-built_in">get</span>(),t=<span class="hljs-built_in">get</span>();
		<span class="hljs-keyword">if</span>(l&gt;r) <span class="hljs-built_in">swap</span>(l,r);
		d[l]+=t;
		d[r<span class="hljs-number">+1</span>]-=t;
	}
	<span class="hljs-type">int</span> sum=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		sum+=d[i];
		a[i]=sum;
	}

	<span class="hljs-type">int</span> m1=<span class="hljs-number">0</span>,m2=<span class="hljs-number">0</span>,m3=<span class="hljs-number">0</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		<span class="hljs-keyword">if</span>(a[i]&gt;=m1){
			m3=m2;
			m2=m1;
			m1=a[i];
		}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i]&gt;=m2){
			m3=m2;
			m2=a[i];
		}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(a[i]&gt;=m3){
			m3=a[i];
		}
	}

	<span class="hljs-keyword">if</span>(k==<span class="hljs-number">1</span>) cout&lt;&lt;m1;
	<span class="hljs-keyword">if</span>(k==<span class="hljs-number">2</span>) cout&lt;&lt;m2;
	<span class="hljs-keyword">if</span>(k==<span class="hljs-number">3</span>) cout&lt;&lt;m3;
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mo>+</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(m+n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>期望得分100pts</p>
<h2 id="t3-gun-dong" tabindex="-1">T3 滚动</h2>
<h3 id="suan-fa-yi-2" tabindex="-1">算法一</h3>
<p>直接朴素暴力</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEElMjNkZWZpbmUlMjBpbnQlMjBsb25nJTIwbG9uZyUwQSUyM2RlZmluZSUyMF8lMjAxMDAwMDA2JTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEFjb25zdCUyMGludCUyMG1vZCUzRDAlM0IlMEElMEFpbmxpbmUlMjBpbnQlMjByZWFkKCklN0IlMEElMDlpbnQlMjByZXMlM0QwJTJDY2glM0RnZXRjaGFyKCklMkNmJTNEMSUzQiUwQSUwOXdoaWxlKCFpc2RpZ2l0KGNoKSUyMGFuZCUyMGNoISUzREVPRiklN0IlMEElMDklMDlpZihjaCUzRCUzRCctJyklMjBmJTNELTElM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXdoaWxlKGlzZGlnaXQoY2gpKSU3QiUwQSUwOSUwOXJlcyUzRChyZXMlM0MlM0MzKSUyQihyZXMlM0MlM0MxKSUyQihjaC0nMCcpJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjByZXMqZiUzQiUwQSU3RCUwQSUwQWludCUyMGElNUJfJTVEJTJDbiUyQ20lM0IlMEElMEFzaWduZWQlMjBtYWluKCklN0IlMEElMDluJTNEcmVhZCgpJTJDbSUzRHJlYWQoKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjBhJTVCaSU1RCUzRHJlYWQoKSUzQiUwQSUwQSUwOXdoaWxlKG0tLSklN0IlMEElMDklMDlpbnQlMjB4JTNEcmVhZCgpJTNCY291dCUzQyUzQ2ElNUJ4JTVEJTNDJTNDZW5kbCUzQiUwQSUwOSUwOWludCUyMHQlM0RhJTVCeCU1RCUzQiUwQSUwOSUwOWZvcihpbnQlMjBpJTNEeCUzQmklM0NuJTNCaSUyQiUyQiklMjBhJTVCaSU1RCUzRGElNUJpJTJCMSU1RCUzQiUwQSUwOSUwOWElNUJuJTVEJTNEdCUzQiUwQSUwOSU3RCUwQSUwOXJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 1000006</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-type">const</span> <span class="hljs-type">int</span> mod=<span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

<span class="hljs-type">int</span> a[_],n,m;

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	n=<span class="hljs-built_in">read</span>(),m=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">read</span>();

	<span class="hljs-keyword">while</span>(m--){
		<span class="hljs-type">int</span> x=<span class="hljs-built_in">read</span>();cout&lt;&lt;a[x]&lt;&lt;endl;
		<span class="hljs-type">int</span> t=a[x];
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=x;i&lt;n;i++) a[i]=a[i<span class="hljs-number">+1</span>];
		a[n]=t;
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(mn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span>，期望得分30pts。</p>
<h3 id="suan-fa-er-2" tabindex="-1">算法二</h3>
<p>为了方便表述，我们设所有的x等于X</p>
<p>考虑具有特殊性质的测试点，仔细推导规律，不难发现，我们可以不滚动序列，而是类似第一题一样，定义一个指针p，一开始将指针p指向位置X。每次操作时输出指针指向的数，然后将指针右移，如果指针指向位置超过了n，那么就将指针重新指向位置X。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEElMjNkZWZpbmUlMjBpbnQlMjBsb25nJTIwbG9uZyUwQSUyM2RlZmluZSUyMF8lMjAxMDAwMDA2JTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEFjb25zdCUyMGludCUyMG1vZCUzRDAlM0IlMEElMEFpbmxpbmUlMjBpbnQlMjByZWFkKCklN0IlMEElMDlpbnQlMjByZXMlM0QwJTJDY2glM0RnZXRjaGFyKCklMkNmJTNEMSUzQiUwQSUwOXdoaWxlKCFpc2RpZ2l0KGNoKSUyMGFuZCUyMGNoISUzREVPRiklN0IlMEElMDklMDlpZihjaCUzRCUzRCctJyklMjBmJTNELTElM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXdoaWxlKGlzZGlnaXQoY2gpKSU3QiUwQSUwOSUwOXJlcyUzRChyZXMlM0MlM0MzKSUyQihyZXMlM0MlM0MxKSUyQihjaC0nMCcpJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjByZXMqZiUzQiUwQSU3RCUwQSUwQWludCUyMGElNUJfJTVEJTJDbiUyQ20lM0IlMEF2ZWN0b3IlM0NpbnQlM0UlMjB2ZSUzQiUwQXZvaWQlMjBzdWJ0YXNrMigpJTdCJTBBJTA5Zm9yKGludCUyMGklM0QwJTNCaSUzQ20lM0JpJTJCJTJCKSU3QiUwQSUwOSUwOWludCUyMHglM0R2ZSU1QmklNUQlM0Jjb3V0JTNDJTNDYSU1QnglNUQlM0MlM0NlbmRsJTNCJTBBJTA5JTA5aW50JTIwdCUzRGElNUJ4JTVEJTNCJTBBJTA5JTA5Zm9yKGludCUyMGklM0R4JTNCaSUzQ24lM0JpJTJCJTJCKSUyMGElNUJpJTVEJTNEYSU1QmklMkIxJTVEJTNCJTBBJTA5JTA5YSU1Qm4lNUQlM0R0JTNCJTBBJTA5JTdEJTBBJTdEJTBBdm9pZCUyMHN1YnRhc2sxKCklN0IlMEElMDlpbnQlMjBwJTNEdmUlNUIwJTVEJTNCJTBBJTA5d2hpbGUobS0tKSU3QiUwQSUwOSUwOWNvdXQlM0MlM0NhJTVCcCU1RCUzQyUzQ2VuZGwlM0IlMEElMDklMDlwJTJCJTJCJTNCJTBBJTA5JTA5aWYocCUzRW4pJTIwcCUzRHZlJTVCMCU1RCUzQiUwQSUwOSU3RCUwQSU3RCUwQSUwQXNpZ25lZCUyMG1haW4oKSU3QiUwQSUwOW4lM0RyZWFkKCklMkNtJTNEcmVhZCgpJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGElNUJpJTVEJTNEcmVhZCgpJTNCJTBBJTBBJTA5Ym9vbCUyMGZsYWclM0R0cnVlJTNCJTBBJTA5aW50JTIwdCUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RtJTNCaSUyQiUyQiklN0IlMEElMDklMDl0JTNEcmVhZCgpJTNCJTBBJTA5JTA5aWYoaSElM0QxKSU3QiUwQSUwOSUwOSUwOWlmKHQhJTNEdmUlNUIwJTVEKSUyMGZsYWclM0RmYWxzZSUzQiUwQSUwOSUwOSU3RCUwQSUwOSUwOXZlLnB1c2hfYmFjayh0KSUzQiUwQSUwOSU3RCUwQSUwOWlmKGZsYWcpJTIwc3VidGFzazEoKSUzQiUwQSUwOWVsc2UlMjBzdWJ0YXNrMigpJTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 1000006</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-type">const</span> <span class="hljs-type">int</span> mod=<span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

<span class="hljs-type">int</span> a[_],n,m;
vector&lt;<span class="hljs-type">int</span>&gt; ve;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask2</span><span class="hljs-params">()</span></span>{
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++){
		<span class="hljs-type">int</span> x=ve[i];cout&lt;&lt;a[x]&lt;&lt;endl;
		<span class="hljs-type">int</span> t=a[x];
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=x;i&lt;n;i++) a[i]=a[i<span class="hljs-number">+1</span>];
		a[n]=t;
	}
}
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask1</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> p=ve[<span class="hljs-number">0</span>];
	<span class="hljs-keyword">while</span>(m--){
		cout&lt;&lt;a[p]&lt;&lt;endl;
		p++;
		<span class="hljs-keyword">if</span>(p&gt;n) p=ve[<span class="hljs-number">0</span>];
	}
}

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	n=<span class="hljs-built_in">read</span>(),m=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">read</span>();

	<span class="hljs-type">bool</span> flag=<span class="hljs-literal">true</span>;
	<span class="hljs-type">int</span> t;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=m;i++){
		t=<span class="hljs-built_in">read</span>();
		<span class="hljs-keyword">if</span>(i!=<span class="hljs-number">1</span>){
			<span class="hljs-keyword">if</span>(t!=ve[<span class="hljs-number">0</span>]) flag=<span class="hljs-literal">false</span>;
		}
		ve.<span class="hljs-built_in">push_back</span>(t);
	}
	<span class="hljs-keyword">if</span>(flag) <span class="hljs-built_in">subtask1</span>();
	<span class="hljs-keyword">else</span> <span class="hljs-built_in">subtask2</span>();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>m</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(mn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">mn</span><span class="mclose">)</span></span></span></span>，期望得分70pts。</p>
<h3 id="suan-fa-san-2" tabindex="-1">算法三</h3>
<p>我们考虑将整个序列分为若干个块。每个块的大小为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span></span></span></span>，则一共有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span></span></span></span> 个块，我们将每个块进行标号。特别地，最后一个块的编号为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">end</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span>。</p>
<p>我们再重新考虑数列的滚动。我们可以将题意转化为：将要查询的位置的数输出，然后把这个数放到序列的末尾，然后序列后面的数集体向前移动来补齐空位。</p>
<p>我们将每个块用vector来储存。把每个数放到其所属的块内。</p>
<p>这样对于滚动这一操作，我们可以把查询到的数从其原本的块内删除，再将其加入块 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">end</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 中。</p>
<p>这样一来，滚动操作的复杂度被我们降为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>。但这样进行若干次操作之后，每个块内的数的数量不是相同的，我们查询一个数，只能遍历每个块，找到要查询的数，这样的复杂度是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 的。</p>
<p>但我们进一步考虑，我们无需一个数一个数遍历，由于我们已经分块，我们可以一个块一个块的去跳过，这样一来，查询操作的复杂度被降低为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 。</p>
<p>但我们需要进一步考虑，当进行若干次操作后，可能<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">end</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 块之前的所有块内已经没有了数字，所有的数字都已经被放到了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">end</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 块中。这样一来，查询操作的复杂度退化为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span></p>
<p>为此，我们需要定期将整个序列重新分块，来降低复杂度。我们选择每执行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>n</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2397em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span></span></span></span> 次操作后重建分块。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEElMjNkZWZpbmUlMjBpbnQlMjBsb25nJTIwbG9uZyUwQSUyM2RlZmluZSUyMF8lMjAxMDAwMDA2JTBBdXNpbmclMjBuYW1lc3BhY2UlMjBzdGQlM0IlMEFjb25zdCUyMGludCUyMG1vZCUzRDAlM0IlMEElMEFpbmxpbmUlMjBpbnQlMjByZWFkKCklN0IlMEElMDlpbnQlMjByZXMlM0QwJTJDY2glM0RnZXRjaGFyKCklMkNmJTNEMSUzQiUwQSUwOXdoaWxlKCFpc2RpZ2l0KGNoKSUyMGFuZCUyMGNoISUzREVPRiklN0IlMEElMDklMDlpZihjaCUzRCUzRCctJyklMjBmJTNELTElM0IlMEElMDklMDljaCUzRGdldGNoYXIoKSUzQiUwQSUwOSU3RCUwQSUwOXdoaWxlKGlzZGlnaXQoY2gpKSU3QiUwQSUwOSUwOXJlcyUzRChyZXMlM0MlM0MzKSUyQihyZXMlM0MlM0MxKSUyQihjaC0nMCcpJTNCJTBBJTA5JTA5Y2glM0RnZXRjaGFyKCklM0IlMEElMDklN0QlMEElMDlyZXR1cm4lMjByZXMqZiUzQiUwQSU3RCUwQSUwQWludCUyMGElNUJfJTVEJTJDbiUyQ20lM0IlMEFpbnQlMjBibG8lMkNibCU1Ql8lNUQlMkN0bXAlNUJfJTVEJTJDY250JTNCJTBBdmVjdG9yJTNDaW50JTNFJTIwdmUlNUJfJTVEJTNCJTBBJTBBc2lnbmVkJTIwbWFpbigpJTdCJTBBJTA5biUzRHJlYWQoKSUyQ20lM0RyZWFkKCklM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwYSU1QmklNUQlM0RyZWFkKCklM0IlMEElMEElMDlibG8lM0RzcXJ0KG4pJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGJsJTVCaSU1RCUzRChpLTEpJTJGYmxvJTJCMSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjB2ZSU1QmJsJTVCaSU1RCU1RC5wdXNoX2JhY2soYSU1QmklNUQpJTNCJTBBJTBBJTA5d2hpbGUobS0tKSU3QiUwQSUwOSUwOWludCUyMHglM0RyZWFkKCklMkNwJTNEMSUyQ3QlM0IlMEElMDklMDl3aGlsZSh4JTNFdmUlNUJwJTVELnNpemUoKSklMjB4LSUzRHZlJTVCcCU1RC5zaXplKCklMkNwJTJCJTJCJTNCJTBBJTA5JTA5dCUzRHZlJTVCcCU1RCU1QngtMSU1RCUzQmNvdXQlM0MlM0N0JTNDJTNDZW5kbCUzQiUwQSUwOSUwOWF1dG8lMjBpaSUzRHZlJTVCcCU1RC5iZWdpbigpJTNCJTBBJTA5JTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQ3glM0JpJTJCJTJCKSUyMGlpJTJCJTJCJTNCJTBBJTA5JTA5dmUlNUJwJTVELmVyYXNlKGlpKSUzQiUwQSUwOSUwOXZlJTVCKG4tMSklMkZibG8lMkIxJTVELnB1c2hfYmFjayh0KSUzQiUwQSUwOSUwOWNudCUyQiUyQiUzQiUwQSUwOSUwOWlmKGNudCUzRCUzRGJsbyklN0IlMEElMDklMDklMDlpbnQlMjBwcCUzRDAlM0IlMEElMDklMDklMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEKG4tMSklMkZibG8lMkIxJTNCaSUyQiUyQiklN0IlMEElMDklMDklMDklMDlmb3IoaW50JTIwZSUzQXZlJTVCaSU1RCklMEElMDklMDklMDklMDklMDl0bXAlNUIlMkIlMkJwcCU1RCUzRGUlM0IlMEElMDklMDklMDklMDl2ZSU1QmklNUQuY2xlYXIoKSUzQiUwQSUwOSUwOSUwOSU3RCUwQSUwOSUwOSUwOSUyRiUyRmZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0R0b3QlM0JpJTJCJTJCKSUyMGNvdXQlM0MlM0NhJTVCaSU1RCUzQyUzQyclMjAnJTNCJTBBJTA5JTA5JTA5JTJGJTJGY291dCUzQyUzQ2VuZGwlM0IlMEElMDklMDklMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEcHAlM0JpJTJCJTJCKSUyMHZlJTVCYmwlNUJpJTVEJTVELnB1c2hfYmFjayh0bXAlNUJpJTVEKSUzQiUwQSUwOSUwOSUwOWNudCUzRDAlM0IlMEElMDklMDklN0QlMEElMDklMDklMkYlMkZjb3V0JTNDJTNDZW5kbCUzQiUwQSUwOSUwOSUyRiUyRmZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0Qobi0xKSUyRmJsbyUyQjElM0JpJTJCJTJCKSU3QiUwQSUwOSUwOSUyRiUyRiUwOWZvcihpbnQlMjBlJTNBdmUlNUJpJTVEKSUyMGNvdXQlM0MlM0NlJTNDJTNDJyUyMCclM0IlMEElMDklMDklMkYlMkYlN0QlMEElMDklMDklMkYlMkZjb3V0JTNDJTNDZW5kbCUzQiUwQSUwOSU3RCUwQSUwOXJldHVybiUyMDAlM0IlMEElN0QlMEE="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div><div>42</div><div>43</div><div>44</div><div>45</div><div>46</div><div>47</div><div>48</div><div>49</div><div>50</div><div>51</div><div>52</div><div>53</div><div>54</div><div>55</div><div>56</div><div>57</div><div>58</div><div>59</div><div>60</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 1000006</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-type">const</span> <span class="hljs-type">int</span> mod=<span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-keyword">inline</span> <span class="hljs-type">int</span> <span class="hljs-title">read</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">int</span> res=<span class="hljs-number">0</span>,ch=<span class="hljs-built_in">getchar</span>(),f=<span class="hljs-number">1</span>;
	<span class="hljs-keyword">while</span>(!<span class="hljs-built_in">isdigit</span>(ch) <span class="hljs-keyword">and</span> ch!=EOF){
		<span class="hljs-keyword">if</span>(ch==<span class="hljs-string">&#x27;-&#x27;</span>) f=<span class="hljs-number">-1</span>;
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">while</span>(<span class="hljs-built_in">isdigit</span>(ch)){
		res=(res&lt;&lt;<span class="hljs-number">3</span>)+(res&lt;&lt;<span class="hljs-number">1</span>)+(ch-<span class="hljs-string">&#x27;0&#x27;</span>);
		ch=<span class="hljs-built_in">getchar</span>();
	}
	<span class="hljs-keyword">return</span> res*f;
}

<span class="hljs-type">int</span> a[_],n,m;
<span class="hljs-type">int</span> blo,bl[_],tmp[_],cnt;
vector&lt;<span class="hljs-type">int</span>&gt; ve[_];

<span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	n=<span class="hljs-built_in">read</span>(),m=<span class="hljs-built_in">read</span>();
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) a[i]=<span class="hljs-built_in">read</span>();

	blo=<span class="hljs-built_in">sqrt</span>(n);
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) bl[i]=(i<span class="hljs-number">-1</span>)/blo<span class="hljs-number">+1</span>;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) ve[bl[i]].<span class="hljs-built_in">push_back</span>(a[i]);

	<span class="hljs-keyword">while</span>(m--){
		<span class="hljs-type">int</span> x=<span class="hljs-built_in">read</span>(),p=<span class="hljs-number">1</span>,t;
		<span class="hljs-keyword">while</span>(x&gt;ve[p].<span class="hljs-built_in">size</span>()) x-=ve[p].<span class="hljs-built_in">size</span>(),p++;
		t=ve[p][x<span class="hljs-number">-1</span>];cout&lt;&lt;t&lt;&lt;endl;
		<span class="hljs-keyword">auto</span> ii=ve[p].<span class="hljs-built_in">begin</span>();
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;x;i++) ii++;
		ve[p].<span class="hljs-built_in">erase</span>(ii);
		ve[(n<span class="hljs-number">-1</span>)/blo<span class="hljs-number">+1</span>].<span class="hljs-built_in">push_back</span>(t);
		cnt++;
		<span class="hljs-keyword">if</span>(cnt==blo){
			<span class="hljs-type">int</span> pp=<span class="hljs-number">0</span>;
			<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=(n<span class="hljs-number">-1</span>)/blo<span class="hljs-number">+1</span>;i++){
				<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> e:ve[i])
					tmp[++pp]=e;
				ve[i].<span class="hljs-built_in">clear</span>();
			}
			<span class="hljs-comment">//for(int i=1;i&lt;=tot;i++) cout&lt;&lt;a[i]&lt;&lt;&#x27; &#x27;;</span>
			<span class="hljs-comment">//cout&lt;&lt;endl;</span>
			<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=pp;i++) ve[bl[i]].<span class="hljs-built_in">push_back</span>(tmp[i]);
			cnt=<span class="hljs-number">0</span>;
		}
		<span class="hljs-comment">//cout&lt;&lt;endl;</span>
		<span class="hljs-comment">//for(int i=1;i&lt;=(n-1)/blo+1;i++){</span>
		<span class="hljs-comment">//	for(int e:ve[i]) cout&lt;&lt;e&lt;&lt;&#x27; &#x27;;</span>
		<span class="hljs-comment">//}</span>
		<span class="hljs-comment">//cout&lt;&lt;endl;</span>
	}
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msqrt><mi>n</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\sqrt{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8003em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal">n</span></span></span><span style="top:-2.7603em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewBox="0 0 400000 1080" preserveAspectRatio="xMinYMin slice"><path d="M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2397em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。期望得分100pts。</p>
<h2 id="t4-nan-gua" tabindex="-1">T4 南瓜</h2>
<h3 id="suan-fa-yi-3" tabindex="-1">算法一</h3>
<p>我们首先考虑特殊性质A，我们对于每个南瓜将其圆度算出，并与1作差取绝对值，然后输出最大的即可。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEElMjNkZWZpbmUlMjBfJTIwMTAwMDAwNiUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBZG91YmxlJTIwaCU1Ql8lNUQlMkNkJTVCXyU1RCUyQ24lMkNrJTNCJTBBaW50JTIwbWFpbigpJTdCJTBBJTA5Y2luJTNFJTNFbiUyQ2NpbiUzRSUzRWslM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwY2luJTNFJTNFaCU1QmklNUQlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwY2luJTNFJTNFZCU1QmklNUQlM0IlMEElMDl2ZWN0b3IlM0Nkb3VibGUlM0UlMjB2ZSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklN0IlMEElMDklMDl2ZS5wdXNoX2JhY2soZmFicygxLjAtaCU1QmklNUQlMkZkJTVCaSU1RCkpJTNCJTBBJTA5JTdEJTBBJTA5c29ydCh2ZS5iZWdpbigpJTJDdmUuZW5kKCkpJTNCJTBBJTA5cHJpbnRmKCUyMiUyNS40bGYlMjIlMkN2ZSU1QjAlNUQpJTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 1000006</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">double</span> h[_],d[_],n,k;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n,cin&gt;&gt;k;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;h[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;d[i];
	vector&lt;<span class="hljs-type">double</span>&gt; ve;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		ve.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">fabs</span>(<span class="hljs-number">1.0</span>-h[i]/d[i]));
	}
	<span class="hljs-built_in">sort</span>(ve.<span class="hljs-built_in">begin</span>(),ve.<span class="hljs-built_in">end</span>());
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4lf&quot;</span>,ve[<span class="hljs-number">0</span>]);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 期望得分35pts。</p>
<h3 id="suan-fa-er-3" tabindex="-1">算法二</h3>
<p>继续考虑特殊性质B，我们只需要把所有的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span>，分别加起来再作商即可。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEElMjNkZWZpbmUlMjBfJTIwMTAwMDAwNiUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBZG91YmxlJTIwaCU1Ql8lNUQlMkNkJTVCXyU1RCUyQ24lMkNrJTNCJTBBaW50JTIwbWFpbigpJTdCJTBBJTA5Y2luJTNFJTNFbiUyQ2NpbiUzRSUzRWslM0IlMEElMDlkb3VibGUlMjBzdW1hJTNEMCUyQ3N1bWIlM0QwJTJDYW5zJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGNpbiUzRSUzRWglNUJpJTVEJTJDc3VtYSUyQiUzRGglNUJpJTVEJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGNpbiUzRSUzRWQlNUJpJTVEJTJDc3VtYiUyQiUzRGQlNUJpJTVEJTNCJTBBJTA5YW5zJTNEc3VtYSUyRnN1bWIlM0IlMEElMDlwcmludGYoJTIyJTI1LjRsZiUyMiUyQ2FucyklM0IlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 1000006</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">double</span> h[_],d[_],n,k;
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n,cin&gt;&gt;k;
	<span class="hljs-type">double</span> suma=<span class="hljs-number">0</span>,sumb=<span class="hljs-number">0</span>,ans;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;h[i],suma+=h[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;d[i],sumb+=d[i];
	ans=suma/sumb;
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4lf&quot;</span>,ans);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> ，结合算法一期望得分60pts。</p>
<h3 id="suan-fa-san-3" tabindex="-1">算法三</h3>
<p>对于前四个测试点，我们注意到数据规模非常小，我们考虑使用暴力搜索</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEElMjNkZWZpbmUlMjBfJTIwMTAwMDAwNiUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBZG91YmxlJTIwaCU1Ql8lNUQlMkNkJTVCXyU1RCUyQ24lMkNrJTNCJTBBJTBBZG91YmxlJTIwYW5zJTNCJTBBdm9pZCUyMGRmcyhpbnQlMjBhJTJDaW50JTIwYiUyQ2RvdWJsZSUyMHN1bWElMkNkb3VibGUlMjBzdW1iKSU3QiUwQSUwOWlmKGIlM0QlM0RrKSU3QiUwQSUwOSUwOWFucyUzRG1heChhbnMlMkNzdW1hJTJGc3VtYiklM0IlMEElMDklMDlyZXR1cm4lM0IlMEElMDklN0QlMEElMDlpZihhJTNFbiklMjByZXR1cm4lM0IlMEElMDlkZnMoYSUyQjElMkNiJTJCMSUyQ3N1bWElMkJoJTVCYSU1RCUyQ3N1bWIlMkJkJTVCYSU1RCklM0IlMEElMDlkZnMoYSUyQjElMkNiJTJDc3VtYSUyQ3N1bWIpJTNCJTBBJTdEJTBBJTBBaW50JTIwbWFpbigpJTdCJTBBJTA5Y2luJTNFJTNFbiUyQ2NpbiUzRSUzRWslM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwY2luJTNFJTNFaCU1QmklNUQlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTIwY2luJTNFJTNFZCU1QmklNUQlM0IlMEElMDlkZnMoMSUyQzAlMkMwJTJDMCklM0IlMEElMDlwcmludGYoJTIyJTI1LjRsZiUyMiUyQ2FucyklM0IlMEElMDlyZXR1cm4lMjAwJTNCJTBBJTdEJTBB"><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 1000006</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">double</span> h[_],d[_],n,k;

<span class="hljs-type">double</span> ans;
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b,<span class="hljs-type">double</span> suma,<span class="hljs-type">double</span> sumb)</span></span>{
	<span class="hljs-keyword">if</span>(b==k){
		ans=<span class="hljs-built_in">max</span>(ans,suma/sumb);
		<span class="hljs-keyword">return</span>;
	}
	<span class="hljs-keyword">if</span>(a&gt;n) <span class="hljs-keyword">return</span>;
	<span class="hljs-built_in">dfs</span>(a<span class="hljs-number">+1</span>,b<span class="hljs-number">+1</span>,suma+h[a],sumb+d[a]);
	<span class="hljs-built_in">dfs</span>(a<span class="hljs-number">+1</span>,b,suma,sumb);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n,cin&gt;&gt;k;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;h[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;d[i];
	<span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4lf&quot;</span>,ans);
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msubsup><mi>C</mi><mi>n</mi><mi>k</mi></msubsup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(C_n^k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-2.453em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。结合算法一、二，期望得分80pts。</p>
<h3 id="suan-fa-si-1" tabindex="-1">算法四</h3>
<p>分类讨论，对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的情况，直接按照算法一的方式去写即可。</p>
<p>对于其他情况，我们考虑二分答案。我们在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>10</mn><mn>12</mn></msup><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,10^{12}]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span> 的范围内进行二分。 对于二分到的 mid，我们对其进行check，判断是否可以满足选出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span> 个南瓜，这些南瓜的；平均圆度大于 mid。</p>
<p>check 函数的实现成为了现在问题的关键。现在要满足：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mo>∑</mo><msub><mi>h</mi><mi>i</mi></msub></mrow><mrow><mo>∑</mo><msub><mi>d</mi><mi>i</mi></msub></mrow></mfrac><mo>≥</mo><mi>m</mi><mi>i</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">\frac{\sum h_i}{\sum d_i}\ge mid
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">mi</span><span class="mord mathnormal">d</span></span></span></span></span></p>
<p>移项，得到</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>∑</mo><mrow><mo stretchy="false">(</mo><msub><mi>h</mi><mi>i</mi></msub><mo>−</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>×</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\sum{(h_i-mid\times d_i)}\ge 0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.6em;vertical-align:-0.55em;"></span><span class="mop op-symbol large-op" style="position:relative;top:0em;">∑</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">mi</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span></p>
<p>我们可以这样说，每个南瓜的贡献为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub><mo>−</mo><mi>m</mi><mi>i</mi><mi>d</mi><mo>×</mo><msub><mi>d</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">h_i-mid\times d_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">mi</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，我们要找k的南瓜，使得这k个南瓜的贡献加起来大于等于0。</p>
<p>显然，我们将所有南瓜的贡献算出来，从大到小排序，选择前k大的贡献加起来，如果总贡献大于等于0说明这个mid是可以接受的，反之不可以接受。</p>
<pre><div class="head"><div class="language">cpp</div><div class="copy" data="JTIzaW5jbHVkZSUzQ2JpdHMlMkZzdGRjJTJCJTJCLmglM0UlMEElMjNkZWZpbmUlMjBfJTIwMTAwMDAwNiUwQXVzaW5nJTIwbmFtZXNwYWNlJTIwc3RkJTNCJTBBJTBBZG91YmxlJTIwaCU1Ql8lNUQlMkNkJTVCXyU1RCUyQ24lMkNrJTNCJTBBJTBBYm9vbCUyMGNoZWNrKGRvdWJsZSUyMG1pZCklN0IlMEElMDlkb3VibGUlMjBvayUzRDAlM0IlMEElMDl2ZWN0b3IlM0Nkb3VibGUlM0UlMjB2ZSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMSUzQmklM0MlM0RuJTNCaSUyQiUyQiklMjB2ZS5wdXNoX2JhY2soaCU1QmklNUQtZCU1QmklNUQqbWlkKSUzQiUwQSUwOXNvcnQodmUuYmVnaW4oKSUyQ3ZlLmVuZCgpJTJDJTVCJTVEKGRvdWJsZSUyMHglMkNkb3VibGUlMjB5KSU3QnJldHVybiUyMHglM0V5JTNCJTdEKSUzQiUwQSUwOWZvcihpbnQlMjBpJTNEMCUzQmklM0NrJTNCaSUyQiUyQiklMjBvayUyQiUzRHZlJTVCaSU1RCUzQiUwQSUwOXJldHVybiUyMG9rJTNFJTNEMCUzQiUwQSU3RCUwQSUwQXZvaWQlMjBzdWJ0YXNrMigpJTdCJTBBJTA5ZG91YmxlJTIwbCUzRDAlMkNyJTNEMTAwMDAwMDAwMDAwMCUyQ21pZCUyQ2FucyUzQiUwQSUwOXdoaWxlKHItbCUzRSUzRDFlLTgpJTdCJTBBJTA5JTA5bWlkJTNEKGwlMkJyKSUyRjIlM0IlMEElMDklMDlpZihjaGVjayhtaWQpKSUyMGFucyUzRG1pZCUyQ2wlM0RtaWQlM0IlMEElMDklMDllbHNlJTIwciUzRG1pZCUzQiUwQSUwOSU3RCUwQSUwOXByaW50ZiglMjIlMjUuNGxmJTIyJTJDYW5zKSUzQiUwQSU3RCUwQXZvaWQlMjBzdWJ0YXNrMSgpJTdCJTBBJTA5dmVjdG9yJTNDZG91YmxlJTNFJTIwdmUlM0IlMEElMDlmb3IoaW50JTIwaSUzRDElM0JpJTNDJTNEbiUzQmklMkIlMkIpJTdCJTBBJTA5JTA5dmUucHVzaF9iYWNrKGZhYnMoMS4wLWglNUJpJTVEJTJGZCU1QmklNUQpKSUzQiUwQSUwOSU3RCUwQSUwOXNvcnQodmUuYmVnaW4oKSUyQ3ZlLmVuZCgpKSUzQiUwQSUwOXByaW50ZiglMjIlMjUuNGxmJTIyJTJDdmUlNUIwJTVEKSUzQiUwQSU3RCUwQSUwQWludCUyMG1haW4oKSU3QiUwQSUwOWNpbiUzRSUzRW4lMkNjaW4lM0UlM0VrJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGNpbiUzRSUzRWglNUJpJTVEJTNCJTBBJTA5Zm9yKGludCUyMGklM0QxJTNCaSUzQyUzRG4lM0JpJTJCJTJCKSUyMGNpbiUzRSUzRWQlNUJpJTVEJTNCJTBBJTA5aWYoayUzRCUzRDEpJTIwc3VidGFzazEoKSUzQiUwQSUwOWVsc2UlMjBzdWJ0YXNrMigpJTNCJTBBJTA5cmV0dXJuJTIwMCUzQiUwQSU3RCUwQQ=="><svg focusable="false" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"></path></svg></div></div><code class="hljs"><div class="lines"><div>1</div><div>2</div><div>3</div><div>4</div><div>5</div><div>6</div><div>7</div><div>8</div><div>9</div><div>10</div><div>11</div><div>12</div><div>13</div><div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div><div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div><div>28</div><div>29</div><div>30</div><div>31</div><div>32</div><div>33</div><div>34</div><div>35</div><div>36</div><div>37</div><div>38</div><div>39</div><div>40</div><div>41</div></div><div class="code"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> _ 1000006</span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">double</span> h[_],d[_],n,k;

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">check</span><span class="hljs-params">(<span class="hljs-type">double</span> mid)</span></span>{
	<span class="hljs-type">double</span> ok=<span class="hljs-number">0</span>;
	vector&lt;<span class="hljs-type">double</span>&gt; ve;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) ve.<span class="hljs-built_in">push_back</span>(h[i]-d[i]*mid);
	<span class="hljs-built_in">sort</span>(ve.<span class="hljs-built_in">begin</span>(),ve.<span class="hljs-built_in">end</span>(),[](<span class="hljs-type">double</span> x,<span class="hljs-type">double</span> y){<span class="hljs-keyword">return</span> x&gt;y;});
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;k;i++) ok+=ve[i];
	<span class="hljs-keyword">return</span> ok&gt;=<span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask2</span><span class="hljs-params">()</span></span>{
	<span class="hljs-type">double</span> l=<span class="hljs-number">0</span>,r=<span class="hljs-number">1000000000000</span>,mid,ans;
	<span class="hljs-keyword">while</span>(r-l&gt;=<span class="hljs-number">1e-8</span>){
		mid=(l+r)/<span class="hljs-number">2</span>;
		<span class="hljs-keyword">if</span>(<span class="hljs-built_in">check</span>(mid)) ans=mid,l=mid;
		<span class="hljs-keyword">else</span> r=mid;
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4lf&quot;</span>,ans);
}
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">subtask1</span><span class="hljs-params">()</span></span>{
	vector&lt;<span class="hljs-type">double</span>&gt; ve;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){
		ve.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">fabs</span>(<span class="hljs-number">1.0</span>-h[i]/d[i]));
	}
	<span class="hljs-built_in">sort</span>(ve.<span class="hljs-built_in">begin</span>(),ve.<span class="hljs-built_in">end</span>());
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.4lf&quot;</span>,ve[<span class="hljs-number">0</span>]);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
	cin&gt;&gt;n,cin&gt;&gt;k;
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;h[i];
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++) cin&gt;&gt;d[i];
	<span class="hljs-keyword">if</span>(k==<span class="hljs-number">1</span>) <span class="hljs-built_in">subtask1</span>();
	<span class="hljs-keyword">else</span> <span class="hljs-built_in">subtask2</span>();
	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<p>时间复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n \log \log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 。期望得分100pts。</p>
